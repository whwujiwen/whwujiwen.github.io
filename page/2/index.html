<!DOCTYPE html>
<html lang="en"><head>
    <meta charset="utf-8">
    <meta name="theme-color" content="#000" />
    <title>
        
             
                Blog 
             
            &middot; Lorem ipsum dolor sit amet, consectetur adipiscing elit.
        
    </title>

    
    <link rel="stylesheet" href="https://unpkg.com/purecss@1.0.0/build/pure-min.css"
        integrity="sha384-nn4HPE8lTHyVtfCBi5yW9d20FjT8BJwUXyWZT9InLYax14RDjBj46LmSztkmNP9w" crossorigin="anonymous">
    
    
    <link rel="stylesheet" href="https://unpkg.com/purecss@1.0.0/build/grids-responsive-min.css">
    
    <link rel="stylesheet" href="/css/style.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Merriweather:300,300italic,700&display=swap" type="text/css">
    <link href="https://fonts.googleapis.com/css?family=Fira+Sans+Condensed:300&display=swap" rel="stylesheet">
    <link rel="icon" href="/img/favicon.ico" type="image/x-icon">

    <link rel="alternate" type="application/atom+xml" title="Atom Feed" href="/atom.xml" />

    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="">
    
    <meta name="description" content="">
    
    <meta name="author" content="吴继文"></head>

<body>
        <div class="container">
<div id="navbar" class="pure-menu pure-menu-open pure-menu-horizontal pure-menu-scrollable">
    <a href="/" class="pure-menu-heading">
         
            Blog 
         
    </a>
    <ul class="pure-menu-list">
        <li class="pure-menu-item">
            <a href="/posts" class="pure-menu-link">
                <i class="fa fa-archive"></i>
                文章
            </a>
        </li>
        <li class="pure-menu-item">
            <a href="/tags" class="pure-menu-link">
                <i class="fas fa-comments"></i>
                分类
            </a>
        </li>
        <li class="pure-menu-item">
            <a href="/about" class="pure-menu-link">
                <i class="fas fa-smile"></i>
                关于我
            </a>
        </li>
    </ul>
    <ul class="pure-menu-list pull-right">
        
        <li class="pure-menu-item">
            <a href="https://www.baidu.com" title="Github" class="pure-menu-link">
                <i class="fab fa-github"></i>
                <span class="hide">Github</span>
            </a>
        </li>
        
        
        <li class="pure-menu-item">
            <a href="http://twitter.com/example" title="@pravin" class="pure-menu-link">
                <i class="fab fa-twitter-square"></i>
                <span class="hide">Twitter</span>
            </a>
        </li>
        
        
        <li class="pure-menu-item">
            <a href="http://uk.linkedin.com/in/example" title="Linked In" class="pure-menu-link">
                <i class="fab fa-linkedin"></i>
                <span class="hide">LinkedIn</span>
            </a>
        </li>
        
        
        <li class="pure-menu-item">
            <a href="https://www.medium.com/@example" title="Medium" class="pure-menu-link">
                <i class="fab fa-medium"></i>
                <span class="hide">Medium</span>
            </a>
        </li>
        
        
        <li class="pure-menu-item">
            <a href="https://www.facebook.com/example" title="Facebook" class="pure-menu-link">
                <i class="fab fa-facebook"></i>
                <span class="hide">Facebook</span>
            </a>
        </li>
        
        <li class="pure-menu-item">
            <a href="/atom.xml" title="Atom Feed" class="pure-menu-link">
                <i class="fas fa-rss-square"></i>
                <span class="hide">RSS Feed</span>
            </a>
        </li>
    </ul>
</div>
<div class="pure-u-1">
    <div class="pad">
    </div>
</div>
<div class="pure-g">

<div id="content" class="pure-u-1 pure-u-md-3-4 pure-u-sm-1">
    

    <div class="pad">

<div class="date">
    <time pubdate="0001-01-01">January 1, 0001</time>
    <span class="author">学习笔记</span>
</div>

<article>
    <h1><a href="https://example.com/posts/maven/">Maven的基本使用</a></h1>
    <div class="tags">
        
        
        <a href="/tags/%E7%BC%96%E7%A8%8B" class="pure-button">编程</a>
        
    </div>
    <h2 id="一目前技术存在问题">一、目前技术存在问题</h2>
<p>1.一个项目就是一个工程。
2.项目中所需要的jar包必须手动赋值粘贴到自己工程中
3.jar包需要提前准备好或者到官网去下载。
4.一个jar包依赖的其他jar包需要我们自己手动下载添加
为了解决上述的问题：提出了一项新技术。那就是Maven,借助Maven我们可以以一种规范的方式下载jar包，因为所有的jar包已经按照统一的规范存放在Maven的中央仓库中。</p>
<h2 id="二什么是maven">二、什么是Maven</h2>
<p>1.Maven是一款服务于Java平台的自动构建工具。
所谓的&quot;构建&quot;就是以&quot;java文件&rdquo;、&ldquo;框架配置文件&rdquo;、&ldquo;jsp&rdquo;、&ldquo;HEML&quot;等资源为原材料，去生产一个可以运行的项目。（编译+部署+搭建）
2.构建的各个环节。
a.清理：将以前编译得到的旧的class字节码文件删除为下一次编译做准备。
b.将java源程序编译成class字节码文件
c.测试:自动测试，自动调用jutil程序
d.报告：测试程序执行的结果
e.打包：动态web工程打包成war包、java工程打包成java包
f.安装：Maven特定的概念&mdash;&mdash;将打包的内容赋值到&quot;仓库&quot;中的指定位置
g.部署：将动态的web工程生成war包，赋值带servlet容器下指定的目录，使其可以运行。</p>
<h2 id="三maven的安装">三、Maven的安装</h2>
<p>安装步骤：
1.先将压缩包解压到安装陌路下面
2.配置环境变量
变量名：M2_HOME
变量值：D:\maven\apache-maven-3.6.1-bin\apache-maven-3.6.1
3.在PATH后面追加路径：D:\tomcat\apache-tomcat-8.5.42-windows-x64\apache-tomcat-8.5.42\bin 或者 %M2_HOME%\bin
4.检测是否安装成功
在DOS系统下输入：mvn -v
注意：听说将“变量名”改成“MAVEN_HOME”时会出现一些问题，本人没有尝试过哦</p>
<p>使用maven技术遇到的一些问题：
1.在依赖其他的maven工程师时，如果依赖的jre包显示为文件夹，是由于你的被依赖的maven工程没有关闭</p>
<h2 id="四手动创建一个maven工程">四、手动创建一个Maven工程</h2>
<p>1.创建约定的目录的目录结构
根目录：工程名
src目录：源码
pom.xml文件：Maven核心配置文件
main目录：存放主程序
test目录：存放测试程序
java目录：存放测试程序
resources目录：存放框架或者其他配置文件
2.为什么要使用约定的目录结构
Maven要自动构建我们这个项目，以编译为例，Maven想要自动编译那么必须通知java源件的位置
3.我的第一个Maven工程
第一步：手动新建目录结构
<img src="/assets/blogImg/maven4.3.jpg" alt="2">
第二部：在pom.xml中添加依赖关系</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml"><span style="color:#1e889b">&lt;?xml version=&#34;1.0&#34; ?&gt;</span>
<span style="color:#8b008b;font-weight:bold">&lt;project</span> <span style="color:#658b00">xmlns=</span><span style="color:#cd5555">&#34;http://maven.apache.org/POM/4.0.0&#34;</span> <span style="color:#658b00">xmlns:xsi=</span><span style="color:#cd5555">&#34;http://www.w3.org/2001/XMLSchema-instance&#34;</span><span style="color:#658b00">xsi:schemaLocation=</span><span style="color:#cd5555">&#34;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd&#34;</span><span style="color:#8b008b;font-weight:bold">&gt;</span>
	 <span style="color:#8b008b;font-weight:bold">&lt;modelVersion&gt;</span>4.0.0<span style="color:#8b008b;font-weight:bold">&lt;/modelVersion&gt;</span>
	 
	 <span style="color:#8b008b;font-weight:bold">&lt;groupId&gt;</span>com.atguigu.maven<span style="color:#8b008b;font-weight:bold">&lt;/groupId&gt;</span>
	 <span style="color:#8b008b;font-weight:bold">&lt;artifactId&gt;</span>Hello<span style="color:#8b008b;font-weight:bold">&lt;/artifactId&gt;</span>
	 <span style="color:#8b008b;font-weight:bold">&lt;version&gt;</span>0.0.1-SNAPSHOT<span style="color:#8b008b;font-weight:bold">&lt;/version&gt;</span>
	 
	 <span style="color:#8b008b;font-weight:bold">&lt;name&gt;</span>Hello<span style="color:#8b008b;font-weight:bold">&lt;/name&gt;</span>
	 
	 <span style="color:#8b008b;font-weight:bold">&lt;dependencies&gt;</span>
		<span style="color:#8b008b;font-weight:bold">&lt;dependency&gt;</span>
			<span style="color:#8b008b;font-weight:bold">&lt;groupId&gt;</span>junit<span style="color:#8b008b;font-weight:bold">&lt;/groupId&gt;</span>
			<span style="color:#8b008b;font-weight:bold">&lt;artifactId&gt;</span>junit<span style="color:#8b008b;font-weight:bold">&lt;/artifactId&gt;</span>
			<span style="color:#8b008b;font-weight:bold">&lt;version&gt;</span>4.0<span style="color:#8b008b;font-weight:bold">&lt;/version&gt;</span>
			<span style="color:#8b008b;font-weight:bold">&lt;scope&gt;</span>test<span style="color:#8b008b;font-weight:bold">&lt;/scope&gt;</span>
		<span style="color:#8b008b;font-weight:bold">&lt;/dependency&gt;</span>
	<span style="color:#8b008b;font-weight:bold">&lt;/dependencies&gt;</span>	
<span style="color:#8b008b;font-weight:bold">&lt;/project&gt;</span>	
</code></pre></div><h2 id="五常用的指令">五、常用的指令</h2>
<p>指定maven相关的指令，必须先进入到pom.xml所在目录中。
相关的指令：</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java">mvn clean                <span style="color:#228b22">//清理
</span><span style="color:#228b22"></span>mvn compile             <span style="color:#228b22">//编译主程序
</span><span style="color:#228b22"></span>mvn test-compile        <span style="color:#228b22">//编译测试程序
</span><span style="color:#228b22"></span>mvn test                <span style="color:#228b22">//执行测试程序
</span><span style="color:#228b22"></span>mvn <span style="color:#8b008b;font-weight:bold">package</span>             <span style="color:#a61717;background-color:#e3d2d2">//</span><span style="color:#008b45;text-decoration:underline">打包</span>
mvn install             <span style="color:#228b22">//安装（将生成的jar包村东仓库）
</span><span style="color:#228b22"></span>mvn site                <span style="color:#228b22">//生成站点
</span></code></pre></div><h2 id="六联网的问题">六、联网的问题</h2>
<p>1.Maven的核心程序仅仅定义了生命周期，但是具体的工作必须由插件来完成。而插件本身并不包括Maven的核心程序。
2.当执行Mavne命令需要使用到某些插件时，Maven核心程序首先到本地的仓库中进行查找
3.本地仓库的位置[系统中当前用户的家目录.m2\reposity]
4.Mavan核心程序如果再本地找不到所需要的文件，他就会自动自动联网下载
5.修改本地仓库的位置:
a.找到Mavne的解压目录\conf\setting.xml
b.在settings中找到localRepository标签
c.将标签从注释中取出来
d.标签中包裹的路径就是指定仓库的目标</p>

</article></div>
    <div class="pad"></div>

    

    <div class="pad">

<div class="date">
    <time pubdate="0001-01-01">January 1, 0001</time>
    <span class="author">学习笔记</span>
</div>

<article>
    <h1><a href="https://example.com/posts/mybatis%E7%9A%84%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/">Mybatis的基础知识</a></h1>
    <div class="tags">
        
        
        <a href="/tags/%E6%A1%86%E6%9E%B6" class="pure-button">框架</a>
        
    </div>
    <h2 id="一mybatis简介">一、mybatis简介</h2>
<p>MyBatis 是一款优秀的持久层框架，它支持定制化 SQL、存储过程以及高级映射。MyBatis 避免了几乎所有的 JDBC 代码和手动设置参数以及获取结果集。MyBatis 可以使用简单的 XML 或注解来配置和映射原生信息，将接口和 Java 的 POJOs(Plain Ordinary Java Object,普通的 Java对象)映射成数据库中的记录。
具体的步骤：
1.创建maven工程，并引入坐标
2.创建实体类和dao的接口
3.创建Mybatis的主配置文件（SqlMapConfig.xml）
4.创建映射文件（IUserDao.xml）
环境搭建的注意事项：
1.创建IUserDao.xml和IUserDao.java时名称是为了和之前所学的知识保持一致。在mybatis中他把持久层的操作接口名称和映射文件也叫做Mapper
2.在IDEA中创建目录时，他和包是不一样
包在创建时：com.itheima.dao他是三级结构
目录在创建时：com.itheima.dao是一级结构
3.mybatis的映射配置文件位置和dao层接口的包的结构相同
4.映射配置文件的mapper标签namespace属性的取值必须是dao接口的全限定类名
5.映射配置文件的操作配置，id属性的取值必须是dao接口的方法名
当我们遵从第三、第四、第五之后，我们在开发中就不需要再写dao接口的实现类。
IUserDao.java:</p>
<h2 id="二mybatis的入门程序之hello-world">二、mybatis的入门程序之hello world</h2>
<p>目录结构如下:mybatis1.png
<img src="/assets/blogImg/mybatis1.png" alt="mybatis"></p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#8b008b;font-weight:bold">package</span> <span style="color:#008b45;text-decoration:underline">com.itheima.dao</span>;
<span style="color:#228b22">/*
</span><span style="color:#228b22"> @author wujiwen
</span><span style="color:#228b22"> @data 2019/8/29 - 22:16   
</span><span style="color:#228b22">*/</span>
<span style="color:#8b008b;font-weight:bold">import</span> <span style="color:#008b45;text-decoration:underline">com.itheima.domain.User</span>;
<span style="color:#8b008b;font-weight:bold">import</span> <span style="color:#008b45;text-decoration:underline">java.util.List</span>;
<span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#8b008b;font-weight:bold">interface</span> <span style="color:#008b45;font-weight:bold">IUserDao</span> {
    List&lt;User&gt; <span style="color:#008b45">findAll</span>();
}
</code></pre></div><p>User.java</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#8b008b;font-weight:bold">package</span> <span style="color:#008b45;text-decoration:underline">com.itheima.domain</span>;<span style="color:#228b22">/*
</span><span style="color:#228b22"> @author wujiwen
</span><span style="color:#228b22"> @data 2019/8/29 - 22:11   
</span><span style="color:#228b22">*/</span>

<span style="color:#8b008b;font-weight:bold">import</span> <span style="color:#008b45;text-decoration:underline">java.io.Serializable</span>;

<span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#8b008b;font-weight:bold">class</span> <span style="color:#008b45;font-weight:bold">User</span> <span style="color:#8b008b;font-weight:bold">implements</span> Serializable {
    <span style="color:#8b008b;font-weight:bold">private</span> <span style="color:#00688b;font-weight:bold">int</span> id;
    <span style="color:#8b008b;font-weight:bold">private</span> String name;
    <span style="color:#8b008b;font-weight:bold">private</span> <span style="color:#00688b;font-weight:bold">int</span> age;

    <span style="color:#8b008b;font-weight:bold">public</span> Integer <span style="color:#008b45">getId</span>() {
        <span style="color:#8b008b;font-weight:bold">return</span> id;
    }

    <span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#00688b;font-weight:bold">void</span> <span style="color:#008b45">setId</span>(Integer id) {
        <span style="color:#8b008b;font-weight:bold">this</span>.<span style="color:#658b00">id</span> = id;
    }

    <span style="color:#8b008b;font-weight:bold">public</span> String <span style="color:#008b45">getName</span>() {
        <span style="color:#8b008b;font-weight:bold">return</span> name;
    }

    <span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#00688b;font-weight:bold">void</span> <span style="color:#008b45">setName</span>(String name) {
        <span style="color:#8b008b;font-weight:bold">this</span>.<span style="color:#658b00">name</span> = name;
    }

    <span style="color:#8b008b;font-weight:bold">public</span> Integer <span style="color:#008b45">getAge</span>() {
        <span style="color:#8b008b;font-weight:bold">return</span> age;
    }

    <span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#00688b;font-weight:bold">void</span> <span style="color:#008b45">setAge</span>(Integer age) {
        <span style="color:#8b008b;font-weight:bold">this</span>.<span style="color:#658b00">age</span> = age;
    }

    <span style="color:#707a7c">@Override</span>
    <span style="color:#8b008b;font-weight:bold">public</span> String <span style="color:#008b45">toString</span>() {
        <span style="color:#8b008b;font-weight:bold">return</span> <span style="color:#cd5555">&#34;User{&#34;</span> +
                <span style="color:#cd5555">&#34;id=&#34;</span> + id +
                <span style="color:#cd5555">&#34;, name=&#39;&#34;</span> + name + <span style="color:#cd5555">&#39;\&#39;&#39;</span> +
                <span style="color:#cd5555">&#34;, age=&#34;</span> + age +
                <span style="color:#cd5555">&#39;}&#39;</span>;
    }
}
</code></pre></div><p>IUserDao.xml</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml"><span style="color:#1e889b">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34; ?&gt;</span>
<span style="color:#1e889b">&lt;!DOCTYPE mapper
</span><span style="color:#1e889b">        PUBLIC &#34;-//mybatis.org//DTD Mapper 3.0//EN&#34;
</span><span style="color:#1e889b">        &#34;http://mybatis.org/dtd/mybatis-3-mapper.dtd&#34;&gt;</span>
<span style="color:#8b008b;font-weight:bold">&lt;mapper</span> <span style="color:#658b00">namespace=</span><span style="color:#cd5555">&#34;com.itheima.dao.IUserDao&#34;</span><span style="color:#8b008b;font-weight:bold">&gt;</span>
    <span style="color:#228b22">&lt;!--配置查询所有--&gt;</span>
    <span style="color:#8b008b;font-weight:bold">&lt;select</span> <span style="color:#658b00">id=</span><span style="color:#cd5555">&#34;findAll&#34;</span> <span style="color:#658b00">resultType=</span><span style="color:#cd5555">&#34;com.itheima.domain.User&#34;</span><span style="color:#8b008b;font-weight:bold">&gt;</span>
    select * from users
  <span style="color:#8b008b;font-weight:bold">&lt;/select&gt;</span>
<span style="color:#8b008b;font-weight:bold">&lt;/mapper&gt;</span>
</code></pre></div><p>log4j.properties</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#228b22">##logger是进行记录的主要类，appender是记录的方式,layout是记录的格式</span>

<span style="color:#228b22">#Logger - 日志写出器，供程序员输出日志信息</span>
<span style="color:#228b22">#Appender - 日志目的地，把格式化好的日志信息输出到指定的地方去</span>
<span style="color:#228b22">#ConsoleAppender - 目的地为控制台的Appender</span>
<span style="color:#228b22">#FileAppender - 目的地为文件的Appender</span>
<span style="color:#228b22">#RollingFileAppender - 目的地为大小受限的文件的Appender</span>
<span style="color:#228b22">#Layout - 日志格式化器，用来把程序员的logging request格式化成字符串</span>
<span style="color:#228b22">#PatternLayout - 用指定的pattern格式化logging request的Layou</span>

<span style="color:#228b22">#Log4j提供的appender有以下几种：</span>
<span style="color:#228b22">#　　org.apache.log4j.ConsoleAppender（控制台），</span>
<span style="color:#228b22">#　　org.apache.log4j.FileAppender（文件），</span>
<span style="color:#228b22">#　　org.apache.log4j.DailyRollingFileAppender（每天产生一个日志文件），</span>
<span style="color:#228b22">#　　org.apache.log4j.RollingFileAppender（文件大小到达指定尺寸的时候产生一个新的文件），</span>
<span style="color:#228b22">#　　org.apache.log4j.WriterAppender（将日志信息以流格式发送到任意指定的地方）</span>

<span style="color:#228b22">#Log4j提供的layout有以下几种：</span>
<span style="color:#228b22">#　　org.apache.log4j.HTMLLayout（以HTML表格形式布局），</span>
<span style="color:#228b22">#　　org.apache.log4j.PatternLayout（可以灵活地指定布局模式），</span>
<span style="color:#228b22">#　　org.apache.log4j.SimpleLayout（包含日志信息的级别和信息字符串），</span>
<span style="color:#228b22">#　　org.apache.log4j.TTCCLayout（包含日志产生的时间、线程、类别等等信息）</span>

<span style="color:#228b22">#Log4J采用类似C语言中的printf函数的打印格式格式化日志信息，打印参数如下</span>
<span style="color:#228b22">#    %m 输出代码中指定的消息</span>
<span style="color:#228b22">#    %M 输出日志发生的方法名</span>
<span style="color:#228b22">#　　%p 输出优先级，即DEBUG，INFO，WARN，ERROR，FATAL</span>
<span style="color:#228b22">#　　%r 输出自应用启动到输出该log信息耗费的毫秒数</span>
<span style="color:#228b22">#　　%c 输出所属的类目，通常就是所在类的全名</span>
<span style="color:#228b22">#　　%t 输出产生该日志事件的线程名</span>
<span style="color:#228b22">#　　%n 输出一个回车换行符，Windows平台为“rn”，Unix平台为“n”</span>
<span style="color:#228b22">#　　%d 输出日志时间点的日期或时间，默认格式为ISO8601，也可以在其后指定格式，比如：%d{yyyy MMM dd HH:mm:ss,SSS}，输出类似：2002年10月18日 22：10：28，921</span>
<span style="color:#228b22">#　　%l 输出日志事件的发生位置，包括类目名、发生的线程，以及在代码中的行数。举例：Testlog4.main(TestLog4.java:10)</span>
<span style="color:#228b22">#    %L 输出日志发生的位置</span>
<span style="color:#228b22">#     %F 输出类名</span>


<span style="color:#228b22">#####################################################################</span>
<span style="color:#228b22">#设置级别和目的地 -- 把日志等级为debug的日志信息输出到stdout和SYS,QUERY这三个目的地</span>
log4j.rootLogger=debug,STDOUT
<span style="color:#228b22"># stdout:目的地 -- 打印到屏幕</span>
<span style="color:#228b22">## org.apache.log4j.ConsoleAppender:控制台</span>
log4j.appender.STDOUT=org.apache.log4j.ConsoleAppender
<span style="color:#228b22">## org.apache.log4j.PatternLayout:灵活地指定布局模式</span>
log4j.appender.STDOUT.layout=org.apache.log4j.PatternLayout
<span style="color:#228b22">## 上一句设置了PatternLayout灵活指定格式，则要指定打印参数 [%-5p][%d{HH:mm:ss}][%c-%M] %m%n   [%-5p][%d{HH:mm:ss}][%l] %m%n</span>
log4j.appender.STDOUT.layout.ConversionPattern=[%-5p][%d{yyyy-MM-dd HH:mm:ss sss}][%t][%c-%M][%L](%F:%L) - %m%n


<span style="color:#228b22"># QUERY:目的地 -- 输出到文件(限定每个文件大小)</span>
<span style="color:#228b22">## 凡是 info、warn、error、fatal 级别的数据都会在这里执行输出到 query.log 日志文件中</span>
<span style="color:#228b22">##log4j.logger.QUERY=INFO,QUERY</span>
log4j.logger.QUERY=INFO
<span style="color:#228b22">##输出到文件(这里默认为追加方式)，使用org.apache.log4j.FileAppender：日志会在一个文件中追加</span>
log4j.appender.QUERY=org.apache.log4j.RollingFileAppender
<span style="color:#228b22">##设置文件输出路径;html:log/query.html</span>
log4j.appender.QUERY.File=log/query.log
<span style="color:#228b22">##设置文件输出样式;html格式： org.apache.log4j.HTMLLayout</span>
log4j.appender.QUERY.layout=org.apache.log4j.PatternLayout
<span style="color:#228b22">## 上一句设置了PatternLayout灵活指定格式，则要指定打印参数 [%-5p][%d{HH:mm:ss}][%l] %m%n</span>
log4j.appender.QUERY.layout.ConversionPattern=[%-5p][%d{yyyy-MM-dd HH:mm:ss}][%c-%M] %m%n
<span style="color:#228b22">## 指定文件的最大 大小</span>
log4j.appender.QUERY.MaxFileSize=2048KB
<span style="color:#228b22">## 可被备份的日志数</span>
log4j.appender.QUERY.MaxBackupIndex=<span style="color:#b452cd">100</span>


<span style="color:#228b22"># SYS:目的地 -- 输出到文件(每天产生一个文件)</span>
<span style="color:#228b22">## 凡是 error、fatal 级别的数据都会在这里执行输出到 sys.log 日志文件中</span>
<span style="color:#228b22">#log4j.logger.SYS=error,SYS</span>
log4j.logger.SYS=error
<span style="color:#228b22">## org.apache.log4j.RollingFileAppender:每天产生一个日志文件</span>
<span style="color:#228b22">#使用org.apache.log4j.FileAppender：日志会在一个文件中追加</span>
log4j.appender.SYS=org.apache.log4j.DailyRollingFileAppender
<span style="color:#228b22">##设置文件输出路径 ${user.home}/log/sys.log</span>
log4j.appender.SYS.File=log/sys.log
<span style="color:#228b22">## org.apache.log4j.PatternLayout:灵活地指定布局模式</span>
log4j.appender.SYS.layout=org.apache.log4j.PatternLayout
<span style="color:#228b22">## 上一句设置了PatternLayout灵活指定格式，则要指定打印参数 [%-5p][%d{HH:mm:ss}][%l] %m%n</span>
log4j.appender.SYS.layout.ConversionPattern=[%-5p][%d{HH:mm:ss}][%C-%M] %m%n

<span style="color:#228b22">#设置特定包的级别</span>
<span style="color:#228b22">##com.swh.weixin包下的日志内容显示级别为debug,和目的地</span>
<span style="color:#228b22">## 把com.swh.weixin.util包下日志等级为debug的信息输出到pack 目的地</span>
<span style="color:#228b22">#log4j.logger.com.swh.weixin.util=debug,pack</span>
<span style="color:#228b22">##输出到文件(这里默认为追加方式)，使用org.apache.log4j.FileAppender：日志会在一个文件中追加</span>
log4j.appender.pack=org.apache.log4j.RollingFileAppender
<span style="color:#228b22">##设置文件输出路径  或者 ${user.home}/log/pack.log</span>
log4j.appender.pack.File=log/pack.log
<span style="color:#228b22">##设置文件输出样式</span>
log4j.appender.pack.layout=org.apache.log4j.PatternLayout
<span style="color:#228b22">## 上一句设置了PatternLayout灵活指定格式，则要指定打印参数 [%-5p][%d{HH:mm:ss}][%l] %m%n</span>
log4j.appender.pack.layout.ConversionPattern=[%-5p][%d{yyyy MM dd HH:mm:ss}][%c-%M] %m%n
<span style="color:#228b22">## 指定文件的最大 大小</span>
log4j.appender.pack.MaxFileSize=1024KB
<span style="color:#228b22">#日志最大备份数目</span>
log4j.appender.pack.MaxBackupIndex=<span style="color:#b452cd">100</span>

<span style="color:#228b22">########################################################################</span>
<span style="color:#228b22">##设置级别和目的地</span>
<span style="color:#228b22">#log4j.rootLogger=debug,appender1,appender2</span>
<span style="color:#228b22">##只设置特定包的级别和目的地</span>
<span style="color:#228b22">#log4j.logger.com.coderdream=debug,appender1</span>
<span style="color:#228b22">#log4j.logger.com.coderdream.Dao=info,appender1,appender2</span>

<span style="color:#228b22">##输出到控制台</span>
<span style="color:#228b22">#log4j.appender.appender1=org.apache.log4j.ConsoleAppender</span>
<span style="color:#228b22">##设置输出样式</span>
<span style="color:#228b22">#log4j.appender.appender1.layout=org.apache.log4j.PatternLayout</span>
<span style="color:#228b22">##自定义样式</span>
<span style="color:#228b22">## %r 时间 0</span>
<span style="color:#228b22">## %t 方法名 main</span>
<span style="color:#228b22">## %p 优先级 DEBUG/INFO/ERROR</span>
<span style="color:#228b22">## %c 所属类的全名(包括包名)</span>
<span style="color:#228b22">## %l 发生的位置，在某个类的某行</span>
<span style="color:#228b22">## %m 输出代码中指定的讯息，如log(message)中的message</span>
<span style="color:#228b22">## %n 输出一个换行符号</span>
<span style="color:#228b22">#log4j.appender.appender1.layout.ConversionPattern=[%d{yy/MM/dd HH:mm:ss:SSS}][%C-%M] %m%n</span>

<span style="color:#228b22">##输出到文件(这里默认为追加方式)</span>
<span style="color:#228b22">#log4j.appender.appender2=org.apache.log4j.FileAppender</span>
<span style="color:#228b22">##设置文件输出路径</span>
<span style="color:#228b22">##【1】文本文件</span>
<span style="color:#228b22">#log4j.appender.appender2.File=c:/Log4JCRM_Dao.log</span>
<span style="color:#228b22">##设置文件输出样式</span>
<span style="color:#228b22">#log4j.appender.appender2.layout=org.apache.log4j.PatternLayout</span>
<span style="color:#228b22">#log4j.appender.appender2.layout.ConversionPattern=[%d{HH:mm:ss:SSS}][%C-%M] -%m%n</span>


<span style="color:#228b22">##把日志文件写入数据库</span>
<span style="color:#228b22">##########################日志输出到远程数据库########################################</span>
<span style="color:#228b22">##把日志文件写入数据库</span>
<span style="color:#228b22">##记录的日志级别</span>
log4j.logger.db=info
<span style="color:#228b22">##日志输出到数据库</span>
log4j.appender.db = org.apache.log4j.jdbc.JDBCAppender
<span style="color:#228b22">##缓存</span>
log4j.appender.db.BufferSize = <span style="color:#b452cd">0</span>
<span style="color:#228b22">##数据库驱动</span>
log4j.appender.db.Driver = com.mysql.jdbc.Driver
<span style="color:#228b22">##数据url地址 ，本地可简写：jdbc:mysql:///test</span>
log4j.appender.db.URL = jdbc:mysql://localhost:3306/swh_hibernate4?useUnicode=true&amp;<span style="color:#00688b">characterEncoding</span>=utf8
<span style="color:#228b22">##数据库用户名</span>
log4j.appender.db.User = root
<span style="color:#228b22">##数据库密码</span>
log4j.appender.db.Password = root
<span style="color:#228b22">##日志布局模式</span>
log4j.appender.db.layout = org.apache.log4j.PatternLayout
<span style="color:#228b22">##日志插入数据库中，t_logs 表字段可自定义</span>
log4j.appender.db.layout.ConversionPattern = INSERT INTO t_logs(createDate, thread, priority, category,&lt;br /&gt;
methodName, message) values(<span style="color:#cd5555">&#39;%d&#39;</span>, <span style="color:#cd5555">&#39;%t&#39;</span>, <span style="color:#cd5555">&#39;%-5p&#39;</span>, <span style="color:#cd5555">&#39;%c&#39;</span>,<span style="color:#cd5555">&#39;%M&#39;</span>, <span style="color:#cd5555">&#39;[%l]-%m&#39;</span>)
</code></pre></div><p>SqlMapConfig.xml:</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml"><span style="color:#1e889b">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34; ?&gt;</span>
<span style="color:#1e889b">&lt;!DOCTYPE configuration
</span><span style="color:#1e889b">        PUBLIC &#34;-//mybatis.org//DTD Config 3.0//EN&#34;
</span><span style="color:#1e889b">        &#34;http://mybatis.org/dtd/mybatis-3-config.dtd&#34;&gt;</span>
<span style="color:#228b22">&lt;!--mybatis的主配置文件--&gt;</span>
<span style="color:#8b008b;font-weight:bold">&lt;configuration&gt;</span>
    <span style="color:#228b22">&lt;!--配置环境--&gt;</span>
    <span style="color:#8b008b;font-weight:bold">&lt;environments</span> <span style="color:#658b00">default=</span><span style="color:#cd5555">&#34;mysql&#34;</span><span style="color:#8b008b;font-weight:bold">&gt;</span>
        <span style="color:#228b22">&lt;!--配置mysql的环境 --&gt;</span>
        <span style="color:#8b008b;font-weight:bold">&lt;environment</span> <span style="color:#658b00">id=</span><span style="color:#cd5555">&#34;mysql&#34;</span><span style="color:#8b008b;font-weight:bold">&gt;</span>
            <span style="color:#228b22">&lt;!--配置事务的类型--&gt;</span>
            <span style="color:#8b008b;font-weight:bold">&lt;transactionManager</span> <span style="color:#658b00">type=</span><span style="color:#cd5555">&#34;JDBC&#34;</span><span style="color:#8b008b;font-weight:bold">/&gt;</span>
            <span style="color:#228b22">&lt;!--配置数据源--&gt;</span>
            <span style="color:#8b008b;font-weight:bold">&lt;dataSource</span> <span style="color:#658b00">type=</span><span style="color:#cd5555">&#34;POOLED&#34;</span><span style="color:#8b008b;font-weight:bold">&gt;</span>
                <span style="color:#228b22">&lt;!--配置连接数据库的驱动--&gt;</span>
                <span style="color:#8b008b;font-weight:bold">&lt;property</span> <span style="color:#658b00">name=</span><span style="color:#cd5555">&#34;driver&#34;</span> <span style="color:#658b00">value=</span><span style="color:#cd5555">&#34;com.mysql.cj.jdbc.Driver&#34;</span><span style="color:#8b008b;font-weight:bold">/&gt;</span>
                <span style="color:#228b22">&lt;!--配置连接数据库的URL--&gt;</span>
                <span style="color:#8b008b;font-weight:bold">&lt;property</span> <span style="color:#658b00">name=</span><span style="color:#cd5555">&#34;url&#34;</span> <span style="color:#658b00">value=</span><span style="color:#cd5555">&#34;jdbc:mysql://127.0.0.1:3306/mybatis?useSSL=false&#34;</span><span style="color:#8b008b;font-weight:bold">/&gt;</span>
                <span style="color:#228b22">&lt;!--配置连接数据库的用户名--&gt;</span>
                <span style="color:#8b008b;font-weight:bold">&lt;property</span> <span style="color:#658b00">name=</span><span style="color:#cd5555">&#34;username&#34;</span> <span style="color:#658b00">value=</span><span style="color:#cd5555">&#34;root&#34;</span><span style="color:#8b008b;font-weight:bold">/&gt;</span>
                <span style="color:#228b22">&lt;!--配置连接数据库的用户名密码--&gt;</span>
                <span style="color:#8b008b;font-weight:bold">&lt;property</span> <span style="color:#658b00">name=</span><span style="color:#cd5555">&#34;password&#34;</span> <span style="color:#658b00">value=</span><span style="color:#cd5555">&#34;13733433427&#34;</span><span style="color:#8b008b;font-weight:bold">/&gt;</span>
            <span style="color:#8b008b;font-weight:bold">&lt;/dataSource&gt;</span>
        <span style="color:#8b008b;font-weight:bold">&lt;/environment&gt;</span>
    <span style="color:#8b008b;font-weight:bold">&lt;/environments&gt;</span>
    <span style="color:#228b22">&lt;!--指定映射配置文件的位置，映射配置文件指的是每个dao独立的配置文件--&gt;</span>
    <span style="color:#8b008b;font-weight:bold">&lt;mappers&gt;</span>
        <span style="color:#8b008b;font-weight:bold">&lt;mapper</span> <span style="color:#658b00">resource=</span><span style="color:#cd5555">&#34;com/itheima/dao/IUserDao.xml&#34;</span><span style="color:#8b008b;font-weight:bold">/&gt;</span>
    <span style="color:#8b008b;font-weight:bold">&lt;/mappers&gt;</span>
<span style="color:#8b008b;font-weight:bold">&lt;/configuration&gt;</span>
</code></pre></div><p>MybatisTest.java:</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#8b008b;font-weight:bold">package</span> <span style="color:#008b45;text-decoration:underline">com.itheima.test</span>;<span style="color:#228b22">/*
</span><span style="color:#228b22"> @author wujiwen
</span><span style="color:#228b22"> @data 2019/8/29 - 22:48   
</span><span style="color:#228b22">*/</span>
<span style="color:#8b008b;font-weight:bold">import</span> <span style="color:#008b45;text-decoration:underline">java.io.InputStream</span>;
<span style="color:#8b008b;font-weight:bold">import</span> <span style="color:#008b45;text-decoration:underline">java.util.List</span>;
<span style="color:#8b008b;font-weight:bold">import</span> <span style="color:#008b45;text-decoration:underline">com.itheima.dao.IUserDao</span>;
<span style="color:#8b008b;font-weight:bold">import</span> <span style="color:#008b45;text-decoration:underline">com.itheima.domain.User</span>;
<span style="color:#8b008b;font-weight:bold">import</span> <span style="color:#008b45;text-decoration:underline">org.apache.ibatis.io.Resources</span>;
<span style="color:#8b008b;font-weight:bold">import</span> <span style="color:#008b45;text-decoration:underline">org.apache.ibatis.session.SqlSession</span>;
<span style="color:#8b008b;font-weight:bold">import</span> <span style="color:#008b45;text-decoration:underline">org.apache.ibatis.session.SqlSessionFactory</span>;
<span style="color:#8b008b;font-weight:bold">import</span> <span style="color:#008b45;text-decoration:underline">org.apache.ibatis.session.SqlSessionFactoryBuilder</span>;
<span style="color:#8b008b;font-weight:bold">import</span> <span style="color:#008b45;text-decoration:underline">org.junit.Test</span>;
<span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#8b008b;font-weight:bold">class</span> <span style="color:#008b45;font-weight:bold">MybatisTest</span> {
    <span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#8b008b;font-weight:bold">static</span> <span style="color:#00688b;font-weight:bold">void</span> <span style="color:#008b45">main</span>(String[] args) <span style="color:#8b008b;font-weight:bold">throws</span> Exception{
        <span style="color:#228b22">//读取配置文件
</span><span style="color:#228b22"></span>        InputStream inputStream = Resources.<span style="color:#658b00">getResourceAsStream</span>(<span style="color:#cd5555">&#34;SqlMapConfig.xml&#34;</span>);
        <span style="color:#228b22">//配置SqlSessionFactory工厂
</span><span style="color:#228b22"></span>        SqlSessionFactoryBuilder builder = <span style="color:#8b008b;font-weight:bold">new</span> SqlSessionFactoryBuilder();
        SqlSessionFactory factory = builder.<span style="color:#658b00">build</span>(inputStream);
        <span style="color:#228b22">//使用工厂生产SqlSession对象
</span><span style="color:#228b22"></span>        SqlSession sqlSession = factory.<span style="color:#658b00">openSession</span>();
        <span style="color:#228b22">//使用S起来Session创建Dao接口的代理对象
</span><span style="color:#228b22"></span>        IUserDao userDao = sqlSession.<span style="color:#658b00">getMapper</span>(IUserDao.<span style="color:#658b00">class</span>);
        <span style="color:#228b22">//使用代理对象执行方法
</span><span style="color:#228b22"></span>        List&lt;User&gt; users = userDao.<span style="color:#658b00">findAll</span>();
        <span style="color:#8b008b;font-weight:bold">for</span>(User user:users){
            System.<span style="color:#658b00">out</span>.<span style="color:#658b00">println</span>(user);
        }
        <span style="color:#228b22">//释放资源
</span><span style="color:#228b22"></span>        sqlSession.<span style="color:#658b00">close</span>();
        inputStream.<span style="color:#658b00">close</span>();
    }
}
</code></pre></div><p>pom.xml:</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml"><span style="color:#1e889b">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;</span>
<span style="color:#8b008b;font-weight:bold">&lt;project</span> <span style="color:#658b00">xmlns=</span><span style="color:#cd5555">&#34;http://maven.apache.org/POM/4.0.0&#34;</span>
         <span style="color:#658b00">xmlns:xsi=</span><span style="color:#cd5555">&#34;http://www.w3.org/2001/XMLSchema-instance&#34;</span>
         <span style="color:#658b00">xsi:schemaLocation=</span><span style="color:#cd5555">&#34;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&#34;</span><span style="color:#8b008b;font-weight:bold">&gt;</span>
    <span style="color:#8b008b;font-weight:bold">&lt;modelVersion&gt;</span>4.0.0<span style="color:#8b008b;font-weight:bold">&lt;/modelVersion&gt;</span>

    <span style="color:#8b008b;font-weight:bold">&lt;groupId&gt;</span>com.itheima<span style="color:#8b008b;font-weight:bold">&lt;/groupId&gt;</span>
    <span style="color:#8b008b;font-weight:bold">&lt;artifactId&gt;</span>day01_eesy_01mybatis<span style="color:#8b008b;font-weight:bold">&lt;/artifactId&gt;</span>
    <span style="color:#8b008b;font-weight:bold">&lt;version&gt;</span>1.0-SNAPSHOT<span style="color:#8b008b;font-weight:bold">&lt;/version&gt;</span>
    <span style="color:#8b008b;font-weight:bold">&lt;packaging&gt;</span>jar<span style="color:#8b008b;font-weight:bold">&lt;/packaging&gt;</span>
    <span style="color:#8b008b;font-weight:bold">&lt;dependencies&gt;</span>
        <span style="color:#228b22">&lt;!-- https://mvnrepository.com/artifact/org.mybatis/mybatis --&gt;</span>
        <span style="color:#8b008b;font-weight:bold">&lt;dependency&gt;</span>
            <span style="color:#8b008b;font-weight:bold">&lt;groupId&gt;</span>org.mybatis<span style="color:#8b008b;font-weight:bold">&lt;/groupId&gt;</span>
            <span style="color:#8b008b;font-weight:bold">&lt;artifactId&gt;</span>mybatis<span style="color:#8b008b;font-weight:bold">&lt;/artifactId&gt;</span>
            <span style="color:#8b008b;font-weight:bold">&lt;version&gt;</span>3.4.5<span style="color:#8b008b;font-weight:bold">&lt;/version&gt;</span>
        <span style="color:#8b008b;font-weight:bold">&lt;/dependency&gt;</span>
        <span style="color:#228b22">&lt;!-- https://mvnrepository.com/artifact/mysql/mysql-connector-java --&gt;</span>
        <span style="color:#8b008b;font-weight:bold">&lt;dependency&gt;</span>
            <span style="color:#8b008b;font-weight:bold">&lt;groupId&gt;</span>mysql<span style="color:#8b008b;font-weight:bold">&lt;/groupId&gt;</span>
            <span style="color:#8b008b;font-weight:bold">&lt;artifactId&gt;</span>mysql-connector-java<span style="color:#8b008b;font-weight:bold">&lt;/artifactId&gt;</span>
            <span style="color:#8b008b;font-weight:bold">&lt;version&gt;</span>8.0.11<span style="color:#8b008b;font-weight:bold">&lt;/version&gt;</span>
        <span style="color:#8b008b;font-weight:bold">&lt;/dependency&gt;</span>
        <span style="color:#228b22">&lt;!-- https://mvnrepository.com/artifact/log4j/log4j --&gt;</span>
        <span style="color:#8b008b;font-weight:bold">&lt;dependency&gt;</span>
            <span style="color:#8b008b;font-weight:bold">&lt;groupId&gt;</span>log4j<span style="color:#8b008b;font-weight:bold">&lt;/groupId&gt;</span>
            <span style="color:#8b008b;font-weight:bold">&lt;artifactId&gt;</span>log4j<span style="color:#8b008b;font-weight:bold">&lt;/artifactId&gt;</span>
            <span style="color:#8b008b;font-weight:bold">&lt;version&gt;</span>1.2.12<span style="color:#8b008b;font-weight:bold">&lt;/version&gt;</span>
        <span style="color:#8b008b;font-weight:bold">&lt;/dependency&gt;</span>
        <span style="color:#228b22">&lt;!-- https://mvnrepository.com/artifact/junit/junit --&gt;</span>
        <span style="color:#8b008b;font-weight:bold">&lt;dependency&gt;</span>
            <span style="color:#8b008b;font-weight:bold">&lt;groupId&gt;</span>junit<span style="color:#8b008b;font-weight:bold">&lt;/groupId&gt;</span>
            <span style="color:#8b008b;font-weight:bold">&lt;artifactId&gt;</span>junit<span style="color:#8b008b;font-weight:bold">&lt;/artifactId&gt;</span>
            <span style="color:#8b008b;font-weight:bold">&lt;version&gt;</span>4.10<span style="color:#8b008b;font-weight:bold">&lt;/version&gt;</span>
            <span style="color:#8b008b;font-weight:bold">&lt;scope&gt;</span>test<span style="color:#8b008b;font-weight:bold">&lt;/scope&gt;</span>
        <span style="color:#8b008b;font-weight:bold">&lt;/dependency&gt;</span>
    <span style="color:#8b008b;font-weight:bold">&lt;/dependencies&gt;</span>
<span style="color:#8b008b;font-weight:bold">&lt;/project&gt;</span>
</code></pre></div><h2 id="三遇到的错误以及解决的办法">三、遇到的错误以及解决的办法</h2>
<p>问题一：
WARN: Establishing SSL connection without server‘s identity verification is not recommended. According to MySQL 5.5.45+, 5.6.26+ and 5.7.6+ requirements SSL connection must be established by default if explicit option isn‘t set. For compliance with existing applications not using SSL the verifyServerCertificate property is set to ‘false‘. You need either to explicitly disable SSL by setting useSSL=false, or set useSSL=true and provide truststore for server certificate verification.
警告：不建议建立SSL连接而不需要服务器的身份验证。根据MySQL 5.5.45 +、5.626+和5.7.6+的要求，如果没有设置显式选项，默认情况下必须建立SSL连接。对于不使用SSL的现有应用程序，ValuyServer证书属性设置为“false”。您需要通过设置USESL= false来显式禁用SSL，或者设置USELS=真，并为服务器证书验证提供信任存储。</p>
<p>解决办法：
public static final String DBURL=&quot;jdbc:mysql://localhost:3306/yang?verifyServerCertificate=false&amp;useSSL=false&rdquo;;
在连接mysql的url上加上参数:   verifyServerCertificate=false&amp;useSSL=false</p>
<p>问题二：
mysql运行报The server time zone value &lsquo;ÖÐ¹ú±ê×¼Ê±¼ä&rsquo; is unrecognized or represents more than one time zone的的错误</p>
<p>解决办法： 
在数据库系统上运行：set global time_zone='+8:00&rsquo;;</p>

</article></div>
    <div class="pad"></div>

    

    <div class="pad">

<div class="date">
    <time pubdate="0001-01-01">January 1, 0001</time>
    <span class="author">学习笔记</span>
</div>

<article>
    <h1><a href="https://example.com/posts/rpc%E7%9A%84%E7%AE%80%E5%8D%95%E5%BA%94%E7%94%A8/">RPC的简单应用</a></h1>
    <div class="tags">
        
        
        <a href="/tags/rpc" class="pure-button">RPC</a>
        
    </div>
    <h2 id="一rpc简介">一、RPC简介</h2>
<p>RPC就是远程过程调用（Remote Procedure Call）
通俗的说就是在客户端电脑上面调用服务器端的类。
<img src="/assets/blogImg/rpc.jpg" alt="rpc"></p>
<h2 id="二rpc之hello-world">二、RPC之hello world</h2>
<p>目录结构如下：
<img src="/assets/blogImg/rpc2.jpg" alt="rpc2">
Client.java:</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#8b008b;font-weight:bold">package</span> <span style="color:#008b45;text-decoration:underline">remote.procedure.call.client</span>;

<span style="color:#8b008b;font-weight:bold">import</span> <span style="color:#008b45;text-decoration:underline">java.io.ObjectInputStream</span>;
<span style="color:#8b008b;font-weight:bold">import</span> <span style="color:#008b45;text-decoration:underline">java.io.ObjectOutputStream</span>;
<span style="color:#8b008b;font-weight:bold">import</span> <span style="color:#008b45;text-decoration:underline">java.lang.reflect.InvocationHandler</span>;
<span style="color:#8b008b;font-weight:bold">import</span> <span style="color:#008b45;text-decoration:underline">java.lang.reflect.Method</span>;
<span style="color:#8b008b;font-weight:bold">import</span> <span style="color:#008b45;text-decoration:underline">java.lang.reflect.Proxy</span>;
<span style="color:#8b008b;font-weight:bold">import</span> <span style="color:#008b45;text-decoration:underline">java.net.InetSocketAddress</span>;
<span style="color:#8b008b;font-weight:bold">import</span> <span style="color:#008b45;text-decoration:underline">java.net.Socket</span>;

<span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#8b008b;font-weight:bold">class</span> <span style="color:#008b45;font-weight:bold">Client</span> {
	<span style="color:#228b22">//获取代表服务器端接口的动态代理对象（HelloService）
</span><span style="color:#228b22"></span>	<span style="color:#228b22">//serverInterface:请求的接口
</span><span style="color:#228b22"></span>	<span style="color:#228b22">//addr:服务器的IP和端口号
</span><span style="color:#228b22"></span>	<span style="color:#228b22">//返回的是动态代理对象
</span><span style="color:#228b22"></span>	<span style="color:#707a7c">@SuppressWarnings</span>(<span style="color:#cd5555">&#34;unchecked&#34;</span>)
	<span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#8b008b;font-weight:bold">static</span> &lt;T&gt; T <span style="color:#008b45">getRemoteProxyObj</span>(Class serviceInterface,InetSocketAddress addr) {
		<span style="color:#228b22">//newProxyInstance三个参数的意义：
</span><span style="color:#228b22"></span>		<span style="color:#228b22">//loader:类加载器
</span><span style="color:#228b22"></span>		<span style="color:#228b22">//interfaces：需要代理的对象具备哪些功能------接口
</span><span style="color:#228b22"></span>		<span style="color:#8b008b;font-weight:bold">return</span> (T)Proxy.<span style="color:#658b00">newProxyInstance</span>(serviceInterface.<span style="color:#658b00">getClassLoader</span>(), <span style="color:#8b008b;font-weight:bold">new</span> Class&lt;?&gt;[] {serviceInterface}, <span style="color:#8b008b;font-weight:bold">new</span> InvocationHandler() {
			<span style="color:#228b22">//proxy需要代理的对象
</span><span style="color:#228b22"></span>			<span style="color:#228b22">//需要代理对象的那个方法
</span><span style="color:#228b22"></span>			<span style="color:#228b22">//args是代理方法需要传入的参数
</span><span style="color:#228b22"></span>			<span style="color:#8b008b;font-weight:bold">public</span> Object <span style="color:#008b45">invoke</span>(Object proxy,Method method,Object[] args) <span style="color:#8b008b;font-weight:bold">throws</span> Throwable{
				<span style="color:#228b22">//客户端向服务器端返送请求，请求某个具体的接口
</span><span style="color:#228b22"></span>				ObjectOutputStream output = <span style="color:#8b008b;font-weight:bold">null</span>;
				ObjectInputStream input = <span style="color:#8b008b;font-weight:bold">null</span>;
				Socket socket = <span style="color:#8b008b;font-weight:bold">new</span> Socket();
				<span style="color:#8b008b;font-weight:bold">try</span> {
					<span style="color:#228b22">//socketAddress包含了IP地址和端口号
</span><span style="color:#228b22"></span>					socket.<span style="color:#658b00">connect</span>(addr);
					System.<span style="color:#658b00">out</span>.<span style="color:#658b00">println</span>(<span style="color:#cd5555">&#34;连接成功&#34;</span>);
					output = <span style="color:#8b008b;font-weight:bold">new</span> ObjectOutputStream(socket.<span style="color:#658b00">getOutputStream</span>());<span style="color:#228b22">//发送：通过序列流
</span><span style="color:#228b22"></span>					<span style="color:#228b22">//接口名、方法名、
</span><span style="color:#228b22"></span>					output.<span style="color:#658b00">writeUTF</span>(serviceInterface.<span style="color:#658b00">getName</span>());
					output.<span style="color:#658b00">writeUTF</span>(method.<span style="color:#658b00">getName</span>());
					<span style="color:#228b22">//参数类型、方法参数
</span><span style="color:#228b22"></span>					output.<span style="color:#658b00">writeObject</span>(method.<span style="color:#658b00">getParameterTypes</span>());
					output.<span style="color:#658b00">writeObject</span>(args);
					<span style="color:#228b22">//等待服务器端处理
</span><span style="color:#228b22"></span>					<span style="color:#228b22">//接受服务器端处理后的返回值
</span><span style="color:#228b22"></span>					input = <span style="color:#8b008b;font-weight:bold">new</span> ObjectInputStream(socket.<span style="color:#658b00">getInputStream</span>());<span style="color:#228b22">//发送：通过序列流
</span><span style="color:#228b22"></span>					Object result = input.<span style="color:#658b00">readObject</span>();
					<span style="color:#8b008b;font-weight:bold">return</span> result;
				}<span style="color:#8b008b;font-weight:bold">catch</span>(Exception e) {
					e.<span style="color:#658b00">printStackTrace</span>();
					System.<span style="color:#658b00">out</span>.<span style="color:#658b00">println</span>(<span style="color:#cd5555">&#34;连接失败&#34;</span>);
					<span style="color:#8b008b;font-weight:bold">return</span> <span style="color:#8b008b;font-weight:bold">null</span>;
				}<span style="color:#8b008b;font-weight:bold">finally</span> {
					<span style="color:#8b008b;font-weight:bold">try</span> {
						<span style="color:#8b008b;font-weight:bold">if</span>(<span style="color:#8b008b;font-weight:bold">null</span> != input) input.<span style="color:#658b00">close</span>();
						<span style="color:#8b008b;font-weight:bold">if</span>(<span style="color:#8b008b;font-weight:bold">null</span> != output) output.<span style="color:#658b00">close</span>();
					}<span style="color:#8b008b;font-weight:bold">catch</span>(Exception e) {
						e.<span style="color:#658b00">printStackTrace</span>();
					}
				}
			} 
			
		});
	}
}
</code></pre></div><p>HelloService.java:</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#8b008b;font-weight:bold">package</span> <span style="color:#008b45;text-decoration:underline">remote.procedure.call.server</span>;

<span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#8b008b;font-weight:bold">interface</span> <span style="color:#008b45;font-weight:bold">HelloService</span> {
	<span style="color:#8b008b;font-weight:bold">public</span> String <span style="color:#008b45">sayHello</span>(String name);
}
</code></pre></div><p>HelloServiceImpl.java:</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">package remote.procedure.call.server;

public class HelloServiceImpl implements HelloService {

	public String sayHello(String name) {
		
		//System.out.println(<span style="color:#cd5555">&#34;hello,&#34;</span>+name);
		<span style="color:#8b008b;font-weight:bold">return</span> <span style="color:#cd5555">&#34;hello,&#34;</span>+name;
	}
}
</code></pre></div><p>Server.java:</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#8b008b;font-weight:bold">package</span> <span style="color:#008b45;text-decoration:underline">remote.procedure.call.server</span>;
<span style="color:#228b22">//服务中心
</span><span style="color:#228b22"></span><span style="color:#8b008b;font-weight:bold">import</span> <span style="color:#008b45;text-decoration:underline">java.io.IOException</span>;
<span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#8b008b;font-weight:bold">interface</span> <span style="color:#008b45;font-weight:bold">Server</span> {
	<span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#00688b;font-weight:bold">void</span> <span style="color:#008b45">start</span>();
	<span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#00688b;font-weight:bold">void</span> <span style="color:#008b45">stop</span>();
	<span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#00688b;font-weight:bold">void</span> <span style="color:#008b45">register</span>(Class serviceName,Class serviceImpl);
}
</code></pre></div><p>ServerCenter.java:</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#8b008b;font-weight:bold">package</span> <span style="color:#008b45;text-decoration:underline">remote.procedure.call.server</span>;

<span style="color:#8b008b;font-weight:bold">import</span> <span style="color:#008b45;text-decoration:underline">java.io.IOException</span>;
<span style="color:#8b008b;font-weight:bold">import</span> <span style="color:#008b45;text-decoration:underline">java.io.ObjectInputStream</span>;
<span style="color:#8b008b;font-weight:bold">import</span> <span style="color:#008b45;text-decoration:underline">java.io.ObjectOutputStream</span>;
<span style="color:#8b008b;font-weight:bold">import</span> <span style="color:#008b45;text-decoration:underline">java.lang.reflect.Method</span>;
<span style="color:#8b008b;font-weight:bold">import</span> <span style="color:#008b45;text-decoration:underline">java.net.InetSocketAddress</span>;
<span style="color:#8b008b;font-weight:bold">import</span> <span style="color:#008b45;text-decoration:underline">java.net.ServerSocket</span>;
<span style="color:#8b008b;font-weight:bold">import</span> <span style="color:#008b45;text-decoration:underline">java.net.Socket</span>;
<span style="color:#8b008b;font-weight:bold">import</span> <span style="color:#008b45;text-decoration:underline">java.util.HashMap</span>;
<span style="color:#8b008b;font-weight:bold">import</span> <span style="color:#008b45;text-decoration:underline">java.util.concurrent.ExecutorService</span>;
<span style="color:#8b008b;font-weight:bold">import</span> <span style="color:#008b45;text-decoration:underline">java.util.concurrent.Executors</span>;

<span style="color:#228b22">//服务中心的具体实现
</span><span style="color:#228b22"></span><span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#8b008b;font-weight:bold">class</span> <span style="color:#008b45;font-weight:bold">ServerCenter</span> <span style="color:#8b008b;font-weight:bold">implements</span> Server{
	<span style="color:#228b22">//map:服务器的所有的可供客户端访问的接口，都注册到该map中(其中键是接口名，值是具体的实现)
</span><span style="color:#228b22"></span>	<span style="color:#8b008b;font-weight:bold">private</span> <span style="color:#8b008b;font-weight:bold">static</span> HashMap&lt;String,Class&gt; serviceRegister = <span style="color:#8b008b;font-weight:bold">new</span> HashMap&lt;String,Class&gt;();
	<span style="color:#8b008b;font-weight:bold">private</span> <span style="color:#8b008b;font-weight:bold">static</span> <span style="color:#00688b;font-weight:bold">int</span> port;
	<span style="color:#228b22">//连接池：连接池中存在多个连接对象，每个连接对象都可以处理一个客户请求
</span><span style="color:#228b22"></span>	<span style="color:#8b008b;font-weight:bold">private</span> <span style="color:#8b008b;font-weight:bold">static</span> ExecutorService executor =Executors.<span style="color:#658b00">newFixedThreadPool</span>(Runtime.<span style="color:#658b00">getRuntime</span>().<span style="color:#658b00">availableProcessors</span>());
	
	<span style="color:#8b008b;font-weight:bold">private</span> <span style="color:#8b008b;font-weight:bold">static</span> <span style="color:#00688b;font-weight:bold">boolean</span> isRunning = <span style="color:#8b008b;font-weight:bold">false</span>; <span style="color:#228b22">//服务器的线程是否开启，默认是不开启的
</span><span style="color:#228b22"></span>	
	<span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#008b45">ServerCenter</span>(<span style="color:#00688b;font-weight:bold">int</span> port) {
		<span style="color:#8b008b;font-weight:bold">this</span>.<span style="color:#658b00">port</span> = port;
	}
	<span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#00688b;font-weight:bold">void</span> <span style="color:#008b45">start</span>(){
		ServerSocket server=<span style="color:#8b008b;font-weight:bold">null</span>;
		<span style="color:#228b22">//绑定端口号
</span><span style="color:#228b22"></span>		<span style="color:#8b008b;font-weight:bold">try</span> {
			server = <span style="color:#8b008b;font-weight:bold">new</span> ServerSocket();
			server.<span style="color:#658b00">bind</span>(<span style="color:#8b008b;font-weight:bold">new</span> InetSocketAddress(<span style="color:#8b008b;font-weight:bold">this</span>.<span style="color:#658b00">port</span>));
		} <span style="color:#8b008b;font-weight:bold">catch</span> (IOException e1) {
			<span style="color:#228b22">// TODO Auto-generated catch block
</span><span style="color:#228b22"></span>			e1.<span style="color:#658b00">printStackTrace</span>();
		}
		
		<span style="color:#8b008b;font-weight:bold">this</span>.<span style="color:#658b00">isRunning</span> = <span style="color:#8b008b;font-weight:bold">true</span>;
		<span style="color:#228b22">// TODO Auto-generated method stub
</span><span style="color:#228b22"></span>		<span style="color:#8b008b;font-weight:bold">while</span>(<span style="color:#8b008b;font-weight:bold">true</span>) {
				System.<span style="color:#658b00">out</span>.<span style="color:#658b00">println</span>(<span style="color:#cd5555">&#34;server start...&#34;</span>);
				Socket socket=<span style="color:#8b008b;font-weight:bold">null</span>;
				<span style="color:#228b22">//客户端没请求一次连接，则服务器端从连接池中获取一个线程对象去处理
</span><span style="color:#228b22"></span>				<span style="color:#8b008b;font-weight:bold">try</span> {
					socket = server.<span style="color:#658b00">accept</span>();<span style="color:#228b22">//等待客户端连接
</span><span style="color:#228b22"></span>				} <span style="color:#8b008b;font-weight:bold">catch</span> (IOException e) {
					<span style="color:#228b22">// TODO Auto-generated catch block
</span><span style="color:#228b22"></span>					e.<span style="color:#658b00">printStackTrace</span>();
				}
				executor.<span style="color:#658b00">execute</span>(<span style="color:#8b008b;font-weight:bold">new</span> ServiceTask(socket));
		}
		
	}
	<span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#00688b;font-weight:bold">void</span> <span style="color:#008b45">stop</span>() {
		<span style="color:#228b22">// TODO Auto-generated method stub
</span><span style="color:#228b22"></span>		<span style="color:#8b008b;font-weight:bold">this</span>.<span style="color:#658b00">isRunning</span> = <span style="color:#8b008b;font-weight:bold">false</span>;
		executor.<span style="color:#658b00">shutdown</span>();
	}
	<span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#00688b;font-weight:bold">void</span> <span style="color:#008b45">register</span>(Class serviceName,Class serviceImpl) {
		<span style="color:#228b22">// TODO Auto-generated method stub
</span><span style="color:#228b22"></span>		serviceRegister.<span style="color:#658b00">put</span>(serviceName.<span style="color:#658b00">getName</span>(), serviceImpl);
	}
	<span style="color:#8b008b;font-weight:bold">private</span> <span style="color:#8b008b;font-weight:bold">static</span> <span style="color:#8b008b;font-weight:bold">class</span> <span style="color:#008b45;font-weight:bold">ServiceTask</span> <span style="color:#8b008b;font-weight:bold">implements</span> Runnable{
		<span style="color:#8b008b;font-weight:bold">private</span> Socket socket;
		<span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#008b45">ServiceTask</span>() {
		}
		<span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#008b45">ServiceTask</span>(Socket socket) {
			<span style="color:#8b008b;font-weight:bold">this</span>.<span style="color:#658b00">socket</span> = socket;
		}
		<span style="color:#707a7c">@Override</span>
		<span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#00688b;font-weight:bold">void</span> <span style="color:#008b45">run</span>() {
			ObjectInputStream input=<span style="color:#8b008b;font-weight:bold">null</span>;
			ObjectOutputStream output=<span style="color:#8b008b;font-weight:bold">null</span>;
			<span style="color:#8b008b;font-weight:bold">try</span> {
			<span style="color:#228b22">// TODO Auto-generated method stub
</span><span style="color:#228b22"></span>			<span style="color:#228b22">//接收到客户端的连接请求，处理请求
</span><span style="color:#228b22"></span>			input = <span style="color:#8b008b;font-weight:bold">new</span> ObjectInputStream(socket.<span style="color:#658b00">getInputStream</span>());<span style="color:#228b22">//发送：通过序列流
</span><span style="color:#228b22"></span>			<span style="color:#228b22">//因为ObjectInputStream对发送数据的顺序要个要求，因此需要参照发送的顺序逐个接受
</span><span style="color:#228b22"></span>			String serviceName = input.<span style="color:#658b00">readUTF</span>();					<span style="color:#228b22">//接口名
</span><span style="color:#228b22"></span>			String methodName = input.<span style="color:#658b00">readUTF</span>();					<span style="color:#228b22">//方法名
</span><span style="color:#228b22"></span>			Class[] paramterTypes = (Class[])input.<span style="color:#658b00">readObject</span>();	<span style="color:#228b22">//参数类型
</span><span style="color:#228b22"></span>			Object[] arguments = (Object[])input.<span style="color:#658b00">readObject</span>();		<span style="color:#228b22">//参数值
</span><span style="color:#228b22"></span>			<span style="color:#228b22">//根据客户的请求，找到具体的接口
</span><span style="color:#228b22"></span>			Class ServiceClass = serviceRegister.<span style="color:#658b00">get</span>(serviceName);
			<span style="color:#228b22">//反射：方法名，参数列表
</span><span style="color:#228b22"></span>			Method method = ServiceClass.<span style="color:#658b00">getMethod</span>(methodName, paramterTypes);
			<span style="color:#228b22">//执行该方法
</span><span style="color:#228b22"></span>			Object result = method.<span style="color:#658b00">invoke</span>(ServiceClass.<span style="color:#658b00">newInstance</span>(),arguments);
			<span style="color:#228b22">//将处理的结构返回给客户端
</span><span style="color:#228b22"></span>			output = <span style="color:#8b008b;font-weight:bold">new</span> ObjectOutputStream(socket.<span style="color:#658b00">getOutputStream</span>());<span style="color:#228b22">//发送：通过序列流
</span><span style="color:#228b22"></span>			output.<span style="color:#658b00">writeObject</span>(result);
			}<span style="color:#8b008b;font-weight:bold">catch</span>(Exception e) {
				e.<span style="color:#658b00">printStackTrace</span>();
			}<span style="color:#8b008b;font-weight:bold">finally</span> {
				<span style="color:#8b008b;font-weight:bold">try</span> {
					<span style="color:#8b008b;font-weight:bold">if</span>(<span style="color:#8b008b;font-weight:bold">null</span> != input) input.<span style="color:#658b00">close</span>();
					<span style="color:#8b008b;font-weight:bold">if</span>(<span style="color:#8b008b;font-weight:bold">null</span> != output) output.<span style="color:#658b00">close</span>();
				}<span style="color:#8b008b;font-weight:bold">catch</span>(Exception e) {
					e.<span style="color:#658b00">printStackTrace</span>();
				}
			}
		}
	}
}
</code></pre></div><p>RPCClientTest.java:</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#8b008b;font-weight:bold">package</span> <span style="color:#008b45;text-decoration:underline">remote.procedure.call.test</span>;

<span style="color:#8b008b;font-weight:bold">import</span> <span style="color:#008b45;text-decoration:underline">java.net.InetSocketAddress</span>;
<span style="color:#8b008b;font-weight:bold">import</span> <span style="color:#008b45;text-decoration:underline">remote.procedure.call.client.Client</span>;
<span style="color:#8b008b;font-weight:bold">import</span> <span style="color:#008b45;text-decoration:underline">remote.procedure.call.server.HelloService</span>;

<span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#8b008b;font-weight:bold">class</span> <span style="color:#008b45;font-weight:bold">RPCClientTest</span> {
	<span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#8b008b;font-weight:bold">static</span> <span style="color:#00688b;font-weight:bold">void</span> <span style="color:#008b45">main</span>(String[] args) <span style="color:#8b008b;font-weight:bold">throws</span> ClassNotFoundException {
		<span style="color:#228b22">// TODO Auto-generated method stub
</span><span style="color:#228b22"></span>		HelloService server = Client.<span style="color:#658b00">getRemoteProxyObj</span>(Class.<span style="color:#658b00">forName</span>(<span style="color:#cd5555">&#34;remote.procedure.call.server.HelloService&#34;</span>), <span style="color:#8b008b;font-weight:bold">new</span> InetSocketAddress(<span style="color:#cd5555">&#34;127.0.0.1&#34;</span>, 9999));
		String str = server.<span style="color:#658b00">sayHello</span>(<span style="color:#cd5555">&#34;张三&#34;</span>);
		System.<span style="color:#658b00">out</span>.<span style="color:#658b00">println</span>(str);
	}
}
</code></pre></div><p>RPCServerTest.java:</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#8b008b;font-weight:bold">package</span> <span style="color:#008b45;text-decoration:underline">remote.procedure.call.test</span>;

<span style="color:#8b008b;font-weight:bold">import</span> <span style="color:#008b45;text-decoration:underline">remote.procedure.call.server.HelloService</span>;
<span style="color:#8b008b;font-weight:bold">import</span> <span style="color:#008b45;text-decoration:underline">remote.procedure.call.server.HelloServiceImpl</span>;
<span style="color:#8b008b;font-weight:bold">import</span> <span style="color:#008b45;text-decoration:underline">remote.procedure.call.server.Server</span>;
<span style="color:#8b008b;font-weight:bold">import</span> <span style="color:#008b45;text-decoration:underline">remote.procedure.call.server.ServerCenter</span>;

<span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#8b008b;font-weight:bold">class</span> <span style="color:#008b45;font-weight:bold">RPCServerTest</span> {
	<span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#8b008b;font-weight:bold">static</span> <span style="color:#00688b;font-weight:bold">void</span> <span style="color:#008b45">main</span>(String[] args) {
		<span style="color:#228b22">//服务中心
</span><span style="color:#228b22"></span>		Server server = <span style="color:#8b008b;font-weight:bold">new</span> ServerCenter(9999);
		<span style="color:#228b22">//注册HelloService服务
</span><span style="color:#228b22"></span>		server.<span style="color:#658b00">register</span>(HelloService.<span style="color:#658b00">class</span>, HelloServiceImpl.<span style="color:#658b00">class</span>);
		server.<span style="color:#658b00">start</span>();
	}
}
</code></pre></div>
</article></div>
    <div class="pad"></div>

    

    <div class="pad">

<div class="date">
    <time pubdate="0001-01-01">January 1, 0001</time>
    <span class="author">学习笔记</span>
</div>

<article>
    <h1><a href="https://example.com/posts/springboot/">SpringBoot</a></h1>
    <div class="tags">
        
        
        <a href="/tags/%E6%A1%86%E6%9E%B6" class="pure-button">框架</a>
        
    </div>
    <h2 id="spring-boot的相关简介">Spring Boot的相关简介</h2>
<p>简化Spring应用开发，约定大于配置，去繁从简，just run就能创建一个独立的，产品级别的开发项目。</p>
<h2 id="heading"></h2>
<p>1.快速创建独立运行的Spring项目以及主流框架的集成
2.使用嵌入式的servlet容器，应用无需打包成war包
3.starts自动依赖与版本控制
4.大量的自动配置，简化开发，也可修改默认值
5.无需配置XML，无代码生成，开箱即用
6.准生产环境的运行时应用监控
7.与云计算的天然集成</p>
<h1 id="一"><strong>一、</strong></h1>
<h2 id="1spring-boot-简介">1、Spring Boot 简介</h2>
<blockquote>
<p>简化Spring应用开发，约定大于配置，去繁从简，just run就能创建一个独立的，产品级别的开发项目。
简化Spring应用开发的一个框架；
整个Spring技术栈的一个大整合；
J2EE开发的一站式解决方案；
优点：
1.快速创建独立运行的Spring项目以及主流框架的集成
2.使用嵌入式的servlet容器，应用无需打包成war包
3.starts自动依赖与版本控制
4.大量的自动配置，简化开发，也可修改默认值
5.无需配置XML，无代码生成，开箱即用
6.准生产环境的运行时应用监控
7.与云计算的天然集成</p>
</blockquote>
<h2 id="2微服务">2、微服务</h2>
<p>2014，martin fowler
微服务：架构风格（服务微化）
一个应用应该是一组小型服务；可以通过HTTP的方式进行互通；
单体应用：ALL IN ONE
微服务：每一个功能元素最终都是一个可独立替换和独立升级的软件单元；
<a href="https://martinfowler.com/articles/microservices.html#MicroservicesAndSoa">详细参照微服务文档</a></p>
<h2 id="3环境准备">3、环境准备</h2>
<p><a href="http://www.gulixueyuan.com/">http://www.gulixueyuan.com/</a> 谷粒学院</p>
<p>环境约束</p>
<p>–jdk1.8：Spring Boot 推荐jdk1.7及以上；java version &ldquo;1.8.0_112&rdquo;</p>
<p>–maven3.x：maven 3.3以上版本；Apache Maven 3.3.9</p>
<p>–IntelliJIDEA2017：IntelliJ IDEA 2017.2.2 x64、STS</p>
<p>–SpringBoot 1.5.9.RELEASE：1.5.9；</p>
<p>统一环境；</p>
<h3 id="1maven设置">1、MAVEN设置；</h3>
<p>给maven 的settings.xml配置文件的profiles标签添加</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml"><span style="color:#8b008b;font-weight:bold">&lt;profile&gt;</span>
  <span style="color:#8b008b;font-weight:bold">&lt;id&gt;</span>jdk-1.8<span style="color:#8b008b;font-weight:bold">&lt;/id&gt;</span>
  <span style="color:#8b008b;font-weight:bold">&lt;activation&gt;</span>
    <span style="color:#8b008b;font-weight:bold">&lt;activeByDefault&gt;</span>true<span style="color:#8b008b;font-weight:bold">&lt;/activeByDefault&gt;</span>
    <span style="color:#8b008b;font-weight:bold">&lt;jdk&gt;</span>1.8<span style="color:#8b008b;font-weight:bold">&lt;/jdk&gt;</span>
  <span style="color:#8b008b;font-weight:bold">&lt;/activation&gt;</span>
  <span style="color:#8b008b;font-weight:bold">&lt;properties&gt;</span>
    <span style="color:#8b008b;font-weight:bold">&lt;maven.compiler.source&gt;</span>1.8<span style="color:#8b008b;font-weight:bold">&lt;/maven.compiler.source&gt;</span>
    <span style="color:#8b008b;font-weight:bold">&lt;maven.compiler.target&gt;</span>1.8<span style="color:#8b008b;font-weight:bold">&lt;/maven.compiler.target&gt;</span>
    <span style="color:#8b008b;font-weight:bold">&lt;maven.compiler.compilerVersion&gt;</span>1.8<span style="color:#8b008b;font-weight:bold">&lt;/maven.compiler.compilerVersion&gt;</span>
  <span style="color:#8b008b;font-weight:bold">&lt;/properties&gt;</span>
<span style="color:#8b008b;font-weight:bold">&lt;/profile&gt;</span>
</code></pre></div><h3 id="2idea设置">2、IDEA设置</h3>
<p>整合maven进来；</p>
<p><img src="images/%E6%90%9C%E7%8B%97%E6%88%AA%E5%9B%BE20180129151045.png" alt="idea设置"></p>
<p><img src="images/%E6%90%9C%E7%8B%97%E6%88%AA%E5%9B%BE20180129151112.png" alt="images/"></p>
<h2 id="4spring-boot-helloworld">4、Spring Boot HelloWorld</h2>
<p>一个功能：</p>
<p>浏览器发送hello请求，服务器接受请求并处理，响应Hello World字符串；</p>
<h3 id="1创建一个maven工程jar">1、创建一个maven工程；（jar）</h3>
<h3 id="2导入spring-boot相关的依赖">2、导入spring boot相关的依赖</h3>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml">    <span style="color:#8b008b;font-weight:bold">&lt;parent&gt;</span>
        <span style="color:#8b008b;font-weight:bold">&lt;groupId&gt;</span>org.springframework.boot<span style="color:#8b008b;font-weight:bold">&lt;/groupId&gt;</span>
        <span style="color:#8b008b;font-weight:bold">&lt;artifactId&gt;</span>spring-boot-starter-parent<span style="color:#8b008b;font-weight:bold">&lt;/artifactId&gt;</span>
        <span style="color:#8b008b;font-weight:bold">&lt;version&gt;</span>1.5.9.RELEASE<span style="color:#8b008b;font-weight:bold">&lt;/version&gt;</span>
    <span style="color:#8b008b;font-weight:bold">&lt;/parent&gt;</span>
    <span style="color:#8b008b;font-weight:bold">&lt;dependencies&gt;</span>
        <span style="color:#8b008b;font-weight:bold">&lt;dependency&gt;</span>
            <span style="color:#8b008b;font-weight:bold">&lt;groupId&gt;</span>org.springframework.boot<span style="color:#8b008b;font-weight:bold">&lt;/groupId&gt;</span>
            <span style="color:#8b008b;font-weight:bold">&lt;artifactId&gt;</span>spring-boot-starter-web<span style="color:#8b008b;font-weight:bold">&lt;/artifactId&gt;</span>
        <span style="color:#8b008b;font-weight:bold">&lt;/dependency&gt;</span>
    <span style="color:#8b008b;font-weight:bold">&lt;/dependencies&gt;</span>
</code></pre></div><h3 id="3编写一个主程序启动spring-boot应用">3、编写一个主程序；启动Spring Boot应用</h3>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java">
<span style="color:#228b22">/**
</span><span style="color:#228b22"> *  @SpringBootApplication 来标注一个主程序类，说明这是一个Spring Boot应用
</span><span style="color:#228b22"> */</span>
<span style="color:#707a7c">@SpringBootApplication</span>
<span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#8b008b;font-weight:bold">class</span> <span style="color:#008b45;font-weight:bold">HelloWorldMainApplication</span> {

    <span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#8b008b;font-weight:bold">static</span> <span style="color:#00688b;font-weight:bold">void</span> <span style="color:#008b45">main</span>(String[] args) {

        <span style="color:#228b22">// Spring应用启动起来
</span><span style="color:#228b22"></span>        SpringApplication.<span style="color:#658b00">run</span>(HelloWorldMainApplication.<span style="color:#658b00">class</span>,args);
    }
}
</code></pre></div><h3 id="4编写相关的controllerservice">4、编写相关的Controller、Service</h3>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#707a7c">@Controller</span>
<span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#8b008b;font-weight:bold">class</span> <span style="color:#008b45;font-weight:bold">HelloController</span> {

    <span style="color:#707a7c">@ResponseBody</span>
    <span style="color:#707a7c">@RequestMapping</span>(<span style="color:#cd5555">&#34;/hello&#34;</span>)
    <span style="color:#8b008b;font-weight:bold">public</span> String <span style="color:#008b45">hello</span>(){
        <span style="color:#8b008b;font-weight:bold">return</span> <span style="color:#cd5555">&#34;Hello World!&#34;</span>;
    }
}

</code></pre></div><h3 id="5运行主程序测试">5、运行主程序测试</h3>
<h3 id="6简化部署">6、简化部署</h3>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml"> <span style="color:#228b22">&lt;!-- 这个插件，可以将应用打包成一个可执行的jar包；--&gt;</span>
    <span style="color:#8b008b;font-weight:bold">&lt;build&gt;</span>
        <span style="color:#8b008b;font-weight:bold">&lt;plugins&gt;</span>
            <span style="color:#8b008b;font-weight:bold">&lt;plugin&gt;</span>
                <span style="color:#8b008b;font-weight:bold">&lt;groupId&gt;</span>org.springframework.boot<span style="color:#8b008b;font-weight:bold">&lt;/groupId&gt;</span>
                <span style="color:#8b008b;font-weight:bold">&lt;artifactId&gt;</span>spring-boot-maven-plugin<span style="color:#8b008b;font-weight:bold">&lt;/artifactId&gt;</span>
            <span style="color:#8b008b;font-weight:bold">&lt;/plugin&gt;</span>
        <span style="color:#8b008b;font-weight:bold">&lt;/plugins&gt;</span>
    <span style="color:#8b008b;font-weight:bold">&lt;/build&gt;</span>
</code></pre></div><p>将这个应用打成jar包，直接使用java -jar的命令进行执行；</p>
<h2 id="5hello-world探究">5、Hello World探究</h2>
<h3 id="1pom文件">1、POM文件</h3>
<h4 id="1父项目">1、父项目</h4>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml"><span style="color:#8b008b;font-weight:bold">&lt;parent&gt;</span>
    <span style="color:#8b008b;font-weight:bold">&lt;groupId&gt;</span>org.springframework.boot<span style="color:#8b008b;font-weight:bold">&lt;/groupId&gt;</span>
    <span style="color:#8b008b;font-weight:bold">&lt;artifactId&gt;</span>spring-boot-starter-parent<span style="color:#8b008b;font-weight:bold">&lt;/artifactId&gt;</span>
    <span style="color:#8b008b;font-weight:bold">&lt;version&gt;</span>1.5.9.RELEASE<span style="color:#8b008b;font-weight:bold">&lt;/version&gt;</span>
<span style="color:#8b008b;font-weight:bold">&lt;/parent&gt;</span>

他的父项目是
<span style="color:#8b008b;font-weight:bold">&lt;parent&gt;</span>
  <span style="color:#8b008b;font-weight:bold">&lt;groupId&gt;</span>org.springframework.boot<span style="color:#8b008b;font-weight:bold">&lt;/groupId&gt;</span>
  <span style="color:#8b008b;font-weight:bold">&lt;artifactId&gt;</span>spring-boot-dependencies<span style="color:#8b008b;font-weight:bold">&lt;/artifactId&gt;</span>
  <span style="color:#8b008b;font-weight:bold">&lt;version&gt;</span>1.5.9.RELEASE<span style="color:#8b008b;font-weight:bold">&lt;/version&gt;</span>
  <span style="color:#8b008b;font-weight:bold">&lt;relativePath&gt;</span>../../spring-boot-dependencies<span style="color:#8b008b;font-weight:bold">&lt;/relativePath&gt;</span>
<span style="color:#8b008b;font-weight:bold">&lt;/parent&gt;</span>
他来真正管理Spring Boot应用里面的所有依赖版本；

</code></pre></div><p>Spring Boot的版本仲裁中心；</p>
<p>以后我们导入依赖默认是不需要写版本；（没有在dependencies里面管理的依赖自然需要声明版本号）</p>
<h4 id="2启动器">2、启动器</h4>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml"><span style="color:#8b008b;font-weight:bold">&lt;dependency&gt;</span>
    <span style="color:#8b008b;font-weight:bold">&lt;groupId&gt;</span>org.springframework.boot<span style="color:#8b008b;font-weight:bold">&lt;/groupId&gt;</span>
    <span style="color:#8b008b;font-weight:bold">&lt;artifactId&gt;</span>spring-boot-starter-web<span style="color:#8b008b;font-weight:bold">&lt;/artifactId&gt;</span>
<span style="color:#8b008b;font-weight:bold">&lt;/dependency&gt;</span>
</code></pre></div><p><strong>spring-boot-starter</strong>-==web==：</p>
<p>​	spring-boot-starter：spring-boot场景启动器；帮我们导入了web模块正常运行所依赖的组件；</p>
<p>Spring Boot将所有的功能场景都抽取出来，做成一个个的starters（启动器），只需要在项目里面引入这些starter相关场景的所有依赖都会导入进来。要用什么功能就导入什么场景的启动器</p>
<h3 id="2主程序类主入口类">2、主程序类，主入口类</h3>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#228b22">/**
</span><span style="color:#228b22"> *  @SpringBootApplication 来标注一个主程序类，说明这是一个Spring Boot应用
</span><span style="color:#228b22"> */</span>
<span style="color:#707a7c">@SpringBootApplication</span>
<span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#8b008b;font-weight:bold">class</span> <span style="color:#008b45;font-weight:bold">HelloWorldMainApplication</span> {

    <span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#8b008b;font-weight:bold">static</span> <span style="color:#00688b;font-weight:bold">void</span> <span style="color:#008b45">main</span>(String[] args) {

        <span style="color:#228b22">// Spring应用启动起来
</span><span style="color:#228b22"></span>        SpringApplication.<span style="color:#658b00">run</span>(HelloWorldMainApplication.<span style="color:#658b00">class</span>,args);
    }
}

</code></pre></div><p>@<strong>SpringBootApplication</strong>:    Spring Boot应用标注在某个类上说明这个类是SpringBoot的主配置类，SpringBoot就应该运行这个类的main方法来启动SpringBoot应用；</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#707a7c">@Target</span>(ElementType.<span style="color:#658b00">TYPE</span>)
<span style="color:#707a7c">@Retention</span>(RetentionPolicy.<span style="color:#658b00">RUNTIME</span>)
<span style="color:#707a7c">@Documented</span>
<span style="color:#707a7c">@Inherited</span>
<span style="color:#707a7c">@SpringBootConfiguration</span>
<span style="color:#707a7c">@EnableAutoConfiguration</span>
<span style="color:#707a7c">@ComponentScan</span>(excludeFilters = {
      <span style="color:#707a7c">@Filter</span>(type = FilterType.<span style="color:#658b00">CUSTOM</span>, classes = TypeExcludeFilter.<span style="color:#658b00">class</span>),
      <span style="color:#707a7c">@Filter</span>(type = FilterType.<span style="color:#658b00">CUSTOM</span>, classes = AutoConfigurationExcludeFilter.<span style="color:#658b00">class</span>) })
<span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#707a7c">@interface</span> SpringBootApplication {
</code></pre></div><p>@<strong>SpringBootConfiguration</strong>:Spring Boot的配置类；</p>
<p>​		标注在某个类上，表示这是一个Spring Boot的配置类；</p>
<p>​		@<strong>Configuration</strong>:配置类上来标注这个注解；</p>
<p>​			配置类 &mdash;&ndash;  配置文件；配置类也是容器中的一个组件；@Component</p>
<p>@<strong>EnableAutoConfiguration</strong>：开启自动配置功能；</p>
<p>​		以前我们需要配置的东西，Spring Boot帮我们自动配置；@<strong>EnableAutoConfiguration</strong>告诉SpringBoot开启自动配置功能；这样自动配置才能生效；</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#707a7c">@AutoConfigurationPackage</span>
<span style="color:#707a7c">@Import</span>(EnableAutoConfigurationImportSelector.<span style="color:#658b00">class</span>)
<span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#707a7c">@interface</span> EnableAutoConfiguration {
</code></pre></div><p>​      	@<strong>AutoConfigurationPackage</strong>：自动配置包</p>
<p>​		@<strong>Import</strong>(AutoConfigurationPackages.Registrar.class)：</p>
<p>​		Spring的底层注解@Import，给容器中导入一个组件；导入的组件由AutoConfigurationPackages.Registrar.class；</p>
<p>==将主配置类（@SpringBootApplication标注的类）的所在包及下面所有子包里面的所有组件扫描到Spring容器；==</p>
<p>​	@<strong>Import</strong>(EnableAutoConfigurationImportSelector.class)；</p>
<p>​		给容器中导入组件？</p>
<p>​		<strong>EnableAutoConfigurationImportSelector</strong>：导入哪些组件的选择器；</p>
<p>​		将所有需要导入的组件以全类名的方式返回；这些组件就会被添加到容器中；</p>
<p>​		会给容器中导入非常多的自动配置类（xxxAutoConfiguration）；就是给容器中导入这个场景需要的所有组件，并配置好这些组件；		<img src="images/%E6%90%9C%E7%8B%97%E6%88%AA%E5%9B%BE20180129224104.png" alt="自动配置类"></p>
<p>有了自动配置类，免去了我们手动编写配置注入功能组件等的工作；</p>
<p>​		SpringFactoriesLoader.loadFactoryNames(EnableAutoConfiguration.class,classLoader)；</p>
<p>==Spring Boot在启动的时候从类路径下的META-INF/spring.factories中获取EnableAutoConfiguration指定的值，将这些值作为自动配置类导入到容器中，自动配置类就生效，帮我们进行自动配置工作；==以前我们需要自己配置的东西，自动配置类都帮我们；</p>
<p>J2EE的整体整合解决方案和自动配置都在spring-boot-autoconfigure-1.5.9.RELEASE.jar；</p>
<p>​</p>
<p>==Spring注解版（谷粒学院）==</p>
<h2 id="6使用spring-initializer快速创建spring-boot项目">6、使用Spring Initializer快速创建Spring Boot项目</h2>
<h3 id="1idea使用-spring-initializer快速创建项目">1、IDEA：使用 Spring Initializer快速创建项目</h3>
<p>IDE都支持使用Spring的项目创建向导快速创建一个Spring Boot项目；</p>
<p>选择我们需要的模块；向导会联网创建Spring Boot项目；</p>
<p>默认生成的Spring Boot项目；</p>
<ul>
<li>主程序已经生成好了，我们只需要我们自己的逻辑</li>
<li>resources文件夹中目录结构
<ul>
<li>static：保存所有的静态资源； js css  images；</li>
<li>templates：保存所有的模板页面；（Spring Boot默认jar包使用嵌入式的Tomcat，默认不支持JSP页面）；可以使用模板引擎（freemarker、thymeleaf）；</li>
<li>application.properties：Spring Boot应用的配置文件；可以修改一些默认设置；</li>
</ul>
</li>
</ul>
<h3 id="2sts使用-spring-starter-project快速创建项目">2、STS使用 Spring Starter Project快速创建项目</h3>
<hr>
<h1 id="二配置文件">二、配置文件</h1>
<h2 id="1配置文件">1、配置文件</h2>
<p>SpringBoot使用一个全局的配置文件，配置文件名是固定的；</p>
<p>•application.properties</p>
<p>•application.yml</p>
<p>配置文件的作用：修改SpringBoot自动配置的默认值；SpringBoot在底层都给我们自动配置好；</p>
<p>YAML（YAML Ain&rsquo;t Markup Language）</p>
<p>​	YAML  A Markup Language：是一个标记语言</p>
<p>​	YAML   isn&rsquo;t Markup Language：不是一个标记语言；</p>
<p>标记语言：</p>
<p>​	以前的配置文件；大多都使用的是  <strong>xxxx.xml</strong>文件；</p>
<p>​	YAML：<strong>以数据为中心</strong>，比json、xml等更适合做配置文件；</p>
<p>​	YAML：配置例子</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#8b008b;font-weight:bold">server</span>:<span style="color:#bbb">
</span><span style="color:#bbb">  </span><span style="color:#8b008b;font-weight:bold">port</span>:<span style="color:#bbb"> </span><span style="color:#b452cd">8081</span><span style="color:#bbb">
</span></code></pre></div><p>​	XML：</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml"><span style="color:#8b008b;font-weight:bold">&lt;server&gt;</span>
	<span style="color:#8b008b;font-weight:bold">&lt;port&gt;</span>8081<span style="color:#8b008b;font-weight:bold">&lt;/port&gt;</span>
<span style="color:#8b008b;font-weight:bold">&lt;/server&gt;</span>
</code></pre></div><h2 id="2yaml语法">2、YAML语法：</h2>
<h3 id="1基本语法">1、基本语法</h3>
<p>k:(空格)v：表示一对键值对（空格必须有）；</p>
<p>以<strong>空格</strong>的缩进来控制层级关系；只要是左对齐的一列数据，都是同一个层级的</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#8b008b;font-weight:bold">server</span>:<span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#8b008b;font-weight:bold">port</span>:<span style="color:#bbb"> </span><span style="color:#b452cd">8081</span><span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#8b008b;font-weight:bold">path</span>:<span style="color:#bbb"> </span>/hello<span style="color:#bbb">
</span></code></pre></div><p>属性和值也是大小写敏感；</p>
<h3 id="2值的写法">2、值的写法</h3>
<h4 id="字面量普通的值数字字符串布尔">字面量：普通的值（数字，字符串，布尔）</h4>
<p>​	k: v：字面直接来写；</p>
<p>​		字符串默认不用加上单引号或者双引号；</p>
<p>​		&ldquo;&quot;：双引号；不会转义字符串里面的特殊字符；特殊字符会作为本身想表示的意思</p>
<p>​				name:   &ldquo;zhangsan \n lisi&rdquo;：输出；zhangsan 换行  lisi</p>
<p>​		&lsquo;'：单引号；会转义特殊字符，特殊字符最终只是一个普通的字符串数据</p>
<p>​				name:   ‘zhangsan \n lisi’：输出；zhangsan \n  lisi</p>
<h4 id="对象map属性和值键值对">对象、Map（属性和值）（键值对）：</h4>
<p>​	k: v：在下一行来写对象的属性和值的关系；注意缩进</p>
<p>​		对象还是k: v的方式</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#8b008b;font-weight:bold">friends</span>:<span style="color:#bbb">
</span><span style="color:#bbb">		</span><span style="color:#8b008b;font-weight:bold">lastName</span>:<span style="color:#bbb"> </span>zhangsan<span style="color:#bbb">
</span><span style="color:#bbb">		</span><span style="color:#8b008b;font-weight:bold">age</span>:<span style="color:#bbb"> </span><span style="color:#b452cd">20</span><span style="color:#bbb">
</span></code></pre></div><p>行内写法：</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#8b008b;font-weight:bold">friends</span>:<span style="color:#bbb"> </span>{<span style="color:#8b008b;font-weight:bold">lastName: zhangsan,age</span>:<span style="color:#bbb"> </span><span style="color:#b452cd">18</span>}<span style="color:#bbb">
</span></code></pre></div><h4 id="数组listset">数组（List、Set）：</h4>
<p>用- 值表示数组中的一个元素</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#8b008b;font-weight:bold">pets</span>:<span style="color:#bbb">
</span><span style="color:#bbb"> </span>- cat<span style="color:#bbb">
</span><span style="color:#bbb"> </span>- dog<span style="color:#bbb">
</span><span style="color:#bbb"> </span>- pig<span style="color:#bbb">
</span></code></pre></div><p>行内写法</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#8b008b;font-weight:bold">pets</span>:<span style="color:#bbb"> </span>[cat,dog,pig]<span style="color:#bbb">
</span></code></pre></div><h2 id="3配置文件值注入">3、配置文件值注入</h2>
<p>配置文件</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#8b008b;font-weight:bold">person</span>:<span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#8b008b;font-weight:bold">lastName</span>:<span style="color:#bbb"> </span>hello<span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#8b008b;font-weight:bold">age</span>:<span style="color:#bbb"> </span><span style="color:#b452cd">18</span><span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#8b008b;font-weight:bold">boss</span>:<span style="color:#bbb"> </span><span style="color:#8b008b;font-weight:bold">false</span><span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#8b008b;font-weight:bold">birth</span>:<span style="color:#bbb"> </span><span style="color:#b452cd">2017</span>/<span style="color:#b452cd">12</span>/<span style="color:#b452cd">12</span><span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#8b008b;font-weight:bold">maps</span>:<span style="color:#bbb"> </span>{<span style="color:#8b008b;font-weight:bold">k1: v1,k2</span>:<span style="color:#bbb"> </span><span style="color:#b452cd">12</span>}<span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#8b008b;font-weight:bold">lists</span>:<span style="color:#bbb">
</span><span style="color:#bbb">      </span>- lisi<span style="color:#bbb">
</span><span style="color:#bbb">      </span>- zhaoliu<span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#8b008b;font-weight:bold">dog</span>:<span style="color:#bbb">
</span><span style="color:#bbb">      </span><span style="color:#8b008b;font-weight:bold">name</span>:<span style="color:#bbb"> </span>小狗<span style="color:#bbb">
</span><span style="color:#bbb">      </span><span style="color:#8b008b;font-weight:bold">age</span>:<span style="color:#bbb"> </span><span style="color:#b452cd">12</span><span style="color:#bbb">
</span></code></pre></div><p>javaBean：</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#228b22">/**
</span><span style="color:#228b22"> * 将配置文件中配置的每一个属性的值，映射到这个组件中
</span><span style="color:#228b22"> * @ConfigurationProperties：告诉SpringBoot将本类中的所有属性和配置文件中相关的配置进行绑定；
</span><span style="color:#228b22"> *      prefix = &#34;person&#34;：配置文件中哪个下面的所有属性进行一一映射
</span><span style="color:#228b22"> *
</span><span style="color:#228b22"> * 只有这个组件是容器中的组件，才能容器提供的@ConfigurationProperties功能；
</span><span style="color:#228b22"> *
</span><span style="color:#228b22"> */</span>
<span style="color:#707a7c">@Component</span>
<span style="color:#707a7c">@ConfigurationProperties</span>(prefix = <span style="color:#cd5555">&#34;person&#34;</span>)
<span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#8b008b;font-weight:bold">class</span> <span style="color:#008b45;font-weight:bold">Person</span> {

    <span style="color:#8b008b;font-weight:bold">private</span> String lastName;
    <span style="color:#8b008b;font-weight:bold">private</span> Integer age;
    <span style="color:#8b008b;font-weight:bold">private</span> Boolean boss;
    <span style="color:#8b008b;font-weight:bold">private</span> Date birth;

    <span style="color:#8b008b;font-weight:bold">private</span> Map&lt;String,Object&gt; maps;
    <span style="color:#8b008b;font-weight:bold">private</span> List&lt;Object&gt; lists;
    <span style="color:#8b008b;font-weight:bold">private</span> Dog dog;

</code></pre></div><p>我们可以导入配置文件处理器，以后编写配置就有提示了</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml"><span style="color:#228b22">&lt;!--导入配置文件处理器，配置文件进行绑定就会有提示--&gt;</span>
		<span style="color:#8b008b;font-weight:bold">&lt;dependency&gt;</span>
			<span style="color:#8b008b;font-weight:bold">&lt;groupId&gt;</span>org.springframework.boot<span style="color:#8b008b;font-weight:bold">&lt;/groupId&gt;</span>
			<span style="color:#8b008b;font-weight:bold">&lt;artifactId&gt;</span>spring-boot-configuration-processor<span style="color:#8b008b;font-weight:bold">&lt;/artifactId&gt;</span>
			<span style="color:#8b008b;font-weight:bold">&lt;optional&gt;</span>true<span style="color:#8b008b;font-weight:bold">&lt;/optional&gt;</span>
		<span style="color:#8b008b;font-weight:bold">&lt;/dependency&gt;</span>
</code></pre></div><h4 id="1properties配置文件在idea中默认utf-8可能会乱码">1、properties配置文件在idea中默认utf-8可能会乱码</h4>
<p>调整</p>
<p><img src="images/%E6%90%9C%E7%8B%97%E6%88%AA%E5%9B%BE20180130161620.png" alt="idea配置乱码"></p>
<h4 id="2value获取值和configurationproperties获取值比较">2、@Value获取值和@ConfigurationProperties获取值比较</h4>
<table class='pure-table pure-table-striped'>
<thead>
<tr>
<th></th>
<th>@ConfigurationProperties</th>
<th>@Value</th>
</tr>
</thead>
<tbody>
<tr>
<td>功能</td>
<td>批量注入配置文件中的属性</td>
<td>一个个指定</td>
</tr>
<tr>
<td>松散绑定（松散语法）</td>
<td>支持</td>
<td>不支持</td>
</tr>
<tr>
<td>SpEL</td>
<td>不支持</td>
<td>支持</td>
</tr>
<tr>
<td>JSR303数据校验</td>
<td>支持</td>
<td>不支持</td>
</tr>
<tr>
<td>复杂类型封装</td>
<td>支持</td>
<td>不支持</td>
</tr>
</tbody>
</table>
<p>配置文件yml还是properties他们都能获取到值；</p>
<p>如果说，我们只是在某个业务逻辑中需要获取一下配置文件中的某项值，使用@Value；</p>
<p>如果说，我们专门编写了一个javaBean来和配置文件进行映射，我们就直接使用@ConfigurationProperties；</p>
<h4 id="3配置文件注入值数据校验">3、配置文件注入值数据校验</h4>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#707a7c">@Component</span>
<span style="color:#707a7c">@ConfigurationProperties</span>(prefix = <span style="color:#cd5555">&#34;person&#34;</span>)
<span style="color:#707a7c">@Validated</span>
<span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#8b008b;font-weight:bold">class</span> <span style="color:#008b45;font-weight:bold">Person</span> {

    <span style="color:#228b22">/**
</span><span style="color:#228b22">     * &lt;bean class=&#34;Person&#34;&gt;
</span><span style="color:#228b22">     *      &lt;property name=&#34;lastName&#34; value=&#34;字面量/${key}从环境变量、配置文件中获取值/#{SpEL}&#34;&gt;&lt;/property&gt;
</span><span style="color:#228b22">     * &lt;bean/&gt;
</span><span style="color:#228b22">     */</span>

   <span style="color:#228b22">//lastName必须是邮箱格式
</span><span style="color:#228b22"></span>    <span style="color:#707a7c">@Email</span>
    <span style="color:#228b22">//@Value(&#34;${person.last-name}&#34;)
</span><span style="color:#228b22"></span>    <span style="color:#8b008b;font-weight:bold">private</span> String lastName;
    <span style="color:#228b22">//@Value(&#34;#{11*2}&#34;)
</span><span style="color:#228b22"></span>    <span style="color:#8b008b;font-weight:bold">private</span> Integer age;
    <span style="color:#228b22">//@Value(&#34;true&#34;)
</span><span style="color:#228b22"></span>    <span style="color:#8b008b;font-weight:bold">private</span> Boolean boss;

    <span style="color:#8b008b;font-weight:bold">private</span> Date birth;
    <span style="color:#8b008b;font-weight:bold">private</span> Map&lt;String,Object&gt; maps;
    <span style="color:#8b008b;font-weight:bold">private</span> List&lt;Object&gt; lists;
    <span style="color:#8b008b;font-weight:bold">private</span> Dog dog;
</code></pre></div><h4 id="4propertysourceimportresourcebean">4、@PropertySource&amp;@ImportResource&amp;@Bean</h4>
<p>@<strong>PropertySource</strong>：加载指定的配置文件；</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#228b22">/**
</span><span style="color:#228b22"> * 将配置文件中配置的每一个属性的值，映射到这个组件中
</span><span style="color:#228b22"> * @ConfigurationProperties：告诉SpringBoot将本类中的所有属性和配置文件中相关的配置进行绑定；
</span><span style="color:#228b22"> *      prefix = &#34;person&#34;：配置文件中哪个下面的所有属性进行一一映射
</span><span style="color:#228b22"> *
</span><span style="color:#228b22"> * 只有这个组件是容器中的组件，才能容器提供的@ConfigurationProperties功能；
</span><span style="color:#228b22"> *  @ConfigurationProperties(prefix = &#34;person&#34;)默认从全局配置文件中获取值；
</span><span style="color:#228b22"> *
</span><span style="color:#228b22"> */</span>
<span style="color:#707a7c">@PropertySource</span>(value = {<span style="color:#cd5555">&#34;classpath:person.properties&#34;</span>})
<span style="color:#707a7c">@Component</span>
<span style="color:#707a7c">@ConfigurationProperties</span>(prefix = <span style="color:#cd5555">&#34;person&#34;</span>)
<span style="color:#228b22">//@Validated
</span><span style="color:#228b22"></span><span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#8b008b;font-weight:bold">class</span> <span style="color:#008b45;font-weight:bold">Person</span> {

    <span style="color:#228b22">/**
</span><span style="color:#228b22">     * &lt;bean class=&#34;Person&#34;&gt;
</span><span style="color:#228b22">     *      &lt;property name=&#34;lastName&#34; value=&#34;字面量/${key}从环境变量、配置文件中获取值/#{SpEL}&#34;&gt;&lt;/property&gt;
</span><span style="color:#228b22">     * &lt;bean/&gt;
</span><span style="color:#228b22">     */</span>

   <span style="color:#228b22">//lastName必须是邮箱格式
</span><span style="color:#228b22"></span>   <span style="color:#228b22">// @Email
</span><span style="color:#228b22"></span>    <span style="color:#228b22">//@Value(&#34;${person.last-name}&#34;)
</span><span style="color:#228b22"></span>    <span style="color:#8b008b;font-weight:bold">private</span> String lastName;
    <span style="color:#228b22">//@Value(&#34;#{11*2}&#34;)
</span><span style="color:#228b22"></span>    <span style="color:#8b008b;font-weight:bold">private</span> Integer age;
    <span style="color:#228b22">//@Value(&#34;true&#34;)
</span><span style="color:#228b22"></span>    <span style="color:#8b008b;font-weight:bold">private</span> Boolean boss;

</code></pre></div><p>@<strong>ImportResource</strong>：导入Spring的配置文件，让配置文件里面的内容生效；</p>
<p>Spring Boot里面没有Spring的配置文件，我们自己编写的配置文件，也不能自动识别；</p>
<p>想让Spring的配置文件生效，加载进来；@<strong>ImportResource</strong>标注在一个配置类上</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#707a7c">@ImportResource</span>(locations = {<span style="color:#cd5555">&#34;classpath:beans.xml&#34;</span>})
导入Spring的配置文件让其生效
</code></pre></div><p>不来编写Spring的配置文件</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml"><span style="color:#1e889b">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;</span>
<span style="color:#8b008b;font-weight:bold">&lt;beans</span> <span style="color:#658b00">xmlns=</span><span style="color:#cd5555">&#34;http://www.springframework.org/schema/beans&#34;</span>
       <span style="color:#658b00">xmlns:xsi=</span><span style="color:#cd5555">&#34;http://www.w3.org/2001/XMLSchema-instance&#34;</span>
       <span style="color:#658b00">xsi:schemaLocation=</span><span style="color:#cd5555">&#34;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&#34;</span><span style="color:#8b008b;font-weight:bold">&gt;</span>


    <span style="color:#8b008b;font-weight:bold">&lt;bean</span> <span style="color:#658b00">id=</span><span style="color:#cd5555">&#34;helloService&#34;</span> <span style="color:#658b00">class=</span><span style="color:#cd5555">&#34;com.atguigu.springboot.service.HelloService&#34;</span><span style="color:#8b008b;font-weight:bold">&gt;&lt;/bean&gt;</span>
<span style="color:#8b008b;font-weight:bold">&lt;/beans&gt;</span>
</code></pre></div><p>SpringBoot推荐给容器中添加组件的方式；推荐使用全注解的方式</p>
<p>1、配置类**@Configuration**&mdash;&mdash;&gt;Spring配置文件</p>
<p>2、使用**@Bean**给容器中添加组件</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#228b22">/**
</span><span style="color:#228b22"> * @Configuration：指明当前类是一个配置类；就是来替代之前的Spring配置文件
</span><span style="color:#228b22"> *
</span><span style="color:#228b22"> * 在配置文件中用&lt;bean&gt;&lt;bean/&gt;标签添加组件
</span><span style="color:#228b22"> *
</span><span style="color:#228b22"> */</span>
<span style="color:#707a7c">@Configuration</span>
<span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#8b008b;font-weight:bold">class</span> <span style="color:#008b45;font-weight:bold">MyAppConfig</span> {

    <span style="color:#228b22">//将方法的返回值添加到容器中；容器中这个组件默认的id就是方法名
</span><span style="color:#228b22"></span>    <span style="color:#707a7c">@Bean</span>
    <span style="color:#8b008b;font-weight:bold">public</span> HelloService <span style="color:#008b45">helloService02</span>(){
        System.<span style="color:#658b00">out</span>.<span style="color:#658b00">println</span>(<span style="color:#cd5555">&#34;配置类@Bean给容器中添加组件了...&#34;</span>);
        <span style="color:#8b008b;font-weight:bold">return</span> <span style="color:#8b008b;font-weight:bold">new</span> HelloService();
    }
}
</code></pre></div><p>##4、配置文件占位符</p>
<h3 id="1随机数">1、随机数</h3>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java">${random.<span style="color:#658b00">value</span>}<span style="color:#a61717;background-color:#e3d2d2">、</span>${random.<span style="color:#658b00">int</span>}<span style="color:#a61717;background-color:#e3d2d2">、</span>${random.<span style="color:#658b00">long</span>}
${random.<span style="color:#658b00">int</span>(10)}<span style="color:#a61717;background-color:#e3d2d2">、</span>${random.<span style="color:#658b00">int</span>[1024,65536]}

</code></pre></div><h3 id="2占位符获取之前配置的值如果没有可以是用指定默认值">2、占位符获取之前配置的值，如果没有可以是用:指定默认值</h3>
<pre><code class="language-properties" data-lang="properties">person.last-name=张三${random.uuid}
person.age=${random.int}
person.birth=2017/12/15
person.boss=false
person.maps.k1=v1
person.maps.k2=14
person.lists=a,b,c
person.dog.name=${person.hello:hello}_dog
person.dog.age=15
</code></pre><h2 id="5profile">5、Profile</h2>
<h3 id="1多profile文件">1、多Profile文件</h3>
<p>我们在主配置文件编写的时候，文件名可以是   application-{profile}.properties/yml</p>
<p>默认使用application.properties的配置；</p>
<h3 id="2yml支持多文档块方式">2、yml支持多文档块方式</h3>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yml" data-lang="yml"><span style="color:#bbb">
</span><span style="color:#bbb"></span><span style="color:#8b008b;font-weight:bold">server</span>:<span style="color:#bbb">
</span><span style="color:#bbb">  </span><span style="color:#8b008b;font-weight:bold">port</span>:<span style="color:#bbb"> </span><span style="color:#b452cd">8081</span><span style="color:#bbb">
</span><span style="color:#bbb"></span><span style="color:#8b008b;font-weight:bold">spring</span>:<span style="color:#bbb">
</span><span style="color:#bbb">  </span><span style="color:#8b008b;font-weight:bold">profiles</span>:<span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#8b008b;font-weight:bold">active</span>:<span style="color:#bbb"> </span>prod<span style="color:#bbb">
</span><span style="color:#bbb">
</span><span style="color:#bbb"></span>---<span style="color:#bbb">
</span><span style="color:#bbb"></span><span style="color:#8b008b;font-weight:bold">server</span>:<span style="color:#bbb">
</span><span style="color:#bbb">  </span><span style="color:#8b008b;font-weight:bold">port</span>:<span style="color:#bbb"> </span><span style="color:#b452cd">8083</span><span style="color:#bbb">
</span><span style="color:#bbb"></span><span style="color:#8b008b;font-weight:bold">spring</span>:<span style="color:#bbb">
</span><span style="color:#bbb">  </span><span style="color:#8b008b;font-weight:bold">profiles</span>:<span style="color:#bbb"> </span>dev<span style="color:#bbb">
</span><span style="color:#bbb">
</span><span style="color:#bbb">
</span><span style="color:#bbb"></span>---<span style="color:#bbb">
</span><span style="color:#bbb">
</span><span style="color:#bbb"></span><span style="color:#8b008b;font-weight:bold">server</span>:<span style="color:#bbb">
</span><span style="color:#bbb">  </span><span style="color:#8b008b;font-weight:bold">port</span>:<span style="color:#bbb"> </span><span style="color:#b452cd">8084</span><span style="color:#bbb">
</span><span style="color:#bbb"></span><span style="color:#8b008b;font-weight:bold">spring</span>:<span style="color:#bbb">
</span><span style="color:#bbb">  </span><span style="color:#8b008b;font-weight:bold">profiles</span>:<span style="color:#bbb"> </span>prod<span style="color:#bbb">  </span><span style="color:#228b22">#指定属于哪个环境</span><span style="color:#bbb">
</span></code></pre></div><h3 id="3激活指定profile">3、激活指定profile</h3>
<p>​	1、在配置文件中指定  spring.profiles.active=dev</p>
<p>​	2、命令行：</p>
<p>​		java -jar spring-boot-02-config-0.0.1-SNAPSHOT.jar &ndash;spring.profiles.active=dev；</p>
<p>​		可以直接在测试的时候，配置传入命令行参数</p>
<p>​	3、虚拟机参数；</p>
<p>​		-Dspring.profiles.active=dev</p>
<h2 id="6配置文件加载位置">6、配置文件加载位置</h2>
<p>springboot 启动会扫描以下位置的application.properties或者application.yml文件作为Spring boot的默认配置文件</p>
<p>–file:./config/</p>
<p>–file:./</p>
<p>–classpath:/config/</p>
<p>–classpath:/</p>
<p>优先级由高到底，高优先级的配置会覆盖低优先级的配置；</p>
<p>SpringBoot会从这四个位置全部加载主配置文件；<strong>互补配置</strong>；</p>
<p>==我们还可以通过spring.config.location来改变默认的配置文件位置==</p>
<p><strong>项目打包好以后，我们可以使用命令行参数的形式，启动项目的时候来指定配置文件的新位置；指定配置文件和默认加载的这些配置文件共同起作用形成互补配置；</strong></p>
<p>java -jar spring-boot-02-config-02-0.0.1-SNAPSHOT.jar &ndash;spring.config.location=G:/application.properties</p>
<h2 id="7外部配置加载顺序">7、外部配置加载顺序</h2>
<p><strong>==SpringBoot也可以从以下位置加载配置； 优先级从高到低；高优先级的配置覆盖低优先级的配置，所有的配置会形成互补配置==</strong></p>
<p><strong>1.命令行参数</strong></p>
<p>所有的配置都可以在命令行上进行指定</p>
<p>java -jar spring-boot-02-config-02-0.0.1-SNAPSHOT.jar &ndash;server.port=8087  &ndash;server.context-path=/abc</p>
<p>多个配置用空格分开； &ndash;配置项=值</p>
<p>2.来自java:comp/env的JNDI属性</p>
<p>3.Java系统属性（System.getProperties()）</p>
<p>4.操作系统环境变量</p>
<p>5.RandomValuePropertySource配置的random.*属性值</p>
<p>==**由jar包外向jar包内进行寻找；**==</p>
<p>==<strong>优先加载带profile</strong>==</p>
<p><strong>6.jar包外部的application-{profile}.properties或application.yml(带spring.profile)配置文件</strong></p>
<p><strong>7.jar包内部的application-{profile}.properties或application.yml(带spring.profile)配置文件</strong></p>
<p>==<strong>再来加载不带profile</strong>==</p>
<p><strong>8.jar包外部的application.properties或application.yml(不带spring.profile)配置文件</strong></p>
<p><strong>9.jar包内部的application.properties或application.yml(不带spring.profile)配置文件</strong></p>
<p>10.@Configuration注解类上的@PropertySource</p>
<p>11.通过SpringApplication.setDefaultProperties指定的默认属性</p>
<p>所有支持的配置加载来源；</p>
<p><a href="https://docs.spring.io/spring-boot/docs/1.5.9.RELEASE/reference/htmlsingle/#boot-features-external-config">参考官方文档</a></p>
<h2 id="8自动配置原理">8、自动配置原理</h2>
<p>配置文件到底能写什么？怎么写？自动配置原理；</p>
<p><a href="https://docs.spring.io/spring-boot/docs/1.5.9.RELEASE/reference/htmlsingle/#common-application-properties">配置文件能配置的属性参照</a></p>
<h3 id="1自动配置原理">1、<strong>自动配置原理：</strong></h3>
<p>1）、SpringBoot启动的时候加载主配置类，开启了自动配置功能 ==@EnableAutoConfiguration==</p>
<p><strong>2）、@EnableAutoConfiguration 作用：</strong></p>
<ul>
<li>
<p>利用EnableAutoConfigurationImportSelector给容器中导入一些组件？</p>
</li>
<li>
<p>可以查看selectImports()方法的内容；</p>
</li>
<li>
<p>List<String> configurations = getCandidateConfigurations(annotationMetadata,      attributes);获取候选的配置</p>
<ul>
<li>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java">SpringFactoriesLoader.<span style="color:#658b00">loadFactoryNames</span>()
扫描所有jar包类路径下  META-INF/spring.<span style="color:#658b00">factories</span>
把扫描到的这些文件的内容包装成properties对象
从properties中获取到EnableAutoConfiguration.<span style="color:#658b00">class类</span><span style="color:#a61717;background-color:#e3d2d2">（</span>类名<span style="color:#a61717;background-color:#e3d2d2">）</span>对应的值<span style="color:#a61717;background-color:#e3d2d2">，</span>然后把他们添加在容器中

</code></pre></div></li>
</ul>
</li>
</ul>
<p><strong>==将 类路径下  META-INF/spring.factories 里面配置的所有EnableAutoConfiguration的值加入到了容器中；==</strong></p>
<pre><code class="language-properties" data-lang="properties"># Auto Configure
org.springframework.boot.autoconfigure.EnableAutoConfiguration=\
org.springframework.boot.autoconfigure.admin.SpringApplicationAdminJmxAutoConfiguration,\
org.springframework.boot.autoconfigure.aop.AopAutoConfiguration,\
org.springframework.boot.autoconfigure.amqp.RabbitAutoConfiguration,\
org.springframework.boot.autoconfigure.batch.BatchAutoConfiguration,\
org.springframework.boot.autoconfigure.cache.CacheAutoConfiguration,\
org.springframework.boot.autoconfigure.cassandra.CassandraAutoConfiguration,\
org.springframework.boot.autoconfigure.cloud.CloudAutoConfiguration,\
org.springframework.boot.autoconfigure.context.ConfigurationPropertiesAutoConfiguration,\
org.springframework.boot.autoconfigure.context.MessageSourceAutoConfiguration,\
org.springframework.boot.autoconfigure.context.PropertyPlaceholderAutoConfiguration,\
org.springframework.boot.autoconfigure.couchbase.CouchbaseAutoConfiguration,\
org.springframework.boot.autoconfigure.dao.PersistenceExceptionTranslationAutoConfiguration,\
org.springframework.boot.autoconfigure.data.cassandra.CassandraDataAutoConfiguration,\
org.springframework.boot.autoconfigure.data.cassandra.CassandraRepositoriesAutoConfiguration,\
org.springframework.boot.autoconfigure.data.couchbase.CouchbaseDataAutoConfiguration,\
org.springframework.boot.autoconfigure.data.couchbase.CouchbaseRepositoriesAutoConfiguration,\
org.springframework.boot.autoconfigure.data.elasticsearch.ElasticsearchAutoConfiguration,\
org.springframework.boot.autoconfigure.data.elasticsearch.ElasticsearchDataAutoConfiguration,\
org.springframework.boot.autoconfigure.data.elasticsearch.ElasticsearchRepositoriesAutoConfiguration,\
org.springframework.boot.autoconfigure.data.jpa.JpaRepositoriesAutoConfiguration,\
org.springframework.boot.autoconfigure.data.ldap.LdapDataAutoConfiguration,\
org.springframework.boot.autoconfigure.data.ldap.LdapRepositoriesAutoConfiguration,\
org.springframework.boot.autoconfigure.data.mongo.MongoDataAutoConfiguration,\
org.springframework.boot.autoconfigure.data.mongo.MongoRepositoriesAutoConfiguration,\
org.springframework.boot.autoconfigure.data.neo4j.Neo4jDataAutoConfiguration,\
org.springframework.boot.autoconfigure.data.neo4j.Neo4jRepositoriesAutoConfiguration,\
org.springframework.boot.autoconfigure.data.solr.SolrRepositoriesAutoConfiguration,\
org.springframework.boot.autoconfigure.data.redis.RedisAutoConfiguration,\
org.springframework.boot.autoconfigure.data.redis.RedisRepositoriesAutoConfiguration,\
org.springframework.boot.autoconfigure.data.rest.RepositoryRestMvcAutoConfiguration,\
org.springframework.boot.autoconfigure.data.web.SpringDataWebAutoConfiguration,\
org.springframework.boot.autoconfigure.elasticsearch.jest.JestAutoConfiguration,\
org.springframework.boot.autoconfigure.freemarker.FreeMarkerAutoConfiguration,\
org.springframework.boot.autoconfigure.gson.GsonAutoConfiguration,\
org.springframework.boot.autoconfigure.h2.H2ConsoleAutoConfiguration,\
org.springframework.boot.autoconfigure.hateoas.HypermediaAutoConfiguration,\
org.springframework.boot.autoconfigure.hazelcast.HazelcastAutoConfiguration,\
org.springframework.boot.autoconfigure.hazelcast.HazelcastJpaDependencyAutoConfiguration,\
org.springframework.boot.autoconfigure.info.ProjectInfoAutoConfiguration,\
org.springframework.boot.autoconfigure.integration.IntegrationAutoConfiguration,\
org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration,\
org.springframework.boot.autoconfigure.jdbc.DataSourceAutoConfiguration,\
org.springframework.boot.autoconfigure.jdbc.JdbcTemplateAutoConfiguration,\
org.springframework.boot.autoconfigure.jdbc.JndiDataSourceAutoConfiguration,\
org.springframework.boot.autoconfigure.jdbc.XADataSourceAutoConfiguration,\
org.springframework.boot.autoconfigure.jdbc.DataSourceTransactionManagerAutoConfiguration,\
org.springframework.boot.autoconfigure.jms.JmsAutoConfiguration,\
org.springframework.boot.autoconfigure.jmx.JmxAutoConfiguration,\
org.springframework.boot.autoconfigure.jms.JndiConnectionFactoryAutoConfiguration,\
org.springframework.boot.autoconfigure.jms.activemq.ActiveMQAutoConfiguration,\
org.springframework.boot.autoconfigure.jms.artemis.ArtemisAutoConfiguration,\
org.springframework.boot.autoconfigure.flyway.FlywayAutoConfiguration,\
org.springframework.boot.autoconfigure.groovy.template.GroovyTemplateAutoConfiguration,\
org.springframework.boot.autoconfigure.jersey.JerseyAutoConfiguration,\
org.springframework.boot.autoconfigure.jooq.JooqAutoConfiguration,\
org.springframework.boot.autoconfigure.kafka.KafkaAutoConfiguration,\
org.springframework.boot.autoconfigure.ldap.embedded.EmbeddedLdapAutoConfiguration,\
org.springframework.boot.autoconfigure.ldap.LdapAutoConfiguration,\
org.springframework.boot.autoconfigure.liquibase.LiquibaseAutoConfiguration,\
org.springframework.boot.autoconfigure.mail.MailSenderAutoConfiguration,\
org.springframework.boot.autoconfigure.mail.MailSenderValidatorAutoConfiguration,\
org.springframework.boot.autoconfigure.mobile.DeviceResolverAutoConfiguration,\
org.springframework.boot.autoconfigure.mobile.DeviceDelegatingViewResolverAutoConfiguration,\
org.springframework.boot.autoconfigure.mobile.SitePreferenceAutoConfiguration,\
org.springframework.boot.autoconfigure.mongo.embedded.EmbeddedMongoAutoConfiguration,\
org.springframework.boot.autoconfigure.mongo.MongoAutoConfiguration,\
org.springframework.boot.autoconfigure.mustache.MustacheAutoConfiguration,\
org.springframework.boot.autoconfigure.orm.jpa.HibernateJpaAutoConfiguration,\
org.springframework.boot.autoconfigure.reactor.ReactorAutoConfiguration,\
org.springframework.boot.autoconfigure.security.SecurityAutoConfiguration,\
org.springframework.boot.autoconfigure.security.SecurityFilterAutoConfiguration,\
org.springframework.boot.autoconfigure.security.FallbackWebSecurityAutoConfiguration,\
org.springframework.boot.autoconfigure.security.oauth2.OAuth2AutoConfiguration,\
org.springframework.boot.autoconfigure.sendgrid.SendGridAutoConfiguration,\
org.springframework.boot.autoconfigure.session.SessionAutoConfiguration,\
org.springframework.boot.autoconfigure.social.SocialWebAutoConfiguration,\
org.springframework.boot.autoconfigure.social.FacebookAutoConfiguration,\
org.springframework.boot.autoconfigure.social.LinkedInAutoConfiguration,\
org.springframework.boot.autoconfigure.social.TwitterAutoConfiguration,\
org.springframework.boot.autoconfigure.solr.SolrAutoConfiguration,\
org.springframework.boot.autoconfigure.thymeleaf.ThymeleafAutoConfiguration,\
org.springframework.boot.autoconfigure.transaction.TransactionAutoConfiguration,\
org.springframework.boot.autoconfigure.transaction.jta.JtaAutoConfiguration,\
org.springframework.boot.autoconfigure.validation.ValidationAutoConfiguration,\
org.springframework.boot.autoconfigure.web.DispatcherServletAutoConfiguration,\
org.springframework.boot.autoconfigure.web.EmbeddedServletContainerAutoConfiguration,\
org.springframework.boot.autoconfigure.web.ErrorMvcAutoConfiguration,\
org.springframework.boot.autoconfigure.web.HttpEncodingAutoConfiguration,\
org.springframework.boot.autoconfigure.web.HttpMessageConvertersAutoConfiguration,\
org.springframework.boot.autoconfigure.web.MultipartAutoConfiguration,\
org.springframework.boot.autoconfigure.web.ServerPropertiesAutoConfiguration,\
org.springframework.boot.autoconfigure.web.WebClientAutoConfiguration,\
org.springframework.boot.autoconfigure.web.WebMvcAutoConfiguration,\
org.springframework.boot.autoconfigure.websocket.WebSocketAutoConfiguration,\
org.springframework.boot.autoconfigure.websocket.WebSocketMessagingAutoConfiguration,\
org.springframework.boot.autoconfigure.webservices.WebServicesAutoConfiguration
</code></pre><p>每一个这样的  xxxAutoConfiguration类都是容器中的一个组件，都加入到容器中；用他们来做自动配置；</p>
<p>3）、每一个自动配置类进行自动配置功能；</p>
<p>4）、以**HttpEncodingAutoConfiguration（Http编码自动配置）**为例解释自动配置原理；</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#707a7c">@Configuration</span>   <span style="color:#228b22">//表示这是一个配置类，以前编写的配置文件一样，也可以给容器中添加组件
</span><span style="color:#228b22"></span><span style="color:#707a7c">@EnableConfigurationProperties</span>(HttpEncodingProperties.<span style="color:#658b00">class</span>)  <span style="color:#228b22">//启动指定类的ConfigurationProperties功能；将配置文件中对应的值和HttpEncodingProperties绑定起来；并把HttpEncodingProperties加入到ioc容器中
</span><span style="color:#228b22"></span>
<span style="color:#707a7c">@ConditionalOnWebApplication</span> <span style="color:#228b22">//Spring底层@Conditional注解（Spring注解版），根据不同的条件，如果满足指定的条件，整个配置类里面的配置就会生效；    判断当前应用是否是web应用，如果是，当前配置类生效
</span><span style="color:#228b22"></span>
<span style="color:#707a7c">@ConditionalOnClass</span>(CharacterEncodingFilter.<span style="color:#658b00">class</span>)  <span style="color:#228b22">//判断当前项目有没有这个类CharacterEncodingFilter；SpringMVC中进行乱码解决的过滤器；
</span><span style="color:#228b22"></span>
<span style="color:#707a7c">@ConditionalOnProperty</span>(prefix = <span style="color:#cd5555">&#34;spring.http.encoding&#34;</span>, value = <span style="color:#cd5555">&#34;enabled&#34;</span>, matchIfMissing = <span style="color:#8b008b;font-weight:bold">true</span>)  <span style="color:#228b22">//判断配置文件中是否存在某个配置  spring.http.encoding.enabled；如果不存在，判断也是成立的
</span><span style="color:#228b22">//即使我们配置文件中不配置pring.http.encoding.enabled=true，也是默认生效的；
</span><span style="color:#228b22"></span><span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#8b008b;font-weight:bold">class</span> <span style="color:#008b45;font-weight:bold">HttpEncodingAutoConfiguration</span> {
  
  	<span style="color:#228b22">//他已经和SpringBoot的配置文件映射了
</span><span style="color:#228b22"></span>  	<span style="color:#8b008b;font-weight:bold">private</span> <span style="color:#8b008b;font-weight:bold">final</span> HttpEncodingProperties properties;
  
   <span style="color:#228b22">//只有一个有参构造器的情况下，参数的值就会从容器中拿
</span><span style="color:#228b22"></span>  	<span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#008b45">HttpEncodingAutoConfiguration</span>(HttpEncodingProperties properties) {
		<span style="color:#8b008b;font-weight:bold">this</span>.<span style="color:#658b00">properties</span> = properties;
	}
  
    <span style="color:#707a7c">@Bean</span>   <span style="color:#228b22">//给容器中添加一个组件，这个组件的某些值需要从properties中获取
</span><span style="color:#228b22"></span>	<span style="color:#707a7c">@ConditionalOnMissingBean</span>(CharacterEncodingFilter.<span style="color:#658b00">class</span>) <span style="color:#228b22">//判断容器没有这个组件？
</span><span style="color:#228b22"></span>	<span style="color:#8b008b;font-weight:bold">public</span> CharacterEncodingFilter <span style="color:#008b45">characterEncodingFilter</span>() {
		CharacterEncodingFilter filter = <span style="color:#8b008b;font-weight:bold">new</span> OrderedCharacterEncodingFilter();
		filter.<span style="color:#658b00">setEncoding</span>(<span style="color:#8b008b;font-weight:bold">this</span>.<span style="color:#658b00">properties</span>.<span style="color:#658b00">getCharset</span>().<span style="color:#658b00">name</span>());
		filter.<span style="color:#658b00">setForceRequestEncoding</span>(<span style="color:#8b008b;font-weight:bold">this</span>.<span style="color:#658b00">properties</span>.<span style="color:#658b00">shouldForce</span>(Type.<span style="color:#658b00">REQUEST</span>));
		filter.<span style="color:#658b00">setForceResponseEncoding</span>(<span style="color:#8b008b;font-weight:bold">this</span>.<span style="color:#658b00">properties</span>.<span style="color:#658b00">shouldForce</span>(Type.<span style="color:#658b00">RESPONSE</span>));
		<span style="color:#8b008b;font-weight:bold">return</span> filter;
	}
</code></pre></div><p>根据当前不同的条件判断，决定这个配置类是否生效？</p>
<p>一但这个配置类生效；这个配置类就会给容器中添加各种组件；这些组件的属性是从对应的properties类中获取的，这些类里面的每一个属性又是和配置文件绑定的；</p>
<p>5）、所有在配置文件中能配置的属性都是在xxxxProperties类中封装者‘；配置文件能配置什么就可以参照某个功能对应的这个属性类</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#707a7c">@ConfigurationProperties</span>(prefix = <span style="color:#cd5555">&#34;spring.http.encoding&#34;</span>)  <span style="color:#228b22">//从配置文件中获取指定的值和bean的属性进行绑定
</span><span style="color:#228b22"></span><span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#8b008b;font-weight:bold">class</span> <span style="color:#008b45;font-weight:bold">HttpEncodingProperties</span> {

   <span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#8b008b;font-weight:bold">static</span> <span style="color:#8b008b;font-weight:bold">final</span> Charset DEFAULT_CHARSET = Charset.<span style="color:#658b00">forName</span>(<span style="color:#cd5555">&#34;UTF-8&#34;</span>);
</code></pre></div><p><strong>精髓：</strong></p>
<p>​	<strong>1）、SpringBoot启动会加载大量的自动配置类</strong></p>
<p>​	<strong>2）、我们看我们需要的功能有没有SpringBoot默认写好的自动配置类；</strong></p>
<p>​	<strong>3）、我们再来看这个自动配置类中到底配置了哪些组件；（只要我们要用的组件有，我们就不需要再来配置了）</strong></p>
<p>​	<strong>4）、给容器中自动配置类添加组件的时候，会从properties类中获取某些属性。我们就可以在配置文件中指定这些属性的值；</strong></p>
<p>xxxxAutoConfigurartion：自动配置类；</p>
<p>给容器中添加组件</p>
<p>xxxxProperties:封装配置文件中相关属性；</p>
<h3 id="2细节">2、细节</h3>
<h4 id="1conditional派生注解spring注解版原生的conditional作用">1、@Conditional派生注解（Spring注解版原生的@Conditional作用）</h4>
<p>作用：必须是@Conditional指定的条件成立，才给容器中添加组件，配置配里面的所有内容才生效；</p>
<table class='pure-table pure-table-striped'>
<thead>
<tr>
<th>@Conditional扩展注解</th>
<th>作用（判断是否满足当前指定条件）</th>
</tr>
</thead>
<tbody>
<tr>
<td>@ConditionalOnJava</td>
<td>系统的java版本是否符合要求</td>
</tr>
<tr>
<td>@ConditionalOnBean</td>
<td>容器中存在指定Bean；</td>
</tr>
<tr>
<td>@ConditionalOnMissingBean</td>
<td>容器中不存在指定Bean；</td>
</tr>
<tr>
<td>@ConditionalOnExpression</td>
<td>满足SpEL表达式指定</td>
</tr>
<tr>
<td>@ConditionalOnClass</td>
<td>系统中有指定的类</td>
</tr>
<tr>
<td>@ConditionalOnMissingClass</td>
<td>系统中没有指定的类</td>
</tr>
<tr>
<td>@ConditionalOnSingleCandidate</td>
<td>容器中只有一个指定的Bean，或者这个Bean是首选Bean</td>
</tr>
<tr>
<td>@ConditionalOnProperty</td>
<td>系统中指定的属性是否有指定的值</td>
</tr>
<tr>
<td>@ConditionalOnResource</td>
<td>类路径下是否存在指定资源文件</td>
</tr>
<tr>
<td>@ConditionalOnWebApplication</td>
<td>当前是web环境</td>
</tr>
<tr>
<td>@ConditionalOnNotWebApplication</td>
<td>当前不是web环境</td>
</tr>
<tr>
<td>@ConditionalOnJndi</td>
<td>JNDI存在指定项</td>
</tr>
</tbody>
</table>
<p><strong>自动配置类必须在一定的条件下才能生效；</strong></p>
<p>我们怎么知道哪些自动配置类生效；</p>
<p><strong>==我们可以通过启用  debug=true属性；来让控制台打印自动配置报告==</strong>，这样我们就可以很方便的知道哪些自动配置类生效；</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java">=========================
AUTO-CONFIGURATION REPORT
=========================


Positive matches:<span style="color:#a61717;background-color:#e3d2d2">（</span>自动配置类启用的<span style="color:#a61717;background-color:#e3d2d2">）</span>
-----------------

   DispatcherServletAutoConfiguration matched:
      - <span style="color:#707a7c">@ConditionalOnClass</span> found required <span style="color:#8b008b;font-weight:bold">class</span> <span style="color:#a61717;background-color:#e3d2d2">&#39;</span><span style="color:#008b45;font-weight:bold">org</span>.<span style="color:#658b00">springframework</span>.<span style="color:#658b00">web</span>.<span style="color:#658b00">servlet</span>.<span style="color:#658b00">DispatcherServlet</span><span style="color:#a61717;background-color:#e3d2d2">&#39;</span>; <span style="color:#707a7c">@ConditionalOnMissingClass</span> did not find unwanted <span style="color:#008b45">class</span> (OnClassCondition)
      - <span style="color:#707a7c">@ConditionalOnWebApplication</span> (required) found <span style="color:#008b45">StandardServletEnvironment</span> (OnWebApplicationCondition)
        
    
Negative matches:<span style="color:#a61717;background-color:#e3d2d2">（</span>没有启动<span style="color:#a61717;background-color:#e3d2d2">，</span>没有匹配成功的自动配置类<span style="color:#a61717;background-color:#e3d2d2">）</span>
-----------------

   ActiveMQAutoConfiguration:
      Did not match:
         - <span style="color:#707a7c">@ConditionalOnClass</span> did not find required classes <span style="color:#a61717;background-color:#e3d2d2">&#39;</span>javax.<span style="color:#658b00">jms</span>.<span style="color:#658b00">ConnectionFactory</span><span style="color:#a61717;background-color:#e3d2d2">&#39;</span>, <span style="color:#a61717;background-color:#e3d2d2">&#39;</span>org.<span style="color:#658b00">apache</span>.<span style="color:#658b00">activemq</span>.<span style="color:#658b00">ActiveMQConnectionFactory</span><span style="color:#a61717;background-color:#e3d2d2">&#39;</span> (OnClassCondition)

   AopAutoConfiguration:
      Did not match:
         - <span style="color:#707a7c">@ConditionalOnClass</span> did not find required classes <span style="color:#a61717;background-color:#e3d2d2">&#39;</span>org.<span style="color:#658b00">aspectj</span>.<span style="color:#658b00">lang</span>.<span style="color:#658b00">annotation</span>.<span style="color:#658b00">Aspect</span><span style="color:#a61717;background-color:#e3d2d2">&#39;</span>, <span style="color:#a61717;background-color:#e3d2d2">&#39;</span>org.<span style="color:#658b00">aspectj</span>.<span style="color:#658b00">lang</span>.<span style="color:#658b00">reflect</span>.<span style="color:#658b00">Advice</span><span style="color:#a61717;background-color:#e3d2d2">&#39;</span> (OnClassCondition)
        
</code></pre></div><h1 id="三日志">三、日志</h1>
<h2 id="1日志框架">1、日志框架</h2>
<p>小张；开发一个大型系统；</p>
<p>​		1、System.out.println(&quot;&quot;)；将关键数据打印在控制台；去掉？写在一个文件？</p>
<p>​		2、框架来记录系统的一些运行时信息；日志框架 ；  zhanglogging.jar；</p>
<p>​		3、高大上的几个功能？异步模式？自动归档？xxxx？  zhanglogging-good.jar？</p>
<p>​		4、将以前框架卸下来？换上新的框架，重新修改之前相关的API；zhanglogging-prefect.jar；</p>
<p>​		5、JDBC&mdash;数据库驱动；</p>
<p>​			写了一个统一的接口层；日志门面（日志的一个抽象层）；logging-abstract.jar；</p>
<p>​			给项目中导入具体的日志实现就行了；我们之前的日志框架都是实现的抽象层；</p>
<p><strong>市面上的日志框架；</strong></p>
<p>JUL、JCL、Jboss-logging、logback、log4j、log4j2、slf4j&hellip;.</p>
<table class='pure-table pure-table-striped'>
<thead>
<tr>
<th>日志门面  （日志的抽象层）</th>
<th>日志实现</th>
</tr>
</thead>
<tbody>
<tr>
<td><del>JCL（Jakarta  Commons Logging）</del>    SLF4j（Simple  Logging Facade for Java）    <strong><del>jboss-logging</del></strong></td>
<td>Log4j  JUL（java.util.logging）  Log4j2  <strong>Logback</strong></td>
</tr>
</tbody>
</table>
<p>左边选一个门面（抽象层）、右边来选一个实现；</p>
<p>日志门面：  SLF4J；</p>
<p>日志实现：Logback；</p>
<p>SpringBoot：底层是Spring框架，Spring框架默认是用JCL；‘</p>
<p>​	<strong>==SpringBoot选用 SLF4j和logback；==</strong></p>
<h2 id="2slf4j使用">2、SLF4j使用</h2>
<h3 id="1如何在系统中使用slf4j---httpswwwslf4jorg">1、如何在系统中使用SLF4j   <a href="https://www.slf4j.org">https://www.slf4j.org</a></h3>
<p>以后开发的时候，日志记录方法的调用，不应该来直接调用日志的实现类，而是调用日志抽象层里面的方法；</p>
<p>给系统里面导入slf4j的jar和  logback的实现jar</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#8b008b;font-weight:bold">import</span> <span style="color:#008b45;text-decoration:underline">org.slf4j.Logger</span>;
<span style="color:#8b008b;font-weight:bold">import</span> <span style="color:#008b45;text-decoration:underline">org.slf4j.LoggerFactory</span>;

<span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#8b008b;font-weight:bold">class</span> <span style="color:#008b45;font-weight:bold">HelloWorld</span> {
  <span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#8b008b;font-weight:bold">static</span> <span style="color:#00688b;font-weight:bold">void</span> <span style="color:#008b45">main</span>(String[] args) {
    Logger logger = LoggerFactory.<span style="color:#658b00">getLogger</span>(HelloWorld.<span style="color:#658b00">class</span>);
    logger.<span style="color:#658b00">info</span>(<span style="color:#cd5555">&#34;Hello World&#34;</span>);
  }
}
</code></pre></div><p>图示；</p>
<p><img src="images/concrete-bindings.png" alt="images/concrete-bindings.png"></p>
<p>每一个日志的实现框架都有自己的配置文件。使用slf4j以后，<strong>配置文件还是做成日志实现框架自己本身的配置文件；</strong></p>
<h3 id="2遗留问题">2、遗留问题</h3>
<p>a（slf4j+logback）: Spring（commons-logging）、Hibernate（jboss-logging）、MyBatis、xxxx</p>
<p>统一日志记录，即使是别的框架和我一起统一使用slf4j进行输出？</p>
<p><img src="images/legacy.png" alt=""></p>
<p><strong>如何让系统中所有的日志都统一到slf4j；</strong></p>
<p>==1、将系统中其他日志框架先排除出去；==</p>
<p>==2、用中间包来替换原有的日志框架；==</p>
<p>==3、我们导入slf4j其他的实现==</p>
<h2 id="3springboot日志关系">3、SpringBoot日志关系</h2>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml">		<span style="color:#8b008b;font-weight:bold">&lt;dependency&gt;</span>
			<span style="color:#8b008b;font-weight:bold">&lt;groupId&gt;</span>org.springframework.boot<span style="color:#8b008b;font-weight:bold">&lt;/groupId&gt;</span>
			<span style="color:#8b008b;font-weight:bold">&lt;artifactId&gt;</span>spring-boot-starter<span style="color:#8b008b;font-weight:bold">&lt;/artifactId&gt;</span>
		<span style="color:#8b008b;font-weight:bold">&lt;/dependency&gt;</span>
</code></pre></div><p>SpringBoot使用它来做日志功能；</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml">	<span style="color:#8b008b;font-weight:bold">&lt;dependency&gt;</span>
			<span style="color:#8b008b;font-weight:bold">&lt;groupId&gt;</span>org.springframework.boot<span style="color:#8b008b;font-weight:bold">&lt;/groupId&gt;</span>
			<span style="color:#8b008b;font-weight:bold">&lt;artifactId&gt;</span>spring-boot-starter-logging<span style="color:#8b008b;font-weight:bold">&lt;/artifactId&gt;</span>
		<span style="color:#8b008b;font-weight:bold">&lt;/dependency&gt;</span>
</code></pre></div><p>底层依赖关系</p>
<p><img src="images/%E6%90%9C%E7%8B%97%E6%88%AA%E5%9B%BE20180131220946.png" alt=""></p>
<p>总结：</p>
<p>​	1）、SpringBoot底层也是使用slf4j+logback的方式进行日志记录</p>
<p>​	2）、SpringBoot也把其他的日志都替换成了slf4j；</p>
<p>​	3）、中间替换包？</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#707a7c">@SuppressWarnings</span>(<span style="color:#cd5555">&#34;rawtypes&#34;</span>)
<span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#8b008b;font-weight:bold">abstract</span> <span style="color:#8b008b;font-weight:bold">class</span> <span style="color:#008b45;font-weight:bold">LogFactory</span> {

    <span style="color:#8b008b;font-weight:bold">static</span> String UNSUPPORTED_OPERATION_IN_JCL_OVER_SLF4J = <span style="color:#cd5555">&#34;http://www.slf4j.org/codes.html#unsupported_operation_in_jcl_over_slf4j&#34;</span>;

    <span style="color:#8b008b;font-weight:bold">static</span> LogFactory logFactory = <span style="color:#8b008b;font-weight:bold">new</span> SLF4JLogFactory();
</code></pre></div><p><img src="images/%E6%90%9C%E7%8B%97%E6%88%AA%E5%9B%BE20180131221411.png" alt=""></p>
<p>​	4）、如果我们要引入其他框架？一定要把这个框架的默认日志依赖移除掉？</p>
<p>​			Spring框架用的是commons-logging；</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml">		<span style="color:#8b008b;font-weight:bold">&lt;dependency&gt;</span>
			<span style="color:#8b008b;font-weight:bold">&lt;groupId&gt;</span>org.springframework<span style="color:#8b008b;font-weight:bold">&lt;/groupId&gt;</span>
			<span style="color:#8b008b;font-weight:bold">&lt;artifactId&gt;</span>spring-core<span style="color:#8b008b;font-weight:bold">&lt;/artifactId&gt;</span>
			<span style="color:#8b008b;font-weight:bold">&lt;exclusions&gt;</span>
				<span style="color:#8b008b;font-weight:bold">&lt;exclusion&gt;</span>
					<span style="color:#8b008b;font-weight:bold">&lt;groupId&gt;</span>commons-logging<span style="color:#8b008b;font-weight:bold">&lt;/groupId&gt;</span>
					<span style="color:#8b008b;font-weight:bold">&lt;artifactId&gt;</span>commons-logging<span style="color:#8b008b;font-weight:bold">&lt;/artifactId&gt;</span>
				<span style="color:#8b008b;font-weight:bold">&lt;/exclusion&gt;</span>
			<span style="color:#8b008b;font-weight:bold">&lt;/exclusions&gt;</span>
		<span style="color:#8b008b;font-weight:bold">&lt;/dependency&gt;</span>
</code></pre></div><p><strong>==SpringBoot能自动适配所有的日志，而且底层使用slf4j+logback的方式记录日志，引入其他框架的时候，只需要把这个框架依赖的日志框架排除掉即可；==</strong></p>
<h2 id="4日志使用">4、日志使用；</h2>
<h3 id="1默认配置">1、默认配置</h3>
<p>SpringBoot默认帮我们配置好了日志；</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java">	<span style="color:#228b22">//记录器
</span><span style="color:#228b22"></span>	Logger logger = LoggerFactory.<span style="color:#658b00">getLogger</span>(getClass());
	<span style="color:#707a7c">@Test</span>
	<span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#00688b;font-weight:bold">void</span> <span style="color:#008b45">contextLoads</span>() {
		<span style="color:#228b22">//System.out.println();
</span><span style="color:#228b22"></span>
		<span style="color:#228b22">//日志的级别；
</span><span style="color:#228b22"></span>		<span style="color:#228b22">//由低到高   trace&lt;debug&lt;info&lt;warn&lt;error
</span><span style="color:#228b22"></span>		<span style="color:#228b22">//可以调整输出的日志级别；日志就只会在这个级别以以后的高级别生效
</span><span style="color:#228b22"></span>		logger.<span style="color:#658b00">trace</span>(<span style="color:#cd5555">&#34;这是trace日志...&#34;</span>);
		logger.<span style="color:#658b00">debug</span>(<span style="color:#cd5555">&#34;这是debug日志...&#34;</span>);
		<span style="color:#228b22">//SpringBoot默认给我们使用的是info级别的，没有指定级别的就用SpringBoot默认规定的级别；root级别
</span><span style="color:#228b22"></span>		logger.<span style="color:#658b00">info</span>(<span style="color:#cd5555">&#34;这是info日志...&#34;</span>);
		logger.<span style="color:#658b00">warn</span>(<span style="color:#cd5555">&#34;这是warn日志...&#34;</span>);
		logger.<span style="color:#658b00">error</span>(<span style="color:#cd5555">&#34;这是error日志...&#34;</span>);


	}
</code></pre></div><pre><code>    日志输出格式：
        %d表示日期时间，
        %thread表示线程名，
        %-5level：级别从左显示5个字符宽度
        %logger{50} 表示logger名字最长50个字符，否则按照句点分割。 
        %msg：日志消息，
        %n是换行符
    --&gt;
    %d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{50} - %msg%n
</code></pre>
<p>SpringBoot修改日志的默认配置</p>
<pre><code class="language-properties" data-lang="properties">logging.level.com.atguigu=trace


#logging.path=
# 不指定路径在当前项目下生成springboot.log日志
# 可以指定完整的路径；
#logging.file=G:/springboot.log

# 在当前磁盘的根路径下创建spring文件夹和里面的log文件夹；使用 spring.log 作为默认文件
logging.path=/spring/log

#  在控制台输出的日志的格式
logging.pattern.console=%d{yyyy-MM-dd} [%thread] %-5level %logger{50} - %msg%n
# 指定文件中日志输出的格式
logging.pattern.file=%d{yyyy-MM-dd} === [%thread] === %-5level === %logger{50} ==== %msg%n
</code></pre><table class='pure-table pure-table-striped'>
<thead>
<tr>
<th>logging.file</th>
<th>logging.path</th>
<th>Example</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>(none)</td>
<td>(none)</td>
<td></td>
<td>只在控制台输出</td>
</tr>
<tr>
<td>指定文件名</td>
<td>(none)</td>
<td>my.log</td>
<td>输出日志到my.log文件</td>
</tr>
<tr>
<td>(none)</td>
<td>指定目录</td>
<td>/var/log</td>
<td>输出到指定目录的 spring.log 文件中</td>
</tr>
</tbody>
</table>
<h3 id="2指定配置">2、指定配置</h3>
<p>给类路径下放上每个日志框架自己的配置文件即可；SpringBoot就不使用他默认配置的了</p>
<table class='pure-table pure-table-striped'>
<thead>
<tr>
<th>Logging System</th>
<th>Customization</th>
</tr>
</thead>
<tbody>
<tr>
<td>Logback</td>
<td><code>logback-spring.xml</code>, <code>logback-spring.groovy</code>, <code>logback.xml</code> or <code>logback.groovy</code></td>
</tr>
<tr>
<td>Log4j2</td>
<td><code>log4j2-spring.xml</code> or <code>log4j2.xml</code></td>
</tr>
<tr>
<td>JDK (Java Util Logging)</td>
<td><code>logging.properties</code></td>
</tr>
</tbody>
</table>
<p>logback.xml：直接就被日志框架识别了；</p>
<p><strong>logback-spring.xml</strong>：日志框架就不直接加载日志的配置项，由SpringBoot解析日志配置，可以使用SpringBoot的高级Profile功能</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml"><span style="color:#8b008b;font-weight:bold">&lt;springProfile</span> <span style="color:#658b00">name=</span><span style="color:#cd5555">&#34;staging&#34;</span><span style="color:#8b008b;font-weight:bold">&gt;</span>
    <span style="color:#228b22">&lt;!-- configuration to be enabled when the &#34;staging&#34; profile is active --&gt;</span>
  	可以指定某段配置只在某个环境下生效
<span style="color:#8b008b;font-weight:bold">&lt;/springProfile&gt;</span>

</code></pre></div><p>如：</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml"><span style="color:#8b008b;font-weight:bold">&lt;appender</span> <span style="color:#658b00">name=</span><span style="color:#cd5555">&#34;stdout&#34;</span> <span style="color:#658b00">class=</span><span style="color:#cd5555">&#34;ch.qos.logback.core.ConsoleAppender&#34;</span><span style="color:#8b008b;font-weight:bold">&gt;</span>
        <span style="color:#228b22">&lt;!--
</span><span style="color:#228b22">        日志输出格式：
</span><span style="color:#228b22">			%d表示日期时间，
</span><span style="color:#228b22">			%thread表示线程名，
</span><span style="color:#228b22">			%-5level：级别从左显示5个字符宽度
</span><span style="color:#228b22">			%logger{50} 表示logger名字最长50个字符，否则按照句点分割。 
</span><span style="color:#228b22">			%msg：日志消息，
</span><span style="color:#228b22">			%n是换行符
</span><span style="color:#228b22">        --&gt;</span>
        <span style="color:#8b008b;font-weight:bold">&lt;layout</span> <span style="color:#658b00">class=</span><span style="color:#cd5555">&#34;ch.qos.logback.classic.PatternLayout&#34;</span><span style="color:#8b008b;font-weight:bold">&gt;</span>
            <span style="color:#8b008b;font-weight:bold">&lt;springProfile</span> <span style="color:#658b00">name=</span><span style="color:#cd5555">&#34;dev&#34;</span><span style="color:#8b008b;font-weight:bold">&gt;</span>
                <span style="color:#8b008b;font-weight:bold">&lt;pattern&gt;</span>%d{yyyy-MM-dd HH:mm:ss.SSS} ----&gt; [%thread] ---&gt; %-5level %logger{50} - %msg%n<span style="color:#8b008b;font-weight:bold">&lt;/pattern&gt;</span>
            <span style="color:#8b008b;font-weight:bold">&lt;/springProfile&gt;</span>
            <span style="color:#8b008b;font-weight:bold">&lt;springProfile</span> <span style="color:#658b00">name=</span><span style="color:#cd5555">&#34;!dev&#34;</span><span style="color:#8b008b;font-weight:bold">&gt;</span>
                <span style="color:#8b008b;font-weight:bold">&lt;pattern&gt;</span>%d{yyyy-MM-dd HH:mm:ss.SSS} ==== [%thread] ==== %-5level %logger{50} - %msg%n<span style="color:#8b008b;font-weight:bold">&lt;/pattern&gt;</span>
            <span style="color:#8b008b;font-weight:bold">&lt;/springProfile&gt;</span>
        <span style="color:#8b008b;font-weight:bold">&lt;/layout&gt;</span>
    <span style="color:#8b008b;font-weight:bold">&lt;/appender&gt;</span>
</code></pre></div><p>如果使用logback.xml作为日志配置文件，还要使用profile功能，会有以下错误</p>
<p><code>no applicable action for [springProfile]</code></p>
<h2 id="5切换日志框架">5、切换日志框架</h2>
<p>可以按照slf4j的日志适配图，进行相关的切换；</p>
<p>slf4j+log4j的方式；</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml"><span style="color:#8b008b;font-weight:bold">&lt;dependency&gt;</span>
  <span style="color:#8b008b;font-weight:bold">&lt;groupId&gt;</span>org.springframework.boot<span style="color:#8b008b;font-weight:bold">&lt;/groupId&gt;</span>
  <span style="color:#8b008b;font-weight:bold">&lt;artifactId&gt;</span>spring-boot-starter-web<span style="color:#8b008b;font-weight:bold">&lt;/artifactId&gt;</span>
  <span style="color:#8b008b;font-weight:bold">&lt;exclusions&gt;</span>
    <span style="color:#8b008b;font-weight:bold">&lt;exclusion&gt;</span>
      <span style="color:#8b008b;font-weight:bold">&lt;artifactId&gt;</span>logback-classic<span style="color:#8b008b;font-weight:bold">&lt;/artifactId&gt;</span>
      <span style="color:#8b008b;font-weight:bold">&lt;groupId&gt;</span>ch.qos.logback<span style="color:#8b008b;font-weight:bold">&lt;/groupId&gt;</span>
    <span style="color:#8b008b;font-weight:bold">&lt;/exclusion&gt;</span>
    <span style="color:#8b008b;font-weight:bold">&lt;exclusion&gt;</span>
      <span style="color:#8b008b;font-weight:bold">&lt;artifactId&gt;</span>log4j-over-slf4j<span style="color:#8b008b;font-weight:bold">&lt;/artifactId&gt;</span>
      <span style="color:#8b008b;font-weight:bold">&lt;groupId&gt;</span>org.slf4j<span style="color:#8b008b;font-weight:bold">&lt;/groupId&gt;</span>
    <span style="color:#8b008b;font-weight:bold">&lt;/exclusion&gt;</span>
  <span style="color:#8b008b;font-weight:bold">&lt;/exclusions&gt;</span>
<span style="color:#8b008b;font-weight:bold">&lt;/dependency&gt;</span>

<span style="color:#8b008b;font-weight:bold">&lt;dependency&gt;</span>
  <span style="color:#8b008b;font-weight:bold">&lt;groupId&gt;</span>org.slf4j<span style="color:#8b008b;font-weight:bold">&lt;/groupId&gt;</span>
  <span style="color:#8b008b;font-weight:bold">&lt;artifactId&gt;</span>slf4j-log4j12<span style="color:#8b008b;font-weight:bold">&lt;/artifactId&gt;</span>
<span style="color:#8b008b;font-weight:bold">&lt;/dependency&gt;</span>

</code></pre></div><p>切换为log4j2</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml">   <span style="color:#8b008b;font-weight:bold">&lt;dependency&gt;</span>
            <span style="color:#8b008b;font-weight:bold">&lt;groupId&gt;</span>org.springframework.boot<span style="color:#8b008b;font-weight:bold">&lt;/groupId&gt;</span>
            <span style="color:#8b008b;font-weight:bold">&lt;artifactId&gt;</span>spring-boot-starter-web<span style="color:#8b008b;font-weight:bold">&lt;/artifactId&gt;</span>
            <span style="color:#8b008b;font-weight:bold">&lt;exclusions&gt;</span>
                <span style="color:#8b008b;font-weight:bold">&lt;exclusion&gt;</span>
                    <span style="color:#8b008b;font-weight:bold">&lt;artifactId&gt;</span>spring-boot-starter-logging<span style="color:#8b008b;font-weight:bold">&lt;/artifactId&gt;</span>
                    <span style="color:#8b008b;font-weight:bold">&lt;groupId&gt;</span>org.springframework.boot<span style="color:#8b008b;font-weight:bold">&lt;/groupId&gt;</span>
                <span style="color:#8b008b;font-weight:bold">&lt;/exclusion&gt;</span>
            <span style="color:#8b008b;font-weight:bold">&lt;/exclusions&gt;</span>
        <span style="color:#8b008b;font-weight:bold">&lt;/dependency&gt;</span>

<span style="color:#8b008b;font-weight:bold">&lt;dependency&gt;</span>
  <span style="color:#8b008b;font-weight:bold">&lt;groupId&gt;</span>org.springframework.boot<span style="color:#8b008b;font-weight:bold">&lt;/groupId&gt;</span>
  <span style="color:#8b008b;font-weight:bold">&lt;artifactId&gt;</span>spring-boot-starter-log4j2<span style="color:#8b008b;font-weight:bold">&lt;/artifactId&gt;</span>
<span style="color:#8b008b;font-weight:bold">&lt;/dependency&gt;</span>
</code></pre></div><hr>
<h1 id="四web开发">四、Web开发</h1>
<h2 id="1简介">1、简介</h2>
<p>使用SpringBoot；</p>
<p><strong>1）、创建SpringBoot应用，选中我们需要的模块；</strong></p>
<p><strong>2）、SpringBoot已经默认将这些场景配置好了，只需要在配置文件中指定少量配置就可以运行起来</strong></p>
<p><strong>3）、自己编写业务代码；</strong></p>
<p><strong>自动配置原理？</strong></p>
<p>这个场景SpringBoot帮我们配置了什么？能不能修改？能修改哪些配置？能不能扩展？xxx</p>
<pre><code>xxxxAutoConfiguration：帮我们给容器中自动配置组件；
xxxxProperties:配置类来封装配置文件的内容；

</code></pre><h2 id="2springboot对静态资源的映射规则">2、SpringBoot对静态资源的映射规则；</h2>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#707a7c">@ConfigurationProperties</span>(prefix = <span style="color:#cd5555">&#34;spring.resources&#34;</span>, ignoreUnknownFields = <span style="color:#8b008b;font-weight:bold">false</span>)
<span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#8b008b;font-weight:bold">class</span> <span style="color:#008b45;font-weight:bold">ResourceProperties</span> <span style="color:#8b008b;font-weight:bold">implements</span> ResourceLoaderAware {
  <span style="color:#228b22">//可以设置和静态资源有关的参数，缓存时间等
</span></code></pre></div><div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java">	WebMvcAuotConfiguration<span style="color:#a61717;background-color:#e3d2d2">：</span>
		<span style="color:#707a7c">@Override</span>
		<span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#00688b;font-weight:bold">void</span> <span style="color:#008b45">addResourceHandlers</span>(ResourceHandlerRegistry registry) {
			<span style="color:#8b008b;font-weight:bold">if</span> (!<span style="color:#8b008b;font-weight:bold">this</span>.<span style="color:#658b00">resourceProperties</span>.<span style="color:#658b00">isAddMappings</span>()) {
				logger.<span style="color:#658b00">debug</span>(<span style="color:#cd5555">&#34;Default resource handling disabled&#34;</span>);
				<span style="color:#8b008b;font-weight:bold">return</span>;
			}
			Integer cachePeriod = <span style="color:#8b008b;font-weight:bold">this</span>.<span style="color:#658b00">resourceProperties</span>.<span style="color:#658b00">getCachePeriod</span>();
			<span style="color:#8b008b;font-weight:bold">if</span> (!registry.<span style="color:#658b00">hasMappingForPattern</span>(<span style="color:#cd5555">&#34;/webjars/**&#34;</span>)) {
				customizeResourceHandlerRegistration(
						registry.<span style="color:#658b00">addResourceHandler</span>(<span style="color:#cd5555">&#34;/webjars/**&#34;</span>)
								.<span style="color:#658b00">addResourceLocations</span>(
										<span style="color:#cd5555">&#34;classpath:/META-INF/resources/webjars/&#34;</span>)
						.<span style="color:#658b00">setCachePeriod</span>(cachePeriod));
			}
			String staticPathPattern = <span style="color:#8b008b;font-weight:bold">this</span>.<span style="color:#658b00">mvcProperties</span>.<span style="color:#658b00">getStaticPathPattern</span>();
          	<span style="color:#228b22">//静态资源文件夹映射
</span><span style="color:#228b22"></span>			<span style="color:#8b008b;font-weight:bold">if</span> (!registry.<span style="color:#658b00">hasMappingForPattern</span>(staticPathPattern)) {
				customizeResourceHandlerRegistration(
						registry.<span style="color:#658b00">addResourceHandler</span>(staticPathPattern)
								.<span style="color:#658b00">addResourceLocations</span>(
										<span style="color:#8b008b;font-weight:bold">this</span>.<span style="color:#658b00">resourceProperties</span>.<span style="color:#658b00">getStaticLocations</span>())
						.<span style="color:#658b00">setCachePeriod</span>(cachePeriod));
			}
		}

        <span style="color:#228b22">//配置欢迎页映射
</span><span style="color:#228b22"></span>		<span style="color:#707a7c">@Bean</span>
		<span style="color:#8b008b;font-weight:bold">public</span> WelcomePageHandlerMapping <span style="color:#008b45">welcomePageHandlerMapping</span>(
				ResourceProperties resourceProperties) {
			<span style="color:#8b008b;font-weight:bold">return</span> <span style="color:#8b008b;font-weight:bold">new</span> WelcomePageHandlerMapping(resourceProperties.<span style="color:#658b00">getWelcomePage</span>(),
					<span style="color:#8b008b;font-weight:bold">this</span>.<span style="color:#658b00">mvcProperties</span>.<span style="color:#658b00">getStaticPathPattern</span>());
		}

       <span style="color:#228b22">//配置喜欢的图标
</span><span style="color:#228b22"></span>		<span style="color:#707a7c">@Configuration</span>
		<span style="color:#707a7c">@ConditionalOnProperty</span>(value = <span style="color:#cd5555">&#34;spring.mvc.favicon.enabled&#34;</span>, matchIfMissing = <span style="color:#8b008b;font-weight:bold">true</span>)
		<span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#8b008b;font-weight:bold">static</span> <span style="color:#8b008b;font-weight:bold">class</span> <span style="color:#008b45;font-weight:bold">FaviconConfiguration</span> {

			<span style="color:#8b008b;font-weight:bold">private</span> <span style="color:#8b008b;font-weight:bold">final</span> ResourceProperties resourceProperties;

			<span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#008b45">FaviconConfiguration</span>(ResourceProperties resourceProperties) {
				<span style="color:#8b008b;font-weight:bold">this</span>.<span style="color:#658b00">resourceProperties</span> = resourceProperties;
			}

			<span style="color:#707a7c">@Bean</span>
			<span style="color:#8b008b;font-weight:bold">public</span> SimpleUrlHandlerMapping <span style="color:#008b45">faviconHandlerMapping</span>() {
				SimpleUrlHandlerMapping mapping = <span style="color:#8b008b;font-weight:bold">new</span> SimpleUrlHandlerMapping();
				mapping.<span style="color:#658b00">setOrder</span>(Ordered.<span style="color:#658b00">HIGHEST_PRECEDENCE</span> + 1);
              	<span style="color:#228b22">//所有  **/favicon.ico 
</span><span style="color:#228b22"></span>				mapping.<span style="color:#658b00">setUrlMap</span>(Collections.<span style="color:#658b00">singletonMap</span>(<span style="color:#cd5555">&#34;**/favicon.ico&#34;</span>,
						faviconRequestHandler()));
				<span style="color:#8b008b;font-weight:bold">return</span> mapping;
			}

			<span style="color:#707a7c">@Bean</span>
			<span style="color:#8b008b;font-weight:bold">public</span> ResourceHttpRequestHandler <span style="color:#008b45">faviconRequestHandler</span>() {
				ResourceHttpRequestHandler requestHandler = <span style="color:#8b008b;font-weight:bold">new</span> ResourceHttpRequestHandler();
				requestHandler
						.<span style="color:#658b00">setLocations</span>(<span style="color:#8b008b;font-weight:bold">this</span>.<span style="color:#658b00">resourceProperties</span>.<span style="color:#658b00">getFaviconLocations</span>());
				<span style="color:#8b008b;font-weight:bold">return</span> requestHandler;
			}

		}

</code></pre></div><p>==1）、所有 /webjars/** ，都去 classpath:/META-INF/resources/webjars/ 找资源；==</p>
<p>​	webjars：以jar包的方式引入静态资源；</p>
<p><a href="http://www.webjars.org/">http://www.webjars.org/</a></p>
<p><img src="images/%E6%90%9C%E7%8B%97%E6%88%AA%E5%9B%BE20180203181751.png" alt=""></p>
<p>localhost:8080/webjars/jquery/3.3.1/jquery.js</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml"><span style="color:#228b22">&lt;!--引入jquery-webjar--&gt;</span>在访问的时候只需要写webjars下面资源的名称即可
		<span style="color:#8b008b;font-weight:bold">&lt;dependency&gt;</span>
			<span style="color:#8b008b;font-weight:bold">&lt;groupId&gt;</span>org.webjars<span style="color:#8b008b;font-weight:bold">&lt;/groupId&gt;</span>
			<span style="color:#8b008b;font-weight:bold">&lt;artifactId&gt;</span>jquery<span style="color:#8b008b;font-weight:bold">&lt;/artifactId&gt;</span>
			<span style="color:#8b008b;font-weight:bold">&lt;version&gt;</span>3.3.1<span style="color:#8b008b;font-weight:bold">&lt;/version&gt;</span>
		<span style="color:#8b008b;font-weight:bold">&lt;/dependency&gt;</span>
</code></pre></div><p>==2）、&quot;/**&rdquo; 访问当前项目的任何资源，都去（静态资源的文件夹）找映射==</p>
<pre><code>&quot;classpath:/META-INF/resources/&quot;, 
&quot;classpath:/resources/&quot;,
&quot;classpath:/static/&quot;, 
&quot;classpath:/public/&quot; 
&quot;/&quot;：当前项目的根路径
</code></pre><p>localhost:8080/abc ===  去静态资源文件夹里面找abc</p>
<p>==3）、欢迎页； 静态资源文件夹下的所有index.html页面；被&rdquo;/**&ldquo;映射；==</p>
<p>​	localhost:8080/   找index页面</p>
<p>==4）、所有的 **/favicon.ico  都是在静态资源文件下找；==</p>
<h2 id="3模板引擎">3、模板引擎</h2>
<p>JSP、Velocity、Freemarker、Thymeleaf</p>
<p><img src="images/template-engine.png" alt=""></p>
<p>SpringBoot推荐的Thymeleaf；</p>
<p>语法更简单，功能更强大；</p>
<h3 id="1引入thymeleaf">1、引入thymeleaf；</h3>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml">		<span style="color:#8b008b;font-weight:bold">&lt;dependency&gt;</span>
			<span style="color:#8b008b;font-weight:bold">&lt;groupId&gt;</span>org.springframework.boot<span style="color:#8b008b;font-weight:bold">&lt;/groupId&gt;</span>
			<span style="color:#8b008b;font-weight:bold">&lt;artifactId&gt;</span>spring-boot-starter-thymeleaf<span style="color:#8b008b;font-weight:bold">&lt;/artifactId&gt;</span>
          	2.1.6
		<span style="color:#8b008b;font-weight:bold">&lt;/dependency&gt;</span>
切换thymeleaf版本
<span style="color:#8b008b;font-weight:bold">&lt;properties&gt;</span>
		<span style="color:#8b008b;font-weight:bold">&lt;thymeleaf.version&gt;</span>3.0.9.RELEASE<span style="color:#8b008b;font-weight:bold">&lt;/thymeleaf.version&gt;</span>
		<span style="color:#228b22">&lt;!-- 布局功能的支持程序  thymeleaf3主程序  layout2以上版本 --&gt;</span>
		<span style="color:#228b22">&lt;!-- thymeleaf2   layout1--&gt;</span>
		<span style="color:#8b008b;font-weight:bold">&lt;thymeleaf-layout-dialect.version&gt;</span>2.2.2<span style="color:#8b008b;font-weight:bold">&lt;/thymeleaf-layout-dialect.version&gt;</span>
  <span style="color:#8b008b;font-weight:bold">&lt;/properties&gt;</span>
</code></pre></div><h3 id="2thymeleaf使用">2、Thymeleaf使用</h3>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#707a7c">@ConfigurationProperties</span>(prefix = <span style="color:#cd5555">&#34;spring.thymeleaf&#34;</span>)
<span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#8b008b;font-weight:bold">class</span> <span style="color:#008b45;font-weight:bold">ThymeleafProperties</span> {

	<span style="color:#8b008b;font-weight:bold">private</span> <span style="color:#8b008b;font-weight:bold">static</span> <span style="color:#8b008b;font-weight:bold">final</span> Charset DEFAULT_ENCODING = Charset.<span style="color:#658b00">forName</span>(<span style="color:#cd5555">&#34;UTF-8&#34;</span>);

	<span style="color:#8b008b;font-weight:bold">private</span> <span style="color:#8b008b;font-weight:bold">static</span> <span style="color:#8b008b;font-weight:bold">final</span> MimeType DEFAULT_CONTENT_TYPE = MimeType.<span style="color:#658b00">valueOf</span>(<span style="color:#cd5555">&#34;text/html&#34;</span>);

	<span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#8b008b;font-weight:bold">static</span> <span style="color:#8b008b;font-weight:bold">final</span> String DEFAULT_PREFIX = <span style="color:#cd5555">&#34;classpath:/templates/&#34;</span>;

	<span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#8b008b;font-weight:bold">static</span> <span style="color:#8b008b;font-weight:bold">final</span> String DEFAULT_SUFFIX = <span style="color:#cd5555">&#34;.html&#34;</span>;
  	<span style="color:#228b22">//
</span></code></pre></div><p>只要我们把HTML页面放在classpath:/templates/，thymeleaf就能自动渲染；</p>
<p>使用：</p>
<p>1、导入thymeleaf的名称空间</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml"><span style="color:#8b008b;font-weight:bold">&lt;html</span> <span style="color:#658b00">lang=</span><span style="color:#cd5555">&#34;en&#34;</span> <span style="color:#658b00">xmlns:th=</span><span style="color:#cd5555">&#34;http://www.thymeleaf.org&#34;</span><span style="color:#8b008b;font-weight:bold">&gt;</span>
</code></pre></div><p>2、使用thymeleaf语法；</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-html" data-lang="html"><span style="color:#1e889b">&lt;!DOCTYPE html&gt;</span>
&lt;<span style="color:#8b008b;font-weight:bold">html</span> <span style="color:#658b00">lang</span>=<span style="color:#cd5555">&#34;en&#34;</span> <span style="color:#658b00">xmlns:th</span>=<span style="color:#cd5555">&#34;http://www.thymeleaf.org&#34;</span>&gt;
&lt;<span style="color:#8b008b;font-weight:bold">head</span>&gt;
    &lt;<span style="color:#8b008b;font-weight:bold">meta</span> <span style="color:#658b00">charset</span>=<span style="color:#cd5555">&#34;UTF-8&#34;</span>&gt;
    &lt;<span style="color:#8b008b;font-weight:bold">title</span>&gt;Title&lt;/<span style="color:#8b008b;font-weight:bold">title</span>&gt;
&lt;/<span style="color:#8b008b;font-weight:bold">head</span>&gt;
&lt;<span style="color:#8b008b;font-weight:bold">body</span>&gt;
    &lt;<span style="color:#8b008b;font-weight:bold">h1</span>&gt;成功！&lt;/<span style="color:#8b008b;font-weight:bold">h1</span>&gt;
    <span style="color:#228b22">&lt;!--th:text 将div里面的文本内容设置为 --&gt;</span>
    &lt;<span style="color:#8b008b;font-weight:bold">div</span> <span style="color:#658b00">th:text</span>=<span style="color:#cd5555">&#34;${hello}&#34;</span>&gt;这是显示欢迎信息&lt;/<span style="color:#8b008b;font-weight:bold">div</span>&gt;
&lt;/<span style="color:#8b008b;font-weight:bold">body</span>&gt;
&lt;/<span style="color:#8b008b;font-weight:bold">html</span>&gt;
</code></pre></div><h3 id="3语法规则">3、语法规则</h3>
<p>1）、th:text；改变当前元素里面的文本内容；</p>
<p>​	th：任意html属性；来替换原生属性的值</p>
<p><img src="images/2018-02-04_123955.png" alt=""></p>
<p>2）、表达式？</p>
<pre><code class="language-properties" data-lang="properties">Simple expressions:（表达式语法）
    Variable Expressions: ${...}：获取变量值；OGNL；
    		1）、获取对象的属性、调用方法
    		2）、使用内置的基本对象：
    			#ctx : the context object.
    			#vars: the context variables.
                #locale : the context locale.
                #request : (only in Web Contexts) the HttpServletRequest object.
                #response : (only in Web Contexts) the HttpServletResponse object.
                #session : (only in Web Contexts) the HttpSession object.
                #servletContext : (only in Web Contexts) the ServletContext object.
                
                ${session.foo}
            3）、内置的一些工具对象：
#execInfo : information about the template being processed.
#messages : methods for obtaining externalized messages inside variables expressions, in the same way as they would be obtained using #{…} syntax.
#uris : methods for escaping parts of URLs/URIs
#conversions : methods for executing the configured conversion service (if any).
#dates : methods for java.util.Date objects: formatting, component extraction, etc.
#calendars : analogous to #dates , but for java.util.Calendar objects.
#numbers : methods for formatting numeric objects.
#strings : methods for String objects: contains, startsWith, prepending/appending, etc.
#objects : methods for objects in general.
#bools : methods for boolean evaluation.
#arrays : methods for arrays.
#lists : methods for lists.
#sets : methods for sets.
#maps : methods for maps.
#aggregates : methods for creating aggregates on arrays or collections.
#ids : methods for dealing with id attributes that might be repeated (for example, as a result of an iteration).

    Selection Variable Expressions: *{...}：选择表达式：和${}在功能上是一样；
    	补充：配合 th:object=&quot;${session.user}：
   &lt;div th:object=&quot;${session.user}&quot;&gt;
    &lt;p&gt;Name: &lt;span th:text=&quot;*{firstName}&quot;&gt;Sebastian&lt;/span&gt;.&lt;/p&gt;
    &lt;p&gt;Surname: &lt;span th:text=&quot;*{lastName}&quot;&gt;Pepper&lt;/span&gt;.&lt;/p&gt;
    &lt;p&gt;Nationality: &lt;span th:text=&quot;*{nationality}&quot;&gt;Saturn&lt;/span&gt;.&lt;/p&gt;
    &lt;/div&gt;
    
    Message Expressions: #{...}：获取国际化内容
    Link URL Expressions: @{...}：定义URL；
    		@{/order/process(execId=${execId},execType='FAST')}
    Fragment Expressions: ~{...}：片段引用表达式
    		&lt;div th:insert=&quot;~{commons :: main}&quot;&gt;...&lt;/div&gt;
    		
Literals（字面量）
      Text literals: 'one text' , 'Another one!' ,…
      Number literals: 0 , 34 , 3.0 , 12.3 ,…
      Boolean literals: true , false
      Null literal: null
      Literal tokens: one , sometext , main ,…
Text operations:（文本操作）
    String concatenation: +
    Literal substitutions: |The name is ${name}|
Arithmetic operations:（数学运算）
    Binary operators: + , - , * , / , %
    Minus sign (unary operator): -
Boolean operations:（布尔运算）
    Binary operators: and , or
    Boolean negation (unary operator): ! , not
Comparisons and equality:（比较运算）
    Comparators: &gt; , &lt; , &gt;= , &lt;= ( gt , lt , ge , le )
    Equality operators: == , != ( eq , ne )
Conditional operators:条件运算（三元运算符）
    If-then: (if) ? (then)
    If-then-else: (if) ? (then) : (else)
    Default: (value) ?: (defaultvalue)
Special tokens:
    No-Operation: _ 
</code></pre><h2 id="4springmvc自动配置">4、SpringMVC自动配置</h2>
<p><a href="https://docs.spring.io/spring-boot/docs/1.5.10.RELEASE/reference/htmlsingle/#boot-features-developing-web-applications">https://docs.spring.io/spring-boot/docs/1.5.10.RELEASE/reference/htmlsingle/#boot-features-developing-web-applications</a></p>
<h3 id="1-spring-mvc-auto-configuration">1. Spring MVC auto-configuration</h3>
<p>Spring Boot 自动配置好了SpringMVC</p>
<p>以下是SpringBoot对SpringMVC的默认配置:<strong>==（WebMvcAutoConfiguration）==</strong></p>
<ul>
<li>
<p>Inclusion of <code>ContentNegotiatingViewResolver</code> and <code>BeanNameViewResolver</code> beans.</p>
<ul>
<li>自动配置了ViewResolver（视图解析器：根据方法的返回值得到视图对象（View），视图对象决定如何渲染（转发？重定向？））</li>
<li>ContentNegotiatingViewResolver：组合所有的视图解析器的；</li>
<li>==如何定制：我们可以自己给容器中添加一个视图解析器；自动的将其组合进来；==</li>
</ul>
</li>
<li>
<p>Support for serving static resources, including support for WebJars (see below).静态资源文件夹路径,webjars</p>
</li>
<li>
<p>Static <code>index.html</code> support. 静态首页访问</p>
</li>
<li>
<p>Custom <code>Favicon</code> support (see below).  favicon.ico</p>
</li>
<li>
<p>自动注册了 of <code>Converter</code>, <code>GenericConverter</code>, <code>Formatter</code> beans.</p>
<ul>
<li>Converter：转换器；  public String hello(User user)：类型转换使用Converter</li>
<li><code>Formatter</code>  格式化器；  2017.12.17===Date；</li>
</ul>
</li>
</ul>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java">		<span style="color:#707a7c">@Bean</span>
		<span style="color:#707a7c">@ConditionalOnProperty</span>(prefix = <span style="color:#cd5555">&#34;spring.mvc&#34;</span>, name = <span style="color:#cd5555">&#34;date-format&#34;</span>)<span style="color:#228b22">//在文件中配置日期格式化的规则
</span><span style="color:#228b22"></span>		<span style="color:#8b008b;font-weight:bold">public</span> Formatter&lt;Date&gt; <span style="color:#008b45">dateFormatter</span>() {
			<span style="color:#8b008b;font-weight:bold">return</span> <span style="color:#8b008b;font-weight:bold">new</span> DateFormatter(<span style="color:#8b008b;font-weight:bold">this</span>.<span style="color:#658b00">mvcProperties</span>.<span style="color:#658b00">getDateFormat</span>());<span style="color:#228b22">//日期格式化组件
</span><span style="color:#228b22"></span>		}
</code></pre></div><p>​	==自己添加的格式化器转换器，我们只需要放在容器中即可==</p>
<ul>
<li>
<p>Support for <code>HttpMessageConverters</code> (see below).</p>
<ul>
<li>
<p>HttpMessageConverter：SpringMVC用来转换Http请求和响应的；User&mdash;Json；</p>
</li>
<li>
<p><code>HttpMessageConverters</code> 是从容器中确定；获取所有的HttpMessageConverter；</p>
<p>==自己给容器中添加HttpMessageConverter，只需要将自己的组件注册容器中（@Bean,@Component）==</p>
</li>
</ul>
</li>
<li>
<p>Automatic registration of <code>MessageCodesResolver</code> (see below).定义错误代码生成规则</p>
</li>
<li>
<p>Automatic use of a <code>ConfigurableWebBindingInitializer</code> bean (see below).</p>
<p>==我们可以配置一个ConfigurableWebBindingInitializer来替换默认的；（添加到容器）==</p>
<pre><code>初始化WebDataBinder；
请求数据=====JavaBean；
</code></pre></li>
</ul>
<p><strong>org.springframework.boot.autoconfigure.web：web的所有自动场景；</strong></p>
<p>If you want to keep Spring Boot MVC features, and you just want to add additional <a href="https://docs.spring.io/spring/docs/4.3.14.RELEASE/spring-framework-reference/htmlsingle#mvc">MVC configuration</a> (interceptors, formatters, view controllers etc.) you can add your own <code>@Configuration</code> class of type <code>WebMvcConfigurerAdapter</code>, but <strong>without</strong> <code>@EnableWebMvc</code>. If you wish to provide custom instances of <code>RequestMappingHandlerMapping</code>, <code>RequestMappingHandlerAdapter</code> or <code>ExceptionHandlerExceptionResolver</code> you can declare a <code>WebMvcRegistrationsAdapter</code> instance providing such components.</p>
<p>If you want to take complete control of Spring MVC, you can add your own <code>@Configuration</code> annotated with <code>@EnableWebMvc</code>.</p>
<h3 id="2扩展springmvc">2、扩展SpringMVC</h3>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml">    <span style="color:#8b008b;font-weight:bold">&lt;mvc:view-controller</span> <span style="color:#658b00">path=</span><span style="color:#cd5555">&#34;/hello&#34;</span> <span style="color:#658b00">view-name=</span><span style="color:#cd5555">&#34;success&#34;</span><span style="color:#8b008b;font-weight:bold">/&gt;</span>
    <span style="color:#8b008b;font-weight:bold">&lt;mvc:interceptors&gt;</span>
        <span style="color:#8b008b;font-weight:bold">&lt;mvc:interceptor&gt;</span>
            <span style="color:#8b008b;font-weight:bold">&lt;mvc:mapping</span> <span style="color:#658b00">path=</span><span style="color:#cd5555">&#34;/hello&#34;</span><span style="color:#8b008b;font-weight:bold">/&gt;</span>
            <span style="color:#8b008b;font-weight:bold">&lt;bean&gt;&lt;/bean&gt;</span>
        <span style="color:#8b008b;font-weight:bold">&lt;/mvc:interceptor&gt;</span>
    <span style="color:#8b008b;font-weight:bold">&lt;/mvc:interceptors&gt;</span>
</code></pre></div><p><strong>==编写一个配置类（@Configuration），是WebMvcConfigurerAdapter类型；不能标注@EnableWebMvc==</strong>;</p>
<p>既保留了所有的自动配置，也能用我们扩展的配置；</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#228b22">//使用WebMvcConfigurerAdapter可以来扩展SpringMVC的功能
</span><span style="color:#228b22"></span><span style="color:#707a7c">@Configuration</span>
<span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#8b008b;font-weight:bold">class</span> <span style="color:#008b45;font-weight:bold">MyMvcConfig</span> <span style="color:#8b008b;font-weight:bold">extends</span> WebMvcConfigurerAdapter {

    <span style="color:#707a7c">@Override</span>
    <span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#00688b;font-weight:bold">void</span> <span style="color:#008b45">addViewControllers</span>(ViewControllerRegistry registry) {
       <span style="color:#228b22">// super.addViewControllers(registry);
</span><span style="color:#228b22"></span>        <span style="color:#228b22">//浏览器发送 /atguigu 请求来到 success
</span><span style="color:#228b22"></span>        registry.<span style="color:#658b00">addViewController</span>(<span style="color:#cd5555">&#34;/atguigu&#34;</span>).<span style="color:#658b00">setViewName</span>(<span style="color:#cd5555">&#34;success&#34;</span>);
    }
}
</code></pre></div><p>原理：</p>
<p>​	1）、WebMvcAutoConfiguration是SpringMVC的自动配置类</p>
<p>​	2）、在做其他自动配置时会导入；@Import(<strong>EnableWebMvcConfiguration</strong>.class)</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java">    <span style="color:#707a7c">@Configuration</span>
	<span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#8b008b;font-weight:bold">static</span> <span style="color:#8b008b;font-weight:bold">class</span> <span style="color:#008b45;font-weight:bold">EnableWebMvcConfiguration</span> <span style="color:#8b008b;font-weight:bold">extends</span> DelegatingWebMvcConfiguration {
      <span style="color:#8b008b;font-weight:bold">private</span> <span style="color:#8b008b;font-weight:bold">final</span> WebMvcConfigurerComposite configurers = <span style="color:#8b008b;font-weight:bold">new</span> WebMvcConfigurerComposite();

	 <span style="color:#228b22">//从容器中获取所有的WebMvcConfigurer
</span><span style="color:#228b22"></span>      <span style="color:#707a7c">@Autowired</span>(required = <span style="color:#8b008b;font-weight:bold">false</span>)
      <span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#00688b;font-weight:bold">void</span> <span style="color:#008b45">setConfigurers</span>(List&lt;WebMvcConfigurer&gt; configurers) {
          <span style="color:#8b008b;font-weight:bold">if</span> (!CollectionUtils.<span style="color:#658b00">isEmpty</span>(configurers)) {
              <span style="color:#8b008b;font-weight:bold">this</span>.<span style="color:#658b00">configurers</span>.<span style="color:#658b00">addWebMvcConfigurers</span>(configurers);
            	<span style="color:#228b22">//一个参考实现；将所有的WebMvcConfigurer相关配置都来一起调用；  
</span><span style="color:#228b22"></span>            	<span style="color:#707a7c">@Override</span>
             <span style="color:#228b22">// public void addViewControllers(ViewControllerRegistry registry) {
</span><span style="color:#228b22"></span>              <span style="color:#228b22">//    for (WebMvcConfigurer delegate : this.delegates) {
</span><span style="color:#228b22"></span>               <span style="color:#228b22">//       delegate.addViewControllers(registry);
</span><span style="color:#228b22"></span>               <span style="color:#228b22">//   }
</span><span style="color:#228b22"></span>              }
          }
	}
</code></pre></div><p>​	3）、容器中所有的WebMvcConfigurer都会一起起作用；</p>
<p>​	4）、我们的配置类也会被调用；</p>
<p>​	效果：SpringMVC的自动配置和我们的扩展配置都会起作用；</p>
<h3 id="3全面接管springmvc">3、全面接管SpringMVC；</h3>
<p>SpringBoot对SpringMVC的自动配置不需要了，所有都是我们自己配置；所有的SpringMVC的自动配置都失效了</p>
<p><strong>我们需要在配置类中添加@EnableWebMvc即可；</strong></p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#228b22">//使用WebMvcConfigurerAdapter可以来扩展SpringMVC的功能
</span><span style="color:#228b22"></span><span style="color:#707a7c">@EnableWebMvc</span>
<span style="color:#707a7c">@Configuration</span>
<span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#8b008b;font-weight:bold">class</span> <span style="color:#008b45;font-weight:bold">MyMvcConfig</span> <span style="color:#8b008b;font-weight:bold">extends</span> WebMvcConfigurerAdapter {

    <span style="color:#707a7c">@Override</span>
    <span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#00688b;font-weight:bold">void</span> <span style="color:#008b45">addViewControllers</span>(ViewControllerRegistry registry) {
       <span style="color:#228b22">// super.addViewControllers(registry);
</span><span style="color:#228b22"></span>        <span style="color:#228b22">//浏览器发送 /atguigu 请求来到 success
</span><span style="color:#228b22"></span>        registry.<span style="color:#658b00">addViewController</span>(<span style="color:#cd5555">&#34;/atguigu&#34;</span>).<span style="color:#658b00">setViewName</span>(<span style="color:#cd5555">&#34;success&#34;</span>);
    }
}
</code></pre></div><p>原理：</p>
<p>为什么@EnableWebMvc自动配置就失效了；</p>
<p>1）@EnableWebMvc的核心</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#707a7c">@Import</span>(DelegatingWebMvcConfiguration.<span style="color:#658b00">class</span>)
<span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#707a7c">@interface</span> EnableWebMvc {
</code></pre></div><p>2）、</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#707a7c">@Configuration</span>
<span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#8b008b;font-weight:bold">class</span> <span style="color:#008b45;font-weight:bold">DelegatingWebMvcConfiguration</span> <span style="color:#8b008b;font-weight:bold">extends</span> WebMvcConfigurationSupport {
</code></pre></div><p>3）、</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#707a7c">@Configuration</span>
<span style="color:#707a7c">@ConditionalOnWebApplication</span>
<span style="color:#707a7c">@ConditionalOnClass</span>({ Servlet.<span style="color:#658b00">class</span>, DispatcherServlet.<span style="color:#658b00">class</span>,
		WebMvcConfigurerAdapter.<span style="color:#658b00">class</span> })
<span style="color:#228b22">//容器中没有这个组件的时候，这个自动配置类才生效
</span><span style="color:#228b22"></span><span style="color:#707a7c">@ConditionalOnMissingBean</span>(WebMvcConfigurationSupport.<span style="color:#658b00">class</span>)
<span style="color:#707a7c">@AutoConfigureOrder</span>(Ordered.<span style="color:#658b00">HIGHEST_PRECEDENCE</span> + 10)
<span style="color:#707a7c">@AutoConfigureAfter</span>({ DispatcherServletAutoConfiguration.<span style="color:#658b00">class</span>,
		ValidationAutoConfiguration.<span style="color:#658b00">class</span> })
<span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#8b008b;font-weight:bold">class</span> <span style="color:#008b45;font-weight:bold">WebMvcAutoConfiguration</span> {
</code></pre></div><p>4）、@EnableWebMvc将WebMvcConfigurationSupport组件导入进来；</p>
<p>5）、导入的WebMvcConfigurationSupport只是SpringMVC最基本的功能；</p>
<h2 id="5如何修改springboot的默认配置">5、如何修改SpringBoot的默认配置</h2>
<p>模式：</p>
<p>​	1）、SpringBoot在自动配置很多组件的时候，先看容器中有没有用户自己配置的（@Bean、@Component）如果有就用用户配置的，如果没有，才自动配置；如果有些组件可以有多个（ViewResolver）将用户配置的和自己默认的组合起来；</p>
<p>​	2）、在SpringBoot中会有非常多的xxxConfigurer帮助我们进行扩展配置</p>
<p>​	3）、在SpringBoot中会有很多的xxxCustomizer帮助我们进行定制配置</p>
<h2 id="6restfulcrud">6、RestfulCRUD</h2>
<h3 id="1默认访问首页">1）、默认访问首页</h3>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java">
<span style="color:#228b22">//使用WebMvcConfigurerAdapter可以来扩展SpringMVC的功能
</span><span style="color:#228b22">//@EnableWebMvc   不要接管SpringMVC
</span><span style="color:#228b22"></span><span style="color:#707a7c">@Configuration</span>
<span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#8b008b;font-weight:bold">class</span> <span style="color:#008b45;font-weight:bold">MyMvcConfig</span> <span style="color:#8b008b;font-weight:bold">extends</span> WebMvcConfigurerAdapter {

    <span style="color:#707a7c">@Override</span>
    <span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#00688b;font-weight:bold">void</span> <span style="color:#008b45">addViewControllers</span>(ViewControllerRegistry registry) {
       <span style="color:#228b22">// super.addViewControllers(registry);
</span><span style="color:#228b22"></span>        <span style="color:#228b22">//浏览器发送 /atguigu 请求来到 success
</span><span style="color:#228b22"></span>        registry.<span style="color:#658b00">addViewController</span>(<span style="color:#cd5555">&#34;/atguigu&#34;</span>).<span style="color:#658b00">setViewName</span>(<span style="color:#cd5555">&#34;success&#34;</span>);
    }

    <span style="color:#228b22">//所有的WebMvcConfigurerAdapter组件都会一起起作用
</span><span style="color:#228b22"></span>    <span style="color:#707a7c">@Bean</span> <span style="color:#228b22">//将组件注册在容器
</span><span style="color:#228b22"></span>    <span style="color:#8b008b;font-weight:bold">public</span> WebMvcConfigurerAdapter <span style="color:#008b45">webMvcConfigurerAdapter</span>(){
        WebMvcConfigurerAdapter adapter = <span style="color:#8b008b;font-weight:bold">new</span> WebMvcConfigurerAdapter() {
            <span style="color:#707a7c">@Override</span>
            <span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#00688b;font-weight:bold">void</span> <span style="color:#008b45">addViewControllers</span>(ViewControllerRegistry registry) {
                registry.<span style="color:#658b00">addViewController</span>(<span style="color:#cd5555">&#34;/&#34;</span>).<span style="color:#658b00">setViewName</span>(<span style="color:#cd5555">&#34;login&#34;</span>);
                registry.<span style="color:#658b00">addViewController</span>(<span style="color:#cd5555">&#34;/index.html&#34;</span>).<span style="color:#658b00">setViewName</span>(<span style="color:#cd5555">&#34;login&#34;</span>);
            }
        };
        <span style="color:#8b008b;font-weight:bold">return</span> adapter;
    }
}

</code></pre></div><h3 id="2国际化">2）、国际化</h3>
<p><strong>1）、编写国际化配置文件；</strong></p>
<p>2）、使用ResourceBundleMessageSource管理国际化资源文件</p>
<p>3）、在页面使用fmt:message取出国际化内容</p>
<p>步骤：</p>
<p>1）、编写国际化配置文件，抽取页面需要显示的国际化消息</p>
<p><img src="images/%E6%90%9C%E7%8B%97%E6%88%AA%E5%9B%BE20180211130721.png" alt=""></p>
<p>2）、SpringBoot自动配置好了管理国际化资源文件的组件；</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#707a7c">@ConfigurationProperties</span>(prefix = <span style="color:#cd5555">&#34;spring.messages&#34;</span>)
<span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#8b008b;font-weight:bold">class</span> <span style="color:#008b45;font-weight:bold">MessageSourceAutoConfiguration</span> {
    
    <span style="color:#228b22">/**
</span><span style="color:#228b22">	 * Comma-separated list of basenames (essentially a fully-qualified classpath
</span><span style="color:#228b22">	 * location), each following the ResourceBundle convention with relaxed support for
</span><span style="color:#228b22">	 * slash based locations. If it doesn&#39;t contain a package qualifier (such as
</span><span style="color:#228b22">	 * &#34;org.mypackage&#34;), it will be resolved from the classpath root.
</span><span style="color:#228b22">	 */</span>
	<span style="color:#8b008b;font-weight:bold">private</span> String basename = <span style="color:#cd5555">&#34;messages&#34;</span>;  
    <span style="color:#228b22">//我们的配置文件可以直接放在类路径下叫messages.properties；
</span><span style="color:#228b22"></span>    
    <span style="color:#707a7c">@Bean</span>
	<span style="color:#8b008b;font-weight:bold">public</span> MessageSource <span style="color:#008b45">messageSource</span>() {
		ResourceBundleMessageSource messageSource = <span style="color:#8b008b;font-weight:bold">new</span> ResourceBundleMessageSource();
		<span style="color:#8b008b;font-weight:bold">if</span> (StringUtils.<span style="color:#658b00">hasText</span>(<span style="color:#8b008b;font-weight:bold">this</span>.<span style="color:#658b00">basename</span>)) {
            <span style="color:#228b22">//设置国际化资源文件的基础名（去掉语言国家代码的）
</span><span style="color:#228b22"></span>			messageSource.<span style="color:#658b00">setBasenames</span>(StringUtils.<span style="color:#658b00">commaDelimitedListToStringArray</span>(
					StringUtils.<span style="color:#658b00">trimAllWhitespace</span>(<span style="color:#8b008b;font-weight:bold">this</span>.<span style="color:#658b00">basename</span>)));
		}
		<span style="color:#8b008b;font-weight:bold">if</span> (<span style="color:#8b008b;font-weight:bold">this</span>.<span style="color:#658b00">encoding</span> != <span style="color:#8b008b;font-weight:bold">null</span>) {
			messageSource.<span style="color:#658b00">setDefaultEncoding</span>(<span style="color:#8b008b;font-weight:bold">this</span>.<span style="color:#658b00">encoding</span>.<span style="color:#658b00">name</span>());
		}
		messageSource.<span style="color:#658b00">setFallbackToSystemLocale</span>(<span style="color:#8b008b;font-weight:bold">this</span>.<span style="color:#658b00">fallbackToSystemLocale</span>);
		messageSource.<span style="color:#658b00">setCacheSeconds</span>(<span style="color:#8b008b;font-weight:bold">this</span>.<span style="color:#658b00">cacheSeconds</span>);
		messageSource.<span style="color:#658b00">setAlwaysUseMessageFormat</span>(<span style="color:#8b008b;font-weight:bold">this</span>.<span style="color:#658b00">alwaysUseMessageFormat</span>);
		<span style="color:#8b008b;font-weight:bold">return</span> messageSource;
	}
</code></pre></div><p>3）、去页面获取国际化的值；</p>
<p><img src="images/%E6%90%9C%E7%8B%97%E6%88%AA%E5%9B%BE20180211134506.png" alt=""></p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-html" data-lang="html"><span style="color:#1e889b">&lt;!DOCTYPE html&gt;</span>
&lt;<span style="color:#8b008b;font-weight:bold">html</span> <span style="color:#658b00">lang</span>=<span style="color:#cd5555">&#34;en&#34;</span>  <span style="color:#658b00">xmlns:th</span>=<span style="color:#cd5555">&#34;http://www.thymeleaf.org&#34;</span>&gt;
	&lt;<span style="color:#8b008b;font-weight:bold">head</span>&gt;
		&lt;<span style="color:#8b008b;font-weight:bold">meta</span> <span style="color:#658b00">http-equiv</span>=<span style="color:#cd5555">&#34;Content-Type&#34;</span> <span style="color:#658b00">content</span>=<span style="color:#cd5555">&#34;text/html; charset=UTF-8&#34;</span>&gt;
		&lt;<span style="color:#8b008b;font-weight:bold">meta</span> <span style="color:#658b00">name</span>=<span style="color:#cd5555">&#34;viewport&#34;</span> <span style="color:#658b00">content</span>=<span style="color:#cd5555">&#34;width=device-width, initial-scale=1, shrink-to-fit=no&#34;</span>&gt;
		&lt;<span style="color:#8b008b;font-weight:bold">meta</span> <span style="color:#658b00">name</span>=<span style="color:#cd5555">&#34;description&#34;</span> <span style="color:#658b00">content</span>=<span style="color:#cd5555">&#34;&#34;</span>&gt;
		&lt;<span style="color:#8b008b;font-weight:bold">meta</span> <span style="color:#658b00">name</span>=<span style="color:#cd5555">&#34;author&#34;</span> <span style="color:#658b00">content</span>=<span style="color:#cd5555">&#34;&#34;</span>&gt;
		&lt;<span style="color:#8b008b;font-weight:bold">title</span>&gt;Signin Template for Bootstrap&lt;/<span style="color:#8b008b;font-weight:bold">title</span>&gt;
		<span style="color:#228b22">&lt;!-- Bootstrap core CSS --&gt;</span>
		&lt;<span style="color:#8b008b;font-weight:bold">link</span> <span style="color:#658b00">href</span>=<span style="color:#cd5555">&#34;asserts/css/bootstrap.min.css&#34;</span> <span style="color:#658b00">th:href</span>=<span style="color:#cd5555">&#34;@{/webjars/bootstrap/4.0.0/css/bootstrap.css}&#34;</span> <span style="color:#658b00">rel</span>=<span style="color:#cd5555">&#34;stylesheet&#34;</span>&gt;
		<span style="color:#228b22">&lt;!-- Custom styles for this template --&gt;</span>
		&lt;<span style="color:#8b008b;font-weight:bold">link</span> <span style="color:#658b00">href</span>=<span style="color:#cd5555">&#34;asserts/css/signin.css&#34;</span> <span style="color:#658b00">th:href</span>=<span style="color:#cd5555">&#34;@{/asserts/css/signin.css}&#34;</span> <span style="color:#658b00">rel</span>=<span style="color:#cd5555">&#34;stylesheet&#34;</span>&gt;
	&lt;/<span style="color:#8b008b;font-weight:bold">head</span>&gt;

	&lt;<span style="color:#8b008b;font-weight:bold">body</span> <span style="color:#658b00">class</span>=<span style="color:#cd5555">&#34;text-center&#34;</span>&gt;
		&lt;<span style="color:#8b008b;font-weight:bold">form</span> <span style="color:#658b00">class</span>=<span style="color:#cd5555">&#34;form-signin&#34;</span> <span style="color:#658b00">action</span>=<span style="color:#cd5555">&#34;dashboard.html&#34;</span>&gt;
			&lt;<span style="color:#8b008b;font-weight:bold">img</span> <span style="color:#658b00">class</span>=<span style="color:#cd5555">&#34;mb-4&#34;</span> <span style="color:#658b00">th:src</span>=<span style="color:#cd5555">&#34;@{/asserts/img/bootstrap-solid.svg}&#34;</span> <span style="color:#658b00">src</span>=<span style="color:#cd5555">&#34;asserts/img/bootstrap-solid.svg&#34;</span> <span style="color:#658b00">alt</span>=<span style="color:#cd5555">&#34;&#34;</span> <span style="color:#658b00">width</span>=<span style="color:#cd5555">&#34;72&#34;</span> <span style="color:#658b00">height</span>=<span style="color:#cd5555">&#34;72&#34;</span>&gt;
			&lt;<span style="color:#8b008b;font-weight:bold">h1</span> <span style="color:#658b00">class</span>=<span style="color:#cd5555">&#34;h3 mb-3 font-weight-normal&#34;</span> <span style="color:#658b00">th:text</span>=<span style="color:#cd5555">&#34;#{login.tip}&#34;</span>&gt;Please sign in&lt;/<span style="color:#8b008b;font-weight:bold">h1</span>&gt;
			&lt;<span style="color:#8b008b;font-weight:bold">label</span> <span style="color:#658b00">class</span>=<span style="color:#cd5555">&#34;sr-only&#34;</span> <span style="color:#658b00">th:text</span>=<span style="color:#cd5555">&#34;#{login.username}&#34;</span>&gt;Username&lt;/<span style="color:#8b008b;font-weight:bold">label</span>&gt;
			&lt;<span style="color:#8b008b;font-weight:bold">input</span> <span style="color:#658b00">type</span>=<span style="color:#cd5555">&#34;text&#34;</span> <span style="color:#658b00">class</span>=<span style="color:#cd5555">&#34;form-control&#34;</span> <span style="color:#658b00">placeholder</span>=<span style="color:#cd5555">&#34;Username&#34;</span> <span style="color:#658b00">th:placeholder</span>=<span style="color:#cd5555">&#34;#{login.username}&#34;</span> <span style="color:#658b00">required</span>=<span style="color:#cd5555">&#34;&#34;</span> <span style="color:#658b00">autofocus</span>=<span style="color:#cd5555">&#34;&#34;</span>&gt;
			&lt;<span style="color:#8b008b;font-weight:bold">label</span> <span style="color:#658b00">class</span>=<span style="color:#cd5555">&#34;sr-only&#34;</span> <span style="color:#658b00">th:text</span>=<span style="color:#cd5555">&#34;#{login.password}&#34;</span>&gt;Password&lt;/<span style="color:#8b008b;font-weight:bold">label</span>&gt;
			&lt;<span style="color:#8b008b;font-weight:bold">input</span> <span style="color:#658b00">type</span>=<span style="color:#cd5555">&#34;password&#34;</span> <span style="color:#658b00">class</span>=<span style="color:#cd5555">&#34;form-control&#34;</span> <span style="color:#658b00">placeholder</span>=<span style="color:#cd5555">&#34;Password&#34;</span> <span style="color:#658b00">th:placeholder</span>=<span style="color:#cd5555">&#34;#{login.password}&#34;</span> <span style="color:#658b00">required</span>=<span style="color:#cd5555">&#34;&#34;</span>&gt;
			&lt;<span style="color:#8b008b;font-weight:bold">div</span> <span style="color:#658b00">class</span>=<span style="color:#cd5555">&#34;checkbox mb-3&#34;</span>&gt;
				&lt;<span style="color:#8b008b;font-weight:bold">label</span>&gt;
          		&lt;<span style="color:#8b008b;font-weight:bold">input</span> <span style="color:#658b00">type</span>=<span style="color:#cd5555">&#34;checkbox&#34;</span> <span style="color:#658b00">value</span>=<span style="color:#cd5555">&#34;remember-me&#34;</span>/&gt; [[#{login.remember}]]
        &lt;/<span style="color:#8b008b;font-weight:bold">label</span>&gt;
			&lt;/<span style="color:#8b008b;font-weight:bold">div</span>&gt;
			&lt;<span style="color:#8b008b;font-weight:bold">button</span> <span style="color:#658b00">class</span>=<span style="color:#cd5555">&#34;btn btn-lg btn-primary btn-block&#34;</span> <span style="color:#658b00">type</span>=<span style="color:#cd5555">&#34;submit&#34;</span> <span style="color:#658b00">th:text</span>=<span style="color:#cd5555">&#34;#{login.btn}&#34;</span>&gt;Sign in&lt;/<span style="color:#8b008b;font-weight:bold">button</span>&gt;
			&lt;<span style="color:#8b008b;font-weight:bold">p</span> <span style="color:#658b00">class</span>=<span style="color:#cd5555">&#34;mt-5 mb-3 text-muted&#34;</span>&gt;© 2017-2018&lt;/<span style="color:#8b008b;font-weight:bold">p</span>&gt;
			&lt;<span style="color:#8b008b;font-weight:bold">a</span> <span style="color:#658b00">class</span>=<span style="color:#cd5555">&#34;btn btn-sm&#34;</span>&gt;中文&lt;/<span style="color:#8b008b;font-weight:bold">a</span>&gt;
			&lt;<span style="color:#8b008b;font-weight:bold">a</span> <span style="color:#658b00">class</span>=<span style="color:#cd5555">&#34;btn btn-sm&#34;</span>&gt;English&lt;/<span style="color:#8b008b;font-weight:bold">a</span>&gt;
		&lt;/<span style="color:#8b008b;font-weight:bold">form</span>&gt;

	&lt;/<span style="color:#8b008b;font-weight:bold">body</span>&gt;

&lt;/<span style="color:#8b008b;font-weight:bold">html</span>&gt;
</code></pre></div><p>效果：根据浏览器语言设置的信息切换了国际化；</p>
<p>原理：</p>
<p>​	国际化Locale（区域信息对象）；LocaleResolver（获取区域信息对象）；</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java">		<span style="color:#707a7c">@Bean</span>
		<span style="color:#707a7c">@ConditionalOnMissingBean</span>
		<span style="color:#707a7c">@ConditionalOnProperty</span>(prefix = <span style="color:#cd5555">&#34;spring.mvc&#34;</span>, name = <span style="color:#cd5555">&#34;locale&#34;</span>)
		<span style="color:#8b008b;font-weight:bold">public</span> LocaleResolver <span style="color:#008b45">localeResolver</span>() {
			<span style="color:#8b008b;font-weight:bold">if</span> (<span style="color:#8b008b;font-weight:bold">this</span>.<span style="color:#658b00">mvcProperties</span>
					.<span style="color:#658b00">getLocaleResolver</span>() == WebMvcProperties.<span style="color:#658b00">LocaleResolver</span>.<span style="color:#658b00">FIXED</span>) {
				<span style="color:#8b008b;font-weight:bold">return</span> <span style="color:#8b008b;font-weight:bold">new</span> FixedLocaleResolver(<span style="color:#8b008b;font-weight:bold">this</span>.<span style="color:#658b00">mvcProperties</span>.<span style="color:#658b00">getLocale</span>());
			}
			AcceptHeaderLocaleResolver localeResolver = <span style="color:#8b008b;font-weight:bold">new</span> AcceptHeaderLocaleResolver();
			localeResolver.<span style="color:#658b00">setDefaultLocale</span>(<span style="color:#8b008b;font-weight:bold">this</span>.<span style="color:#658b00">mvcProperties</span>.<span style="color:#658b00">getLocale</span>());
			<span style="color:#8b008b;font-weight:bold">return</span> localeResolver;
		}
默认的就是根据请求头带来的区域信息获取Locale进行国际化
</code></pre></div><p>4）、点击链接切换国际化</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#228b22">/**
</span><span style="color:#228b22"> * 可以在连接上携带区域信息
</span><span style="color:#228b22"> */</span>
<span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#8b008b;font-weight:bold">class</span> <span style="color:#008b45;font-weight:bold">MyLocaleResolver</span> <span style="color:#8b008b;font-weight:bold">implements</span> LocaleResolver {
    
    <span style="color:#707a7c">@Override</span>
    <span style="color:#8b008b;font-weight:bold">public</span> Locale <span style="color:#008b45">resolveLocale</span>(HttpServletRequest request) {
        String l = request.<span style="color:#658b00">getParameter</span>(<span style="color:#cd5555">&#34;l&#34;</span>);
        Locale locale = Locale.<span style="color:#658b00">getDefault</span>();
        <span style="color:#8b008b;font-weight:bold">if</span>(!StringUtils.<span style="color:#658b00">isEmpty</span>(l)){
            String[] split = l.<span style="color:#658b00">split</span>(<span style="color:#cd5555">&#34;_&#34;</span>);
            locale = <span style="color:#8b008b;font-weight:bold">new</span> Locale(split[0],split[1]);
        }
        <span style="color:#8b008b;font-weight:bold">return</span> locale;
    }

    <span style="color:#707a7c">@Override</span>
    <span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#00688b;font-weight:bold">void</span> <span style="color:#008b45">setLocale</span>(HttpServletRequest request, HttpServletResponse response, Locale locale) {

    }
}


 <span style="color:#707a7c">@Bean</span>
    <span style="color:#8b008b;font-weight:bold">public</span> LocaleResolver <span style="color:#008b45">localeResolver</span>(){
        <span style="color:#8b008b;font-weight:bold">return</span> <span style="color:#8b008b;font-weight:bold">new</span> MyLocaleResolver();
    }
}


</code></pre></div><h3 id="3登陆">3）、登陆</h3>
<p>开发期间模板引擎页面修改以后，要实时生效</p>
<p>1）、禁用模板引擎的缓存</p>
<pre><code># 禁用缓存
spring.thymeleaf.cache=false 
</code></pre><p>2）、页面修改完成以后ctrl+f9：重新编译；</p>
<p>登陆错误消息的显示</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-html" data-lang="html">&lt;<span style="color:#8b008b;font-weight:bold">p</span> <span style="color:#658b00">style</span>=<span style="color:#cd5555">&#34;color: red&#34;</span> <span style="color:#658b00">th:text</span>=<span style="color:#cd5555">&#34;${msg}&#34;</span> <span style="color:#658b00">th:if</span>=<span style="color:#cd5555">&#34;${not #strings.isEmpty(msg)}&#34;</span>&gt;&lt;/<span style="color:#8b008b;font-weight:bold">p</span>&gt;
</code></pre></div><h3 id="4拦截器进行登陆检查">4）、拦截器进行登陆检查</h3>
<p>拦截器</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java">
<span style="color:#228b22">/**
</span><span style="color:#228b22"> * 登陆检查，
</span><span style="color:#228b22"> */</span>
<span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#8b008b;font-weight:bold">class</span> <span style="color:#008b45;font-weight:bold">LoginHandlerInterceptor</span> <span style="color:#8b008b;font-weight:bold">implements</span> HandlerInterceptor {
    <span style="color:#228b22">//目标方法执行之前
</span><span style="color:#228b22"></span>    <span style="color:#707a7c">@Override</span>
    <span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#00688b;font-weight:bold">boolean</span> <span style="color:#008b45">preHandle</span>(HttpServletRequest request, HttpServletResponse response, Object handler) <span style="color:#8b008b;font-weight:bold">throws</span> Exception {
        Object user = request.<span style="color:#658b00">getSession</span>().<span style="color:#658b00">getAttribute</span>(<span style="color:#cd5555">&#34;loginUser&#34;</span>);
        <span style="color:#8b008b;font-weight:bold">if</span>(user == <span style="color:#8b008b;font-weight:bold">null</span>){
            <span style="color:#228b22">//未登陆，返回登陆页面
</span><span style="color:#228b22"></span>            request.<span style="color:#658b00">setAttribute</span>(<span style="color:#cd5555">&#34;msg&#34;</span>,<span style="color:#cd5555">&#34;没有权限请先登陆&#34;</span>);
            request.<span style="color:#658b00">getRequestDispatcher</span>(<span style="color:#cd5555">&#34;/index.html&#34;</span>).<span style="color:#658b00">forward</span>(request,response);
            <span style="color:#8b008b;font-weight:bold">return</span> <span style="color:#8b008b;font-weight:bold">false</span>;
        }<span style="color:#8b008b;font-weight:bold">else</span>{
            <span style="color:#228b22">//已登陆，放行请求
</span><span style="color:#228b22"></span>            <span style="color:#8b008b;font-weight:bold">return</span> <span style="color:#8b008b;font-weight:bold">true</span>;
        }

    }

    <span style="color:#707a7c">@Override</span>
    <span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#00688b;font-weight:bold">void</span> <span style="color:#008b45">postHandle</span>(HttpServletRequest request, HttpServletResponse response, Object handler, ModelAndView modelAndView) <span style="color:#8b008b;font-weight:bold">throws</span> Exception {

    }

    <span style="color:#707a7c">@Override</span>
    <span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#00688b;font-weight:bold">void</span> <span style="color:#008b45">afterCompletion</span>(HttpServletRequest request, HttpServletResponse response, Object handler, Exception ex) <span style="color:#8b008b;font-weight:bold">throws</span> Exception {

    }
}

</code></pre></div><p>注册拦截器</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java">  <span style="color:#228b22">//所有的WebMvcConfigurerAdapter组件都会一起起作用
</span><span style="color:#228b22"></span>    <span style="color:#707a7c">@Bean</span> <span style="color:#228b22">//将组件注册在容器
</span><span style="color:#228b22"></span>    <span style="color:#8b008b;font-weight:bold">public</span> WebMvcConfigurerAdapter <span style="color:#008b45">webMvcConfigurerAdapter</span>(){
        WebMvcConfigurerAdapter adapter = <span style="color:#8b008b;font-weight:bold">new</span> WebMvcConfigurerAdapter() {
            <span style="color:#707a7c">@Override</span>
            <span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#00688b;font-weight:bold">void</span> <span style="color:#008b45">addViewControllers</span>(ViewControllerRegistry registry) {
                registry.<span style="color:#658b00">addViewController</span>(<span style="color:#cd5555">&#34;/&#34;</span>).<span style="color:#658b00">setViewName</span>(<span style="color:#cd5555">&#34;login&#34;</span>);
                registry.<span style="color:#658b00">addViewController</span>(<span style="color:#cd5555">&#34;/index.html&#34;</span>).<span style="color:#658b00">setViewName</span>(<span style="color:#cd5555">&#34;login&#34;</span>);
                registry.<span style="color:#658b00">addViewController</span>(<span style="color:#cd5555">&#34;/main.html&#34;</span>).<span style="color:#658b00">setViewName</span>(<span style="color:#cd5555">&#34;dashboard&#34;</span>);
            }

            <span style="color:#228b22">//注册拦截器
</span><span style="color:#228b22"></span>            <span style="color:#707a7c">@Override</span>
            <span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#00688b;font-weight:bold">void</span> <span style="color:#008b45">addInterceptors</span>(InterceptorRegistry registry) {
                <span style="color:#228b22">//super.addInterceptors(registry);
</span><span style="color:#228b22"></span>                <span style="color:#228b22">//静态资源；  *.css , *.js
</span><span style="color:#228b22"></span>                <span style="color:#228b22">//SpringBoot已经做好了静态资源映射
</span><span style="color:#228b22"></span>                registry.<span style="color:#658b00">addInterceptor</span>(<span style="color:#8b008b;font-weight:bold">new</span> LoginHandlerInterceptor()).<span style="color:#658b00">addPathPatterns</span>(<span style="color:#cd5555">&#34;/**&#34;</span>)
                        .<span style="color:#658b00">excludePathPatterns</span>(<span style="color:#cd5555">&#34;/index.html&#34;</span>,<span style="color:#cd5555">&#34;/&#34;</span>,<span style="color:#cd5555">&#34;/user/login&#34;</span>);
            }
        };
        <span style="color:#8b008b;font-weight:bold">return</span> adapter;
    }
</code></pre></div><h3 id="5crud-员工列表">5）、CRUD-员工列表</h3>
<p>实验要求：</p>
<p>1）、RestfulCRUD：CRUD满足Rest风格；</p>
<p>URI：  /资源名称/资源标识       HTTP请求方式区分对资源CRUD操作</p>
<table class='pure-table pure-table-striped'>
<thead>
<tr>
<th></th>
<th>普通CRUD（uri来区分操作）</th>
<th>RestfulCRUD</th>
</tr>
</thead>
<tbody>
<tr>
<td>查询</td>
<td>getEmp</td>
<td>emp&mdash;GET</td>
</tr>
<tr>
<td>添加</td>
<td>addEmp?xxx</td>
<td>emp&mdash;POST</td>
</tr>
<tr>
<td>修改</td>
<td>updateEmp?id=xxx&amp;xxx=xx</td>
<td>emp/{id}&mdash;PUT</td>
</tr>
<tr>
<td>删除</td>
<td>deleteEmp?id=1</td>
<td>emp/{id}&mdash;DELETE</td>
</tr>
</tbody>
</table>
<p>2）、实验的请求架构;</p>
<table class='pure-table pure-table-striped'>
<thead>
<tr>
<th>实验功能</th>
<th>请求URI</th>
<th>请求方式</th>
</tr>
</thead>
<tbody>
<tr>
<td>查询所有员工</td>
<td>emps</td>
<td>GET</td>
</tr>
<tr>
<td>查询某个员工(来到修改页面)</td>
<td>emp/1</td>
<td>GET</td>
</tr>
<tr>
<td>来到添加页面</td>
<td>emp</td>
<td>GET</td>
</tr>
<tr>
<td>添加员工</td>
<td>emp</td>
<td>POST</td>
</tr>
<tr>
<td>来到修改页面（查出员工进行信息回显）</td>
<td>emp/1</td>
<td>GET</td>
</tr>
<tr>
<td>修改员工</td>
<td>emp</td>
<td>PUT</td>
</tr>
<tr>
<td>删除员工</td>
<td>emp/1</td>
<td>DELETE</td>
</tr>
</tbody>
</table>
<p>3）、员工列表：</p>
<h4 id="thymeleaf公共页面元素抽取">thymeleaf公共页面元素抽取</h4>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-html" data-lang="html">1、抽取公共片段
&lt;<span style="color:#8b008b;font-weight:bold">div</span> <span style="color:#658b00">th:fragment</span>=<span style="color:#cd5555">&#34;copy&#34;</span>&gt;
&amp;copy; 2011 The Good Thymes Virtual Grocery
&lt;/<span style="color:#8b008b;font-weight:bold">div</span>&gt;

2、引入公共片段
&lt;<span style="color:#8b008b;font-weight:bold">div</span> <span style="color:#658b00">th:insert</span>=<span style="color:#cd5555">&#34;~{footer :: copy}&#34;</span>&gt;&lt;/<span style="color:#8b008b;font-weight:bold">div</span>&gt;
~{templatename::selector}：模板名::选择器
~{templatename::fragmentname}:模板名::片段名

3、默认效果：
insert的公共片段在div标签中
如果使用th:insert等属性进行引入，可以不用写~{}：
行内写法可以加上：[[~{}]];[(~{})]；
</code></pre></div><p>三种引入公共片段的th属性：</p>
<p><strong>th:insert</strong>：将公共片段整个插入到声明引入的元素中</p>
<p><strong>th:replace</strong>：将声明引入的元素替换为公共片段</p>
<p><strong>th:include</strong>：将被引入的片段的内容包含进这个标签中</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-html" data-lang="html">&lt;<span style="color:#8b008b;font-weight:bold">footer</span> <span style="color:#658b00">th:fragment</span>=<span style="color:#cd5555">&#34;copy&#34;</span>&gt;
&amp;copy; 2011 The Good Thymes Virtual Grocery
&lt;/<span style="color:#8b008b;font-weight:bold">footer</span>&gt;

引入方式
&lt;<span style="color:#8b008b;font-weight:bold">div</span> <span style="color:#658b00">th:insert</span>=<span style="color:#cd5555">&#34;footer :: copy&#34;</span>&gt;&lt;/<span style="color:#8b008b;font-weight:bold">div</span>&gt;
&lt;<span style="color:#8b008b;font-weight:bold">div</span> <span style="color:#658b00">th:replace</span>=<span style="color:#cd5555">&#34;footer :: copy&#34;</span>&gt;&lt;/<span style="color:#8b008b;font-weight:bold">div</span>&gt;
&lt;<span style="color:#8b008b;font-weight:bold">div</span> <span style="color:#658b00">th:include</span>=<span style="color:#cd5555">&#34;footer :: copy&#34;</span>&gt;&lt;/<span style="color:#8b008b;font-weight:bold">div</span>&gt;

效果
&lt;<span style="color:#8b008b;font-weight:bold">div</span>&gt;
    &lt;<span style="color:#8b008b;font-weight:bold">footer</span>&gt;
    &amp;copy; 2011 The Good Thymes Virtual Grocery
    &lt;/<span style="color:#8b008b;font-weight:bold">footer</span>&gt;
&lt;/<span style="color:#8b008b;font-weight:bold">div</span>&gt;

&lt;<span style="color:#8b008b;font-weight:bold">footer</span>&gt;
&amp;copy; 2011 The Good Thymes Virtual Grocery
&lt;/<span style="color:#8b008b;font-weight:bold">footer</span>&gt;

&lt;<span style="color:#8b008b;font-weight:bold">div</span>&gt;
&amp;copy; 2011 The Good Thymes Virtual Grocery
&lt;/<span style="color:#8b008b;font-weight:bold">div</span>&gt;
</code></pre></div><p>引入片段的时候传入参数：</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-html" data-lang="html">
&lt;<span style="color:#8b008b;font-weight:bold">nav</span> <span style="color:#658b00">class</span>=<span style="color:#cd5555">&#34;col-md-2 d-none d-md-block bg-light sidebar&#34;</span> <span style="color:#658b00">id</span>=<span style="color:#cd5555">&#34;sidebar&#34;</span>&gt;
    &lt;<span style="color:#8b008b;font-weight:bold">div</span> <span style="color:#658b00">class</span>=<span style="color:#cd5555">&#34;sidebar-sticky&#34;</span>&gt;
        &lt;<span style="color:#8b008b;font-weight:bold">ul</span> <span style="color:#658b00">class</span>=<span style="color:#cd5555">&#34;nav flex-column&#34;</span>&gt;
            &lt;<span style="color:#8b008b;font-weight:bold">li</span> <span style="color:#658b00">class</span>=<span style="color:#cd5555">&#34;nav-item&#34;</span>&gt;
                &lt;<span style="color:#8b008b;font-weight:bold">a</span> <span style="color:#658b00">class</span>=<span style="color:#cd5555">&#34;nav-link active&#34;</span>
                   <span style="color:#658b00">th:class</span>=<span style="color:#cd5555">&#34;${activeUri==&#39;main.html&#39;?&#39;nav-link active&#39;:&#39;nav-link&#39;}&#34;</span>
                   <span style="color:#658b00">href</span>=<span style="color:#cd5555">&#34;#&#34;</span> <span style="color:#658b00">th:href</span>=<span style="color:#cd5555">&#34;@{/main.html}&#34;</span>&gt;
                    &lt;<span style="color:#8b008b;font-weight:bold">svg</span> <span style="color:#658b00">xmlns</span>=<span style="color:#cd5555">&#34;http://www.w3.org/2000/svg&#34;</span> <span style="color:#658b00">width</span>=<span style="color:#cd5555">&#34;24&#34;</span> <span style="color:#658b00">height</span>=<span style="color:#cd5555">&#34;24&#34;</span> <span style="color:#658b00">viewBox</span>=<span style="color:#cd5555">&#34;0 0 24 24&#34;</span> <span style="color:#658b00">fill</span>=<span style="color:#cd5555">&#34;none&#34;</span> <span style="color:#658b00">stroke</span>=<span style="color:#cd5555">&#34;currentColor&#34;</span> <span style="color:#658b00">stroke-width</span>=<span style="color:#cd5555">&#34;2&#34;</span> <span style="color:#658b00">stroke-linecap</span>=<span style="color:#cd5555">&#34;round&#34;</span> <span style="color:#658b00">stroke-linejoin</span>=<span style="color:#cd5555">&#34;round&#34;</span> <span style="color:#658b00">class</span>=<span style="color:#cd5555">&#34;feather feather-home&#34;</span>&gt;
                        &lt;<span style="color:#8b008b;font-weight:bold">path</span> <span style="color:#658b00">d</span>=<span style="color:#cd5555">&#34;M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z&#34;</span>&gt;&lt;/<span style="color:#8b008b;font-weight:bold">path</span>&gt;
                        &lt;<span style="color:#8b008b;font-weight:bold">polyline</span> <span style="color:#658b00">points</span>=<span style="color:#cd5555">&#34;9 22 9 12 15 12 15 22&#34;</span>&gt;&lt;/<span style="color:#8b008b;font-weight:bold">polyline</span>&gt;
                    &lt;/<span style="color:#8b008b;font-weight:bold">svg</span>&gt;
                    Dashboard &lt;<span style="color:#8b008b;font-weight:bold">span</span> <span style="color:#658b00">class</span>=<span style="color:#cd5555">&#34;sr-only&#34;</span>&gt;(current)&lt;/<span style="color:#8b008b;font-weight:bold">span</span>&gt;
                &lt;/<span style="color:#8b008b;font-weight:bold">a</span>&gt;
            &lt;/<span style="color:#8b008b;font-weight:bold">li</span>&gt;

<span style="color:#228b22">&lt;!--引入侧边栏;传入参数--&gt;</span>
&lt;<span style="color:#8b008b;font-weight:bold">div</span> <span style="color:#658b00">th:replace</span>=<span style="color:#cd5555">&#34;commons/bar::#sidebar(activeUri=&#39;emps&#39;)&#34;</span>&gt;&lt;/<span style="color:#8b008b;font-weight:bold">div</span>&gt;
</code></pre></div><h3 id="6crud-员工添加">6）、CRUD-员工添加</h3>
<p>添加页面</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-html" data-lang="html">&lt;<span style="color:#8b008b;font-weight:bold">form</span>&gt;
    &lt;<span style="color:#8b008b;font-weight:bold">div</span> <span style="color:#658b00">class</span>=<span style="color:#cd5555">&#34;form-group&#34;</span>&gt;
        &lt;<span style="color:#8b008b;font-weight:bold">label</span>&gt;LastName&lt;/<span style="color:#8b008b;font-weight:bold">label</span>&gt;
        &lt;<span style="color:#8b008b;font-weight:bold">input</span> <span style="color:#658b00">type</span>=<span style="color:#cd5555">&#34;text&#34;</span> <span style="color:#658b00">class</span>=<span style="color:#cd5555">&#34;form-control&#34;</span> <span style="color:#658b00">placeholder</span>=<span style="color:#cd5555">&#34;zhangsan&#34;</span>&gt;
    &lt;/<span style="color:#8b008b;font-weight:bold">div</span>&gt;
    &lt;<span style="color:#8b008b;font-weight:bold">div</span> <span style="color:#658b00">class</span>=<span style="color:#cd5555">&#34;form-group&#34;</span>&gt;
        &lt;<span style="color:#8b008b;font-weight:bold">label</span>&gt;Email&lt;/<span style="color:#8b008b;font-weight:bold">label</span>&gt;
        &lt;<span style="color:#8b008b;font-weight:bold">input</span> <span style="color:#658b00">type</span>=<span style="color:#cd5555">&#34;email&#34;</span> <span style="color:#658b00">class</span>=<span style="color:#cd5555">&#34;form-control&#34;</span> <span style="color:#658b00">placeholder</span>=<span style="color:#cd5555">&#34;zhangsan@atguigu.com&#34;</span>&gt;
    &lt;/<span style="color:#8b008b;font-weight:bold">div</span>&gt;
    &lt;<span style="color:#8b008b;font-weight:bold">div</span> <span style="color:#658b00">class</span>=<span style="color:#cd5555">&#34;form-group&#34;</span>&gt;
        &lt;<span style="color:#8b008b;font-weight:bold">label</span>&gt;Gender&lt;/<span style="color:#8b008b;font-weight:bold">label</span>&gt;&lt;<span style="color:#8b008b;font-weight:bold">br</span>/&gt;
        &lt;<span style="color:#8b008b;font-weight:bold">div</span> <span style="color:#658b00">class</span>=<span style="color:#cd5555">&#34;form-check form-check-inline&#34;</span>&gt;
            &lt;<span style="color:#8b008b;font-weight:bold">input</span> <span style="color:#658b00">class</span>=<span style="color:#cd5555">&#34;form-check-input&#34;</span> <span style="color:#658b00">type</span>=<span style="color:#cd5555">&#34;radio&#34;</span> <span style="color:#658b00">name</span>=<span style="color:#cd5555">&#34;gender&#34;</span>  <span style="color:#658b00">value</span>=<span style="color:#cd5555">&#34;1&#34;</span>&gt;
            &lt;<span style="color:#8b008b;font-weight:bold">label</span> <span style="color:#658b00">class</span>=<span style="color:#cd5555">&#34;form-check-label&#34;</span>&gt;男&lt;/<span style="color:#8b008b;font-weight:bold">label</span>&gt;
        &lt;/<span style="color:#8b008b;font-weight:bold">div</span>&gt;
        &lt;<span style="color:#8b008b;font-weight:bold">div</span> <span style="color:#658b00">class</span>=<span style="color:#cd5555">&#34;form-check form-check-inline&#34;</span>&gt;
            &lt;<span style="color:#8b008b;font-weight:bold">input</span> <span style="color:#658b00">class</span>=<span style="color:#cd5555">&#34;form-check-input&#34;</span> <span style="color:#658b00">type</span>=<span style="color:#cd5555">&#34;radio&#34;</span> <span style="color:#658b00">name</span>=<span style="color:#cd5555">&#34;gender&#34;</span>  <span style="color:#658b00">value</span>=<span style="color:#cd5555">&#34;0&#34;</span>&gt;
            &lt;<span style="color:#8b008b;font-weight:bold">label</span> <span style="color:#658b00">class</span>=<span style="color:#cd5555">&#34;form-check-label&#34;</span>&gt;女&lt;/<span style="color:#8b008b;font-weight:bold">label</span>&gt;
        &lt;/<span style="color:#8b008b;font-weight:bold">div</span>&gt;
    &lt;/<span style="color:#8b008b;font-weight:bold">div</span>&gt;
    &lt;<span style="color:#8b008b;font-weight:bold">div</span> <span style="color:#658b00">class</span>=<span style="color:#cd5555">&#34;form-group&#34;</span>&gt;
        &lt;<span style="color:#8b008b;font-weight:bold">label</span>&gt;department&lt;/<span style="color:#8b008b;font-weight:bold">label</span>&gt;
        &lt;<span style="color:#8b008b;font-weight:bold">select</span> <span style="color:#658b00">class</span>=<span style="color:#cd5555">&#34;form-control&#34;</span>&gt;
            &lt;<span style="color:#8b008b;font-weight:bold">option</span>&gt;1&lt;/<span style="color:#8b008b;font-weight:bold">option</span>&gt;
            &lt;<span style="color:#8b008b;font-weight:bold">option</span>&gt;2&lt;/<span style="color:#8b008b;font-weight:bold">option</span>&gt;
            &lt;<span style="color:#8b008b;font-weight:bold">option</span>&gt;3&lt;/<span style="color:#8b008b;font-weight:bold">option</span>&gt;
            &lt;<span style="color:#8b008b;font-weight:bold">option</span>&gt;4&lt;/<span style="color:#8b008b;font-weight:bold">option</span>&gt;
            &lt;<span style="color:#8b008b;font-weight:bold">option</span>&gt;5&lt;/<span style="color:#8b008b;font-weight:bold">option</span>&gt;
        &lt;/<span style="color:#8b008b;font-weight:bold">select</span>&gt;
    &lt;/<span style="color:#8b008b;font-weight:bold">div</span>&gt;
    &lt;<span style="color:#8b008b;font-weight:bold">div</span> <span style="color:#658b00">class</span>=<span style="color:#cd5555">&#34;form-group&#34;</span>&gt;
        &lt;<span style="color:#8b008b;font-weight:bold">label</span>&gt;Birth&lt;/<span style="color:#8b008b;font-weight:bold">label</span>&gt;
        &lt;<span style="color:#8b008b;font-weight:bold">input</span> <span style="color:#658b00">type</span>=<span style="color:#cd5555">&#34;text&#34;</span> <span style="color:#658b00">class</span>=<span style="color:#cd5555">&#34;form-control&#34;</span> <span style="color:#658b00">placeholder</span>=<span style="color:#cd5555">&#34;zhangsan&#34;</span>&gt;
    &lt;/<span style="color:#8b008b;font-weight:bold">div</span>&gt;
    &lt;<span style="color:#8b008b;font-weight:bold">button</span> <span style="color:#658b00">type</span>=<span style="color:#cd5555">&#34;submit&#34;</span> <span style="color:#658b00">class</span>=<span style="color:#cd5555">&#34;btn btn-primary&#34;</span>&gt;添加&lt;/<span style="color:#8b008b;font-weight:bold">button</span>&gt;
&lt;/<span style="color:#8b008b;font-weight:bold">form</span>&gt;
</code></pre></div><p>提交的数据格式不对：生日：日期；</p>
<p>2017-12-12；2017/12/12；2017.12.12；</p>
<p>日期的格式化；SpringMVC将页面提交的值需要转换为指定的类型;</p>
<p>2017-12-12&mdash;Date； 类型转换，格式化;</p>
<p>默认日期是按照/的方式；</p>
<h3 id="7crud-员工修改">7）、CRUD-员工修改</h3>
<p>修改添加二合一表单</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-html" data-lang="html"><span style="color:#228b22">&lt;!--需要区分是员工修改还是添加；--&gt;</span>
&lt;<span style="color:#8b008b;font-weight:bold">form</span> <span style="color:#658b00">th:action</span>=<span style="color:#cd5555">&#34;@{/emp}&#34;</span> <span style="color:#658b00">method</span>=<span style="color:#cd5555">&#34;post&#34;</span>&gt;
    <span style="color:#228b22">&lt;!--发送put请求修改员工数据--&gt;</span>
    <span style="color:#228b22">&lt;!--
</span><span style="color:#228b22">1、SpringMVC中配置HiddenHttpMethodFilter;（SpringBoot自动配置好的）
</span><span style="color:#228b22">2、页面创建一个post表单
</span><span style="color:#228b22">3、创建一个input项，name=&#34;_method&#34;;值就是我们指定的请求方式
</span><span style="color:#228b22">--&gt;</span>
    &lt;<span style="color:#8b008b;font-weight:bold">input</span> <span style="color:#658b00">type</span>=<span style="color:#cd5555">&#34;hidden&#34;</span> <span style="color:#658b00">name</span>=<span style="color:#cd5555">&#34;_method&#34;</span> <span style="color:#658b00">value</span>=<span style="color:#cd5555">&#34;put&#34;</span> <span style="color:#658b00">th:if</span>=<span style="color:#cd5555">&#34;${emp!=null}&#34;</span>/&gt;
    &lt;<span style="color:#8b008b;font-weight:bold">input</span> <span style="color:#658b00">type</span>=<span style="color:#cd5555">&#34;hidden&#34;</span> <span style="color:#658b00">name</span>=<span style="color:#cd5555">&#34;id&#34;</span> <span style="color:#658b00">th:if</span>=<span style="color:#cd5555">&#34;${emp!=null}&#34;</span> <span style="color:#658b00">th:value</span>=<span style="color:#cd5555">&#34;${emp.id}&#34;</span>&gt;
    &lt;<span style="color:#8b008b;font-weight:bold">div</span> <span style="color:#658b00">class</span>=<span style="color:#cd5555">&#34;form-group&#34;</span>&gt;
        &lt;<span style="color:#8b008b;font-weight:bold">label</span>&gt;LastName&lt;/<span style="color:#8b008b;font-weight:bold">label</span>&gt;
        &lt;<span style="color:#8b008b;font-weight:bold">input</span> <span style="color:#658b00">name</span>=<span style="color:#cd5555">&#34;lastName&#34;</span> <span style="color:#658b00">type</span>=<span style="color:#cd5555">&#34;text&#34;</span> <span style="color:#658b00">class</span>=<span style="color:#cd5555">&#34;form-control&#34;</span> <span style="color:#658b00">placeholder</span>=<span style="color:#cd5555">&#34;zhangsan&#34;</span> <span style="color:#658b00">th:value</span>=<span style="color:#cd5555">&#34;${emp!=null}?${emp.lastName}&#34;</span>&gt;
    &lt;/<span style="color:#8b008b;font-weight:bold">div</span>&gt;
    &lt;<span style="color:#8b008b;font-weight:bold">div</span> <span style="color:#658b00">class</span>=<span style="color:#cd5555">&#34;form-group&#34;</span>&gt;
        &lt;<span style="color:#8b008b;font-weight:bold">label</span>&gt;Email&lt;/<span style="color:#8b008b;font-weight:bold">label</span>&gt;
        &lt;<span style="color:#8b008b;font-weight:bold">input</span> <span style="color:#658b00">name</span>=<span style="color:#cd5555">&#34;email&#34;</span> <span style="color:#658b00">type</span>=<span style="color:#cd5555">&#34;email&#34;</span> <span style="color:#658b00">class</span>=<span style="color:#cd5555">&#34;form-control&#34;</span> <span style="color:#658b00">placeholder</span>=<span style="color:#cd5555">&#34;zhangsan@atguigu.com&#34;</span> <span style="color:#658b00">th:value</span>=<span style="color:#cd5555">&#34;${emp!=null}?${emp.email}&#34;</span>&gt;
    &lt;/<span style="color:#8b008b;font-weight:bold">div</span>&gt;
    &lt;<span style="color:#8b008b;font-weight:bold">div</span> <span style="color:#658b00">class</span>=<span style="color:#cd5555">&#34;form-group&#34;</span>&gt;
        &lt;<span style="color:#8b008b;font-weight:bold">label</span>&gt;Gender&lt;/<span style="color:#8b008b;font-weight:bold">label</span>&gt;&lt;<span style="color:#8b008b;font-weight:bold">br</span>/&gt;
        &lt;<span style="color:#8b008b;font-weight:bold">div</span> <span style="color:#658b00">class</span>=<span style="color:#cd5555">&#34;form-check form-check-inline&#34;</span>&gt;
            &lt;<span style="color:#8b008b;font-weight:bold">input</span> <span style="color:#658b00">class</span>=<span style="color:#cd5555">&#34;form-check-input&#34;</span> <span style="color:#658b00">type</span>=<span style="color:#cd5555">&#34;radio&#34;</span> <span style="color:#658b00">name</span>=<span style="color:#cd5555">&#34;gender&#34;</span> <span style="color:#658b00">value</span>=<span style="color:#cd5555">&#34;1&#34;</span> <span style="color:#658b00">th:checked</span>=<span style="color:#cd5555">&#34;${emp!=null}?${emp.gender==1}&#34;</span>&gt;
            &lt;<span style="color:#8b008b;font-weight:bold">label</span> <span style="color:#658b00">class</span>=<span style="color:#cd5555">&#34;form-check-label&#34;</span>&gt;男&lt;/<span style="color:#8b008b;font-weight:bold">label</span>&gt;
        &lt;/<span style="color:#8b008b;font-weight:bold">div</span>&gt;
        &lt;<span style="color:#8b008b;font-weight:bold">div</span> <span style="color:#658b00">class</span>=<span style="color:#cd5555">&#34;form-check form-check-inline&#34;</span>&gt;
            &lt;<span style="color:#8b008b;font-weight:bold">input</span> <span style="color:#658b00">class</span>=<span style="color:#cd5555">&#34;form-check-input&#34;</span> <span style="color:#658b00">type</span>=<span style="color:#cd5555">&#34;radio&#34;</span> <span style="color:#658b00">name</span>=<span style="color:#cd5555">&#34;gender&#34;</span> <span style="color:#658b00">value</span>=<span style="color:#cd5555">&#34;0&#34;</span> <span style="color:#658b00">th:checked</span>=<span style="color:#cd5555">&#34;${emp!=null}?${emp.gender==0}&#34;</span>&gt;
            &lt;<span style="color:#8b008b;font-weight:bold">label</span> <span style="color:#658b00">class</span>=<span style="color:#cd5555">&#34;form-check-label&#34;</span>&gt;女&lt;/<span style="color:#8b008b;font-weight:bold">label</span>&gt;
        &lt;/<span style="color:#8b008b;font-weight:bold">div</span>&gt;
    &lt;/<span style="color:#8b008b;font-weight:bold">div</span>&gt;
    &lt;<span style="color:#8b008b;font-weight:bold">div</span> <span style="color:#658b00">class</span>=<span style="color:#cd5555">&#34;form-group&#34;</span>&gt;
        &lt;<span style="color:#8b008b;font-weight:bold">label</span>&gt;department&lt;/<span style="color:#8b008b;font-weight:bold">label</span>&gt;
        <span style="color:#228b22">&lt;!--提交的是部门的id--&gt;</span>
        &lt;<span style="color:#8b008b;font-weight:bold">select</span> <span style="color:#658b00">class</span>=<span style="color:#cd5555">&#34;form-control&#34;</span> <span style="color:#658b00">name</span>=<span style="color:#cd5555">&#34;department.id&#34;</span>&gt;
            &lt;<span style="color:#8b008b;font-weight:bold">option</span> <span style="color:#658b00">th:selected</span>=<span style="color:#cd5555">&#34;${emp!=null}?${dept.id == emp.department.id}&#34;</span> <span style="color:#658b00">th:value</span>=<span style="color:#cd5555">&#34;${dept.id}&#34;</span> <span style="color:#658b00">th:each</span>=<span style="color:#cd5555">&#34;dept:${depts}&#34;</span> <span style="color:#658b00">th:text</span>=<span style="color:#cd5555">&#34;${dept.departmentName}&#34;</span>&gt;1&lt;/<span style="color:#8b008b;font-weight:bold">option</span>&gt;
        &lt;/<span style="color:#8b008b;font-weight:bold">select</span>&gt;
    &lt;/<span style="color:#8b008b;font-weight:bold">div</span>&gt;
    &lt;<span style="color:#8b008b;font-weight:bold">div</span> <span style="color:#658b00">class</span>=<span style="color:#cd5555">&#34;form-group&#34;</span>&gt;
        &lt;<span style="color:#8b008b;font-weight:bold">label</span>&gt;Birth&lt;/<span style="color:#8b008b;font-weight:bold">label</span>&gt;
        &lt;<span style="color:#8b008b;font-weight:bold">input</span> <span style="color:#658b00">name</span>=<span style="color:#cd5555">&#34;birth&#34;</span> <span style="color:#658b00">type</span>=<span style="color:#cd5555">&#34;text&#34;</span> <span style="color:#658b00">class</span>=<span style="color:#cd5555">&#34;form-control&#34;</span> <span style="color:#658b00">placeholder</span>=<span style="color:#cd5555">&#34;zhangsan&#34;</span> <span style="color:#658b00">th:value</span>=<span style="color:#cd5555">&#34;${emp!=null}?${#dates.format(emp.birth, &#39;yyyy-MM-dd HH:mm&#39;)}&#34;</span>&gt;
    &lt;/<span style="color:#8b008b;font-weight:bold">div</span>&gt;
    &lt;<span style="color:#8b008b;font-weight:bold">button</span> <span style="color:#658b00">type</span>=<span style="color:#cd5555">&#34;submit&#34;</span> <span style="color:#658b00">class</span>=<span style="color:#cd5555">&#34;btn btn-primary&#34;</span> <span style="color:#658b00">th:text</span>=<span style="color:#cd5555">&#34;${emp!=null}?&#39;修改&#39;:&#39;添加&#39;&#34;</span>&gt;添加&lt;/<span style="color:#8b008b;font-weight:bold">button</span>&gt;
&lt;/<span style="color:#8b008b;font-weight:bold">form</span>&gt;
</code></pre></div><h3 id="8crud-员工删除">8）、CRUD-员工删除</h3>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-html" data-lang="html">&lt;<span style="color:#8b008b;font-weight:bold">tr</span> <span style="color:#658b00">th:each</span>=<span style="color:#cd5555">&#34;emp:${emps}&#34;</span>&gt;
    &lt;<span style="color:#8b008b;font-weight:bold">td</span> <span style="color:#658b00">th:text</span>=<span style="color:#cd5555">&#34;${emp.id}&#34;</span>&gt;&lt;/<span style="color:#8b008b;font-weight:bold">td</span>&gt;
    &lt;<span style="color:#8b008b;font-weight:bold">td</span>&gt;[[${emp.lastName}]]&lt;/<span style="color:#8b008b;font-weight:bold">td</span>&gt;
    &lt;<span style="color:#8b008b;font-weight:bold">td</span> <span style="color:#658b00">th:text</span>=<span style="color:#cd5555">&#34;${emp.email}&#34;</span>&gt;&lt;/<span style="color:#8b008b;font-weight:bold">td</span>&gt;
    &lt;<span style="color:#8b008b;font-weight:bold">td</span> <span style="color:#658b00">th:text</span>=<span style="color:#cd5555">&#34;${emp.gender}==0?&#39;女&#39;:&#39;男&#39;&#34;</span>&gt;&lt;/<span style="color:#8b008b;font-weight:bold">td</span>&gt;
    &lt;<span style="color:#8b008b;font-weight:bold">td</span> <span style="color:#658b00">th:text</span>=<span style="color:#cd5555">&#34;${emp.department.departmentName}&#34;</span>&gt;&lt;/<span style="color:#8b008b;font-weight:bold">td</span>&gt;
    &lt;<span style="color:#8b008b;font-weight:bold">td</span> <span style="color:#658b00">th:text</span>=<span style="color:#cd5555">&#34;${#dates.format(emp.birth, &#39;yyyy-MM-dd HH:mm&#39;)}&#34;</span>&gt;&lt;/<span style="color:#8b008b;font-weight:bold">td</span>&gt;
    &lt;<span style="color:#8b008b;font-weight:bold">td</span>&gt;
        &lt;<span style="color:#8b008b;font-weight:bold">a</span> <span style="color:#658b00">class</span>=<span style="color:#cd5555">&#34;btn btn-sm btn-primary&#34;</span> <span style="color:#658b00">th:href</span>=<span style="color:#cd5555">&#34;@{/emp/}+${emp.id}&#34;</span>&gt;编辑&lt;/<span style="color:#8b008b;font-weight:bold">a</span>&gt;
        &lt;<span style="color:#8b008b;font-weight:bold">button</span> <span style="color:#658b00">th:attr</span>=<span style="color:#cd5555">&#34;del_uri=@{/emp/}+${emp.id}&#34;</span> <span style="color:#658b00">class</span>=<span style="color:#cd5555">&#34;btn btn-sm btn-danger deleteBtn&#34;</span>&gt;删除&lt;/<span style="color:#8b008b;font-weight:bold">button</span>&gt;
    &lt;/<span style="color:#8b008b;font-weight:bold">td</span>&gt;
&lt;/<span style="color:#8b008b;font-weight:bold">tr</span>&gt;


&lt;<span style="color:#8b008b;font-weight:bold">script</span>&gt;
    $(<span style="color:#cd5555">&#34;.deleteBtn&#34;</span>).click(<span style="color:#8b008b;font-weight:bold">function</span>(){
        <span style="color:#228b22">//删除当前员工的
</span><span style="color:#228b22"></span>        $(<span style="color:#cd5555">&#34;#deleteEmpForm&#34;</span>).attr(<span style="color:#cd5555">&#34;action&#34;</span>,$(<span style="color:#8b008b;font-weight:bold">this</span>).attr(<span style="color:#cd5555">&#34;del_uri&#34;</span>)).submit();
        <span style="color:#8b008b;font-weight:bold">return</span> <span style="color:#8b008b;font-weight:bold">false</span>;
    });
&lt;/<span style="color:#8b008b;font-weight:bold">script</span>&gt;
</code></pre></div><h2 id="7错误处理机制">7、错误处理机制</h2>
<h3 id="1springboot默认的错误处理机制">1）、SpringBoot默认的错误处理机制</h3>
<p>默认效果：</p>
<p>​		1）、浏览器，返回一个默认的错误页面</p>
<p><img src="images/%E6%90%9C%E7%8B%97%E6%88%AA%E5%9B%BE20180226173408.png" alt=""></p>
<p>浏览器发送请求的请求头：</p>
<p><img src="images/%E6%90%9C%E7%8B%97%E6%88%AA%E5%9B%BE20180226180347.png" alt=""></p>
<p>​		2）、如果是其他客户端，默认响应一个json数据</p>
<p><img src="images/%E6%90%9C%E7%8B%97%E6%88%AA%E5%9B%BE20180226173527.png" alt=""></p>
<p>​		<img src="images/%E6%90%9C%E7%8B%97%E6%88%AA%E5%9B%BE20180226180504.png" alt=""></p>
<p>原理：</p>
<p>​	可以参照ErrorMvcAutoConfiguration；错误处理的自动配置；</p>
<pre><code>给容器中添加了以下组件
</code></pre>
<p>​	1、DefaultErrorAttributes：</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java">帮我们在页面共享信息<span style="color:#a61717;background-color:#e3d2d2">；</span>
<span style="color:#707a7c">@Override</span>
	<span style="color:#8b008b;font-weight:bold">public</span> Map&lt;String, Object&gt; <span style="color:#008b45">getErrorAttributes</span>(RequestAttributes requestAttributes,
			<span style="color:#00688b;font-weight:bold">boolean</span> includeStackTrace) {
		Map&lt;String, Object&gt; errorAttributes = <span style="color:#8b008b;font-weight:bold">new</span> LinkedHashMap&lt;String, Object&gt;();
		errorAttributes.<span style="color:#658b00">put</span>(<span style="color:#cd5555">&#34;timestamp&#34;</span>, <span style="color:#8b008b;font-weight:bold">new</span> Date());
		addStatus(errorAttributes, requestAttributes);
		addErrorDetails(errorAttributes, requestAttributes, includeStackTrace);
		addPath(errorAttributes, requestAttributes);
		<span style="color:#8b008b;font-weight:bold">return</span> errorAttributes;
	}
</code></pre></div><p>​	2、BasicErrorController：处理默认/error请求</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#707a7c">@Controller</span>
<span style="color:#707a7c">@RequestMapping</span>(<span style="color:#cd5555">&#34;${server.error.path:${error.path:/error}}&#34;</span>)
<span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#8b008b;font-weight:bold">class</span> <span style="color:#008b45;font-weight:bold">BasicErrorController</span> <span style="color:#8b008b;font-weight:bold">extends</span> AbstractErrorController {
    
    <span style="color:#707a7c">@RequestMapping</span>(produces = <span style="color:#cd5555">&#34;text/html&#34;</span>)<span style="color:#228b22">//产生html类型的数据；浏览器发送的请求来到这个方法处理
</span><span style="color:#228b22"></span>	<span style="color:#8b008b;font-weight:bold">public</span> ModelAndView <span style="color:#008b45">errorHtml</span>(HttpServletRequest request,
			HttpServletResponse response) {
		HttpStatus status = getStatus(request);
		Map&lt;String, Object&gt; model = Collections.<span style="color:#658b00">unmodifiableMap</span>(getErrorAttributes(
				request, isIncludeStackTrace(request, MediaType.<span style="color:#658b00">TEXT_HTML</span>)));
		response.<span style="color:#658b00">setStatus</span>(status.<span style="color:#658b00">value</span>());
        
        <span style="color:#228b22">//去哪个页面作为错误页面；包含页面地址和页面内容
</span><span style="color:#228b22"></span>		ModelAndView modelAndView = resolveErrorView(request, response, status, model);
		<span style="color:#8b008b;font-weight:bold">return</span> (modelAndView == <span style="color:#8b008b;font-weight:bold">null</span> ? <span style="color:#8b008b;font-weight:bold">new</span> ModelAndView(<span style="color:#cd5555">&#34;error&#34;</span>, model) : modelAndView);
	}

	<span style="color:#707a7c">@RequestMapping</span>
	<span style="color:#707a7c">@ResponseBody</span>    <span style="color:#228b22">//产生json数据，其他客户端来到这个方法处理；
</span><span style="color:#228b22"></span>	<span style="color:#8b008b;font-weight:bold">public</span> ResponseEntity&lt;Map&lt;String, Object&gt;&gt; <span style="color:#008b45">error</span>(HttpServletRequest request) {
		Map&lt;String, Object&gt; body = getErrorAttributes(request,
				isIncludeStackTrace(request, MediaType.<span style="color:#658b00">ALL</span>));
		HttpStatus status = getStatus(request);
		<span style="color:#8b008b;font-weight:bold">return</span> <span style="color:#8b008b;font-weight:bold">new</span> ResponseEntity&lt;Map&lt;String, Object&gt;&gt;(body, status);
	}
</code></pre></div><p>​	3、ErrorPageCustomizer：</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java">	<span style="color:#707a7c">@Value</span>(<span style="color:#cd5555">&#34;${error.path:/error}&#34;</span>)
	<span style="color:#8b008b;font-weight:bold">private</span> String path = <span style="color:#cd5555">&#34;/error&#34;</span>;  系统出现错误以后来到error请求进行处理<span style="color:#a61717;background-color:#e3d2d2">；（</span>web.<span style="color:#658b00">xml注册的错误页面规则</span><span style="color:#a61717;background-color:#e3d2d2">）</span>
</code></pre></div><p>​	4、DefaultErrorViewResolver：</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#707a7c">@Override</span>
	<span style="color:#8b008b;font-weight:bold">public</span> ModelAndView <span style="color:#008b45">resolveErrorView</span>(HttpServletRequest request, HttpStatus status,
			Map&lt;String, Object&gt; model) {
		ModelAndView modelAndView = resolve(String.<span style="color:#658b00">valueOf</span>(status), model);
		<span style="color:#8b008b;font-weight:bold">if</span> (modelAndView == <span style="color:#8b008b;font-weight:bold">null</span> &amp;&amp; SERIES_VIEWS.<span style="color:#658b00">containsKey</span>(status.<span style="color:#658b00">series</span>())) {
			modelAndView = resolve(SERIES_VIEWS.<span style="color:#658b00">get</span>(status.<span style="color:#658b00">series</span>()), model);
		}
		<span style="color:#8b008b;font-weight:bold">return</span> modelAndView;
	}

	<span style="color:#8b008b;font-weight:bold">private</span> ModelAndView <span style="color:#008b45">resolve</span>(String viewName, Map&lt;String, Object&gt; model) {
        <span style="color:#228b22">//默认SpringBoot可以去找到一个页面？  error/404
</span><span style="color:#228b22"></span>		String errorViewName = <span style="color:#cd5555">&#34;error/&#34;</span> + viewName;
        
        <span style="color:#228b22">//模板引擎可以解析这个页面地址就用模板引擎解析
</span><span style="color:#228b22"></span>		TemplateAvailabilityProvider provider = <span style="color:#8b008b;font-weight:bold">this</span>.<span style="color:#658b00">templateAvailabilityProviders</span>
				.<span style="color:#658b00">getProvider</span>(errorViewName, <span style="color:#8b008b;font-weight:bold">this</span>.<span style="color:#658b00">applicationContext</span>);
		<span style="color:#8b008b;font-weight:bold">if</span> (provider != <span style="color:#8b008b;font-weight:bold">null</span>) {
            <span style="color:#228b22">//模板引擎可用的情况下返回到errorViewName指定的视图地址
</span><span style="color:#228b22"></span>			<span style="color:#8b008b;font-weight:bold">return</span> <span style="color:#8b008b;font-weight:bold">new</span> ModelAndView(errorViewName, model);
		}
        <span style="color:#228b22">//模板引擎不可用，就在静态资源文件夹下找errorViewName对应的页面   error/404.html
</span><span style="color:#228b22"></span>		<span style="color:#8b008b;font-weight:bold">return</span> resolveResource(errorViewName, model);
	}
</code></pre></div><p>​	步骤：</p>
<p>​		一但系统出现4xx或者5xx之类的错误；ErrorPageCustomizer就会生效（定制错误的响应规则）；就会来到/error请求；就会被<strong>BasicErrorController</strong>处理；</p>
<p>​		1）响应页面；去哪个页面是由<strong>DefaultErrorViewResolver</strong>解析得到的；</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#8b008b;font-weight:bold">protected</span> ModelAndView <span style="color:#008b45">resolveErrorView</span>(HttpServletRequest request,
      HttpServletResponse response, HttpStatus status, Map&lt;String, Object&gt; model) {
    <span style="color:#228b22">//所有的ErrorViewResolver得到ModelAndView
</span><span style="color:#228b22"></span>   <span style="color:#8b008b;font-weight:bold">for</span> (ErrorViewResolver resolver : <span style="color:#8b008b;font-weight:bold">this</span>.<span style="color:#658b00">errorViewResolvers</span>) {
      ModelAndView modelAndView = resolver.<span style="color:#658b00">resolveErrorView</span>(request, status, model);
      <span style="color:#8b008b;font-weight:bold">if</span> (modelAndView != <span style="color:#8b008b;font-weight:bold">null</span>) {
         <span style="color:#8b008b;font-weight:bold">return</span> modelAndView;
      }
   }
   <span style="color:#8b008b;font-weight:bold">return</span> <span style="color:#8b008b;font-weight:bold">null</span>;
}
</code></pre></div><h3 id="2如果定制错误响应">2）、如果定制错误响应：</h3>
<h4 id="1如何定制错误的页面"><strong>1）、如何定制错误的页面；</strong></h4>
<p>​			<strong>1）、有模板引擎的情况下；error/状态码;</strong> 【将错误页面命名为  错误状态码.html 放在模板引擎文件夹里面的 error文件夹下】，发生此状态码的错误就会来到  对应的页面；</p>
<p>​			我们可以使用4xx和5xx作为错误页面的文件名来匹配这种类型的所有错误，精确优先（优先寻找精确的状态码.html）；</p>
<p>​			页面能获取的信息；</p>
<p>​				timestamp：时间戳</p>
<p>​				status：状态码</p>
<p>​				error：错误提示</p>
<p>​				exception：异常对象</p>
<p>​				message：异常消息</p>
<p>​				errors：JSR303数据校验的错误都在这里</p>
<p>​			2）、没有模板引擎（模板引擎找不到这个错误页面），静态资源文件夹下找；</p>
<p>​			3）、以上都没有错误页面，就是默认来到SpringBoot默认的错误提示页面；</p>
<h4 id="2如何定制错误的json数据">2）、如何定制错误的json数据；</h4>
<p>​		1）、自定义异常处理&amp;返回定制json数据；</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#707a7c">@ControllerAdvice</span>
<span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#8b008b;font-weight:bold">class</span> <span style="color:#008b45;font-weight:bold">MyExceptionHandler</span> {

    <span style="color:#707a7c">@ResponseBody</span>
    <span style="color:#707a7c">@ExceptionHandler</span>(UserNotExistException.<span style="color:#658b00">class</span>)
    <span style="color:#8b008b;font-weight:bold">public</span> Map&lt;String,Object&gt; <span style="color:#008b45">handleException</span>(Exception e){
        Map&lt;String,Object&gt; map = <span style="color:#8b008b;font-weight:bold">new</span> HashMap&lt;&gt;();
        map.<span style="color:#658b00">put</span>(<span style="color:#cd5555">&#34;code&#34;</span>,<span style="color:#cd5555">&#34;user.notexist&#34;</span>);
        map.<span style="color:#658b00">put</span>(<span style="color:#cd5555">&#34;message&#34;</span>,e.<span style="color:#658b00">getMessage</span>());
        <span style="color:#8b008b;font-weight:bold">return</span> map;
    }
}
<span style="color:#228b22">//没有自适应效果...
</span></code></pre></div><p>​		2）、转发到/error进行自适应响应效果处理</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"> <span style="color:#707a7c">@ExceptionHandler</span>(UserNotExistException.<span style="color:#658b00">class</span>)
    <span style="color:#8b008b;font-weight:bold">public</span> String <span style="color:#008b45">handleException</span>(Exception e, HttpServletRequest request){
        Map&lt;String,Object&gt; map = <span style="color:#8b008b;font-weight:bold">new</span> HashMap&lt;&gt;();
        <span style="color:#228b22">//传入我们自己的错误状态码  4xx 5xx，否则就不会进入定制错误页面的解析流程
</span><span style="color:#228b22"></span>        <span style="color:#228b22">/**
</span><span style="color:#228b22">         * Integer statusCode = (Integer) request
</span><span style="color:#228b22">         .getAttribute(&#34;javax.servlet.error.status_code&#34;);
</span><span style="color:#228b22">         */</span>
        request.<span style="color:#658b00">setAttribute</span>(<span style="color:#cd5555">&#34;javax.servlet.error.status_code&#34;</span>,500);
        map.<span style="color:#658b00">put</span>(<span style="color:#cd5555">&#34;code&#34;</span>,<span style="color:#cd5555">&#34;user.notexist&#34;</span>);
        map.<span style="color:#658b00">put</span>(<span style="color:#cd5555">&#34;message&#34;</span>,e.<span style="color:#658b00">getMessage</span>());
        <span style="color:#228b22">//转发到/error
</span><span style="color:#228b22"></span>        <span style="color:#8b008b;font-weight:bold">return</span> <span style="color:#cd5555">&#34;forward:/error&#34;</span>;
    }
</code></pre></div><h4 id="3将我们的定制数据携带出去">3）、将我们的定制数据携带出去；</h4>
<p>出现错误以后，会来到/error请求，会被BasicErrorController处理，响应出去可以获取的数据是由getErrorAttributes得到的（是AbstractErrorController（ErrorController）规定的方法）；</p>
<p>​	1、完全来编写一个ErrorController的实现类【或者是编写AbstractErrorController的子类】，放在容器中；</p>
<p>​	2、页面上能用的数据，或者是json返回能用的数据都是通过errorAttributes.getErrorAttributes得到；</p>
<p>​			容器中DefaultErrorAttributes.getErrorAttributes()；默认进行数据处理的；</p>
<p>自定义ErrorAttributes</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#228b22">//给容器中加入我们自己定义的ErrorAttributes
</span><span style="color:#228b22"></span><span style="color:#707a7c">@Component</span>
<span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#8b008b;font-weight:bold">class</span> <span style="color:#008b45;font-weight:bold">MyErrorAttributes</span> <span style="color:#8b008b;font-weight:bold">extends</span> DefaultErrorAttributes {

    <span style="color:#707a7c">@Override</span>
    <span style="color:#8b008b;font-weight:bold">public</span> Map&lt;String, Object&gt; <span style="color:#008b45">getErrorAttributes</span>(RequestAttributes requestAttributes, <span style="color:#00688b;font-weight:bold">boolean</span> includeStackTrace) {
        Map&lt;String, Object&gt; map = <span style="color:#8b008b;font-weight:bold">super</span>.<span style="color:#658b00">getErrorAttributes</span>(requestAttributes, includeStackTrace);
        map.<span style="color:#658b00">put</span>(<span style="color:#cd5555">&#34;company&#34;</span>,<span style="color:#cd5555">&#34;atguigu&#34;</span>);
        <span style="color:#8b008b;font-weight:bold">return</span> map;
    }
}
</code></pre></div><p>最终的效果：响应是自适应的，可以通过定制ErrorAttributes改变需要返回的内容，</p>
<p><img src="images/%E6%90%9C%E7%8B%97%E6%88%AA%E5%9B%BE20180228135513.png" alt=""></p>
<h2 id="8配置嵌入式servlet容器">8、配置嵌入式Servlet容器</h2>
<p>SpringBoot默认使用Tomcat作为嵌入式的Servlet容器；</p>
<p><img src="images/%E6%90%9C%E7%8B%97%E6%88%AA%E5%9B%BE20180301142915.png" alt=""></p>
<p>问题？</p>
<h3 id="1如何定制和修改servlet容器的相关配置">1）、如何定制和修改Servlet容器的相关配置；</h3>
<p>1、修改和server有关的配置（ServerProperties【也是EmbeddedServletContainerCustomizer】）；</p>
<pre><code class="language-properties" data-lang="properties">server.port=8081
server.context-path=/crud

server.tomcat.uri-encoding=UTF-8

//通用的Servlet容器设置
server.xxx
//Tomcat的设置
server.tomcat.xxx
</code></pre><p>2、编写一个<strong>EmbeddedServletContainerCustomizer</strong>：嵌入式的Servlet容器的定制器；来修改Servlet容器的配置</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#707a7c">@Bean</span>  <span style="color:#228b22">//一定要将这个定制器加入到容器中
</span><span style="color:#228b22"></span><span style="color:#8b008b;font-weight:bold">public</span> EmbeddedServletContainerCustomizer <span style="color:#008b45">embeddedServletContainerCustomizer</span>(){
    <span style="color:#8b008b;font-weight:bold">return</span> <span style="color:#8b008b;font-weight:bold">new</span> EmbeddedServletContainerCustomizer() {

        <span style="color:#228b22">//定制嵌入式的Servlet容器相关的规则
</span><span style="color:#228b22"></span>        <span style="color:#707a7c">@Override</span>
        <span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#00688b;font-weight:bold">void</span> <span style="color:#008b45">customize</span>(ConfigurableEmbeddedServletContainer container) {
            container.<span style="color:#658b00">setPort</span>(8083);
        }
    };
}
</code></pre></div><h3 id="2注册servlet三大组件servletfilterlistener">2）、注册Servlet三大组件【Servlet、Filter、Listener】</h3>
<p>由于SpringBoot默认是以jar包的方式启动嵌入式的Servlet容器来启动SpringBoot的web应用，没有web.xml文件。</p>
<p>注册三大组件用以下方式</p>
<p>ServletRegistrationBean</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#228b22">//注册三大组件
</span><span style="color:#228b22"></span><span style="color:#707a7c">@Bean</span>
<span style="color:#8b008b;font-weight:bold">public</span> ServletRegistrationBean <span style="color:#008b45">myServlet</span>(){
    ServletRegistrationBean registrationBean = <span style="color:#8b008b;font-weight:bold">new</span> ServletRegistrationBean(<span style="color:#8b008b;font-weight:bold">new</span> MyServlet(),<span style="color:#cd5555">&#34;/myServlet&#34;</span>);
    <span style="color:#8b008b;font-weight:bold">return</span> registrationBean;
}

</code></pre></div><p>FilterRegistrationBean</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#707a7c">@Bean</span>
<span style="color:#8b008b;font-weight:bold">public</span> FilterRegistrationBean <span style="color:#008b45">myFilter</span>(){
    FilterRegistrationBean registrationBean = <span style="color:#8b008b;font-weight:bold">new</span> FilterRegistrationBean();
    registrationBean.<span style="color:#658b00">setFilter</span>(<span style="color:#8b008b;font-weight:bold">new</span> MyFilter());
    registrationBean.<span style="color:#658b00">setUrlPatterns</span>(Arrays.<span style="color:#658b00">asList</span>(<span style="color:#cd5555">&#34;/hello&#34;</span>,<span style="color:#cd5555">&#34;/myServlet&#34;</span>));
    <span style="color:#8b008b;font-weight:bold">return</span> registrationBean;
}
</code></pre></div><p>ServletListenerRegistrationBean</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#707a7c">@Bean</span>
<span style="color:#8b008b;font-weight:bold">public</span> ServletListenerRegistrationBean <span style="color:#008b45">myListener</span>(){
    ServletListenerRegistrationBean&lt;MyListener&gt; registrationBean = <span style="color:#8b008b;font-weight:bold">new</span> ServletListenerRegistrationBean&lt;&gt;(<span style="color:#8b008b;font-weight:bold">new</span> MyListener());
    <span style="color:#8b008b;font-weight:bold">return</span> registrationBean;
}
</code></pre></div><p>SpringBoot帮我们自动SpringMVC的时候，自动的注册SpringMVC的前端控制器；DIspatcherServlet；</p>
<p>DispatcherServletAutoConfiguration中：</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#707a7c">@Bean</span>(name = DEFAULT_DISPATCHER_SERVLET_REGISTRATION_BEAN_NAME)
<span style="color:#707a7c">@ConditionalOnBean</span>(value = DispatcherServlet.<span style="color:#658b00">class</span>, name = DEFAULT_DISPATCHER_SERVLET_BEAN_NAME)
<span style="color:#8b008b;font-weight:bold">public</span> ServletRegistrationBean <span style="color:#008b45">dispatcherServletRegistration</span>(
      DispatcherServlet dispatcherServlet) {
   ServletRegistrationBean registration = <span style="color:#8b008b;font-weight:bold">new</span> ServletRegistrationBean(
         dispatcherServlet, <span style="color:#8b008b;font-weight:bold">this</span>.<span style="color:#658b00">serverProperties</span>.<span style="color:#658b00">getServletMapping</span>());
    <span style="color:#228b22">//默认拦截： /  所有请求；包静态资源，但是不拦截jsp请求；   /*会拦截jsp
</span><span style="color:#228b22"></span>    <span style="color:#228b22">//可以通过server.servletPath来修改SpringMVC前端控制器默认拦截的请求路径
</span><span style="color:#228b22"></span>    
   registration.<span style="color:#658b00">setName</span>(DEFAULT_DISPATCHER_SERVLET_BEAN_NAME);
   registration.<span style="color:#658b00">setLoadOnStartup</span>(
         <span style="color:#8b008b;font-weight:bold">this</span>.<span style="color:#658b00">webMvcProperties</span>.<span style="color:#658b00">getServlet</span>().<span style="color:#658b00">getLoadOnStartup</span>());
   <span style="color:#8b008b;font-weight:bold">if</span> (<span style="color:#8b008b;font-weight:bold">this</span>.<span style="color:#658b00">multipartConfig</span> != <span style="color:#8b008b;font-weight:bold">null</span>) {
      registration.<span style="color:#658b00">setMultipartConfig</span>(<span style="color:#8b008b;font-weight:bold">this</span>.<span style="color:#658b00">multipartConfig</span>);
   }
   <span style="color:#8b008b;font-weight:bold">return</span> registration;
}

</code></pre></div><p>2）、SpringBoot能不能支持其他的Servlet容器；</p>
<h3 id="3替换为其他嵌入式servlet容器">3）、替换为其他嵌入式Servlet容器</h3>
<p><img src="images/%E6%90%9C%E7%8B%97%E6%88%AA%E5%9B%BE20180302114401.png" alt=""></p>
<p>默认支持：</p>
<p>Tomcat（默认使用）</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml"><span style="color:#8b008b;font-weight:bold">&lt;dependency&gt;</span>
   <span style="color:#8b008b;font-weight:bold">&lt;groupId&gt;</span>org.springframework.boot<span style="color:#8b008b;font-weight:bold">&lt;/groupId&gt;</span>
   <span style="color:#8b008b;font-weight:bold">&lt;artifactId&gt;</span>spring-boot-starter-web<span style="color:#8b008b;font-weight:bold">&lt;/artifactId&gt;</span>
   引入web模块默认就是使用嵌入式的Tomcat作为Servlet容器；
<span style="color:#8b008b;font-weight:bold">&lt;/dependency&gt;</span>
</code></pre></div><p>Jetty</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml"><span style="color:#228b22">&lt;!-- 引入web模块 --&gt;</span>
<span style="color:#8b008b;font-weight:bold">&lt;dependency&gt;</span>
   <span style="color:#8b008b;font-weight:bold">&lt;groupId&gt;</span>org.springframework.boot<span style="color:#8b008b;font-weight:bold">&lt;/groupId&gt;</span>
   <span style="color:#8b008b;font-weight:bold">&lt;artifactId&gt;</span>spring-boot-starter-web<span style="color:#8b008b;font-weight:bold">&lt;/artifactId&gt;</span>
   <span style="color:#8b008b;font-weight:bold">&lt;exclusions&gt;</span>
      <span style="color:#8b008b;font-weight:bold">&lt;exclusion&gt;</span>
         <span style="color:#8b008b;font-weight:bold">&lt;artifactId&gt;</span>spring-boot-starter-tomcat<span style="color:#8b008b;font-weight:bold">&lt;/artifactId&gt;</span>
         <span style="color:#8b008b;font-weight:bold">&lt;groupId&gt;</span>org.springframework.boot<span style="color:#8b008b;font-weight:bold">&lt;/groupId&gt;</span>
      <span style="color:#8b008b;font-weight:bold">&lt;/exclusion&gt;</span>
   <span style="color:#8b008b;font-weight:bold">&lt;/exclusions&gt;</span>
<span style="color:#8b008b;font-weight:bold">&lt;/dependency&gt;</span>

<span style="color:#228b22">&lt;!--引入其他的Servlet容器--&gt;</span>
<span style="color:#8b008b;font-weight:bold">&lt;dependency&gt;</span>
   <span style="color:#8b008b;font-weight:bold">&lt;artifactId&gt;</span>spring-boot-starter-jetty<span style="color:#8b008b;font-weight:bold">&lt;/artifactId&gt;</span>
   <span style="color:#8b008b;font-weight:bold">&lt;groupId&gt;</span>org.springframework.boot<span style="color:#8b008b;font-weight:bold">&lt;/groupId&gt;</span>
<span style="color:#8b008b;font-weight:bold">&lt;/dependency&gt;</span>
</code></pre></div><p>Undertow</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml"><span style="color:#228b22">&lt;!-- 引入web模块 --&gt;</span>
<span style="color:#8b008b;font-weight:bold">&lt;dependency&gt;</span>
   <span style="color:#8b008b;font-weight:bold">&lt;groupId&gt;</span>org.springframework.boot<span style="color:#8b008b;font-weight:bold">&lt;/groupId&gt;</span>
   <span style="color:#8b008b;font-weight:bold">&lt;artifactId&gt;</span>spring-boot-starter-web<span style="color:#8b008b;font-weight:bold">&lt;/artifactId&gt;</span>
   <span style="color:#8b008b;font-weight:bold">&lt;exclusions&gt;</span>
      <span style="color:#8b008b;font-weight:bold">&lt;exclusion&gt;</span>
         <span style="color:#8b008b;font-weight:bold">&lt;artifactId&gt;</span>spring-boot-starter-tomcat<span style="color:#8b008b;font-weight:bold">&lt;/artifactId&gt;</span>
         <span style="color:#8b008b;font-weight:bold">&lt;groupId&gt;</span>org.springframework.boot<span style="color:#8b008b;font-weight:bold">&lt;/groupId&gt;</span>
      <span style="color:#8b008b;font-weight:bold">&lt;/exclusion&gt;</span>
   <span style="color:#8b008b;font-weight:bold">&lt;/exclusions&gt;</span>
<span style="color:#8b008b;font-weight:bold">&lt;/dependency&gt;</span>

<span style="color:#228b22">&lt;!--引入其他的Servlet容器--&gt;</span>
<span style="color:#8b008b;font-weight:bold">&lt;dependency&gt;</span>
   <span style="color:#8b008b;font-weight:bold">&lt;artifactId&gt;</span>spring-boot-starter-undertow<span style="color:#8b008b;font-weight:bold">&lt;/artifactId&gt;</span>
   <span style="color:#8b008b;font-weight:bold">&lt;groupId&gt;</span>org.springframework.boot<span style="color:#8b008b;font-weight:bold">&lt;/groupId&gt;</span>
<span style="color:#8b008b;font-weight:bold">&lt;/dependency&gt;</span>
</code></pre></div><h3 id="4嵌入式servlet容器自动配置原理">4）、嵌入式Servlet容器自动配置原理；</h3>
<p>EmbeddedServletContainerAutoConfiguration：嵌入式的Servlet容器自动配置？</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#707a7c">@AutoConfigureOrder</span>(Ordered.<span style="color:#658b00">HIGHEST_PRECEDENCE</span>)
<span style="color:#707a7c">@Configuration</span>
<span style="color:#707a7c">@ConditionalOnWebApplication</span>
<span style="color:#707a7c">@Import</span>(BeanPostProcessorsRegistrar.<span style="color:#658b00">class</span>)
<span style="color:#228b22">//导入BeanPostProcessorsRegistrar：Spring注解版；给容器中导入一些组件
</span><span style="color:#228b22">//导入了EmbeddedServletContainerCustomizerBeanPostProcessor：
</span><span style="color:#228b22">//后置处理器：bean初始化前后（创建完对象，还没赋值赋值）执行初始化工作
</span><span style="color:#228b22"></span><span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#8b008b;font-weight:bold">class</span> <span style="color:#008b45;font-weight:bold">EmbeddedServletContainerAutoConfiguration</span> {
    
    <span style="color:#707a7c">@Configuration</span>
	<span style="color:#707a7c">@ConditionalOnClass</span>({ Servlet.<span style="color:#658b00">class</span>, Tomcat.<span style="color:#658b00">class</span> })<span style="color:#228b22">//判断当前是否引入了Tomcat依赖；
</span><span style="color:#228b22"></span>	<span style="color:#707a7c">@ConditionalOnMissingBean</span>(value = EmbeddedServletContainerFactory.<span style="color:#658b00">class</span>, search = SearchStrategy.<span style="color:#658b00">CURRENT</span>)<span style="color:#228b22">//判断当前容器没有用户自己定义EmbeddedServletContainerFactory：嵌入式的Servlet容器工厂；作用：创建嵌入式的Servlet容器
</span><span style="color:#228b22"></span>	<span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#8b008b;font-weight:bold">static</span> <span style="color:#8b008b;font-weight:bold">class</span> <span style="color:#008b45;font-weight:bold">EmbeddedTomcat</span> {

		<span style="color:#707a7c">@Bean</span>
		<span style="color:#8b008b;font-weight:bold">public</span> TomcatEmbeddedServletContainerFactory <span style="color:#008b45">tomcatEmbeddedServletContainerFactory</span>() {
			<span style="color:#8b008b;font-weight:bold">return</span> <span style="color:#8b008b;font-weight:bold">new</span> TomcatEmbeddedServletContainerFactory();
		}

	}
    
    <span style="color:#228b22">/**
</span><span style="color:#228b22">	 * Nested configuration if Jetty is being used.
</span><span style="color:#228b22">	 */</span>
	<span style="color:#707a7c">@Configuration</span>
	<span style="color:#707a7c">@ConditionalOnClass</span>({ Servlet.<span style="color:#658b00">class</span>, Server.<span style="color:#658b00">class</span>, Loader.<span style="color:#658b00">class</span>,
			WebAppContext.<span style="color:#658b00">class</span> })
	<span style="color:#707a7c">@ConditionalOnMissingBean</span>(value = EmbeddedServletContainerFactory.<span style="color:#658b00">class</span>, search = SearchStrategy.<span style="color:#658b00">CURRENT</span>)
	<span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#8b008b;font-weight:bold">static</span> <span style="color:#8b008b;font-weight:bold">class</span> <span style="color:#008b45;font-weight:bold">EmbeddedJetty</span> {

		<span style="color:#707a7c">@Bean</span>
		<span style="color:#8b008b;font-weight:bold">public</span> JettyEmbeddedServletContainerFactory <span style="color:#008b45">jettyEmbeddedServletContainerFactory</span>() {
			<span style="color:#8b008b;font-weight:bold">return</span> <span style="color:#8b008b;font-weight:bold">new</span> JettyEmbeddedServletContainerFactory();
		}

	}

	<span style="color:#228b22">/**
</span><span style="color:#228b22">	 * Nested configuration if Undertow is being used.
</span><span style="color:#228b22">	 */</span>
	<span style="color:#707a7c">@Configuration</span>
	<span style="color:#707a7c">@ConditionalOnClass</span>({ Servlet.<span style="color:#658b00">class</span>, Undertow.<span style="color:#658b00">class</span>, SslClientAuthMode.<span style="color:#658b00">class</span> })
	<span style="color:#707a7c">@ConditionalOnMissingBean</span>(value = EmbeddedServletContainerFactory.<span style="color:#658b00">class</span>, search = SearchStrategy.<span style="color:#658b00">CURRENT</span>)
	<span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#8b008b;font-weight:bold">static</span> <span style="color:#8b008b;font-weight:bold">class</span> <span style="color:#008b45;font-weight:bold">EmbeddedUndertow</span> {

		<span style="color:#707a7c">@Bean</span>
		<span style="color:#8b008b;font-weight:bold">public</span> UndertowEmbeddedServletContainerFactory <span style="color:#008b45">undertowEmbeddedServletContainerFactory</span>() {
			<span style="color:#8b008b;font-weight:bold">return</span> <span style="color:#8b008b;font-weight:bold">new</span> UndertowEmbeddedServletContainerFactory();
		}

	}
</code></pre></div><p>1）、EmbeddedServletContainerFactory（嵌入式Servlet容器工厂）</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#8b008b;font-weight:bold">interface</span> <span style="color:#008b45;font-weight:bold">EmbeddedServletContainerFactory</span> {

   <span style="color:#228b22">//获取嵌入式的Servlet容器
</span><span style="color:#228b22"></span>   EmbeddedServletContainer <span style="color:#008b45">getEmbeddedServletContainer</span>(
         ServletContextInitializer... initializers);

}
</code></pre></div><p><img src="images/%E6%90%9C%E7%8B%97%E6%88%AA%E5%9B%BE20180302144835.png" alt=""></p>
<p>2）、EmbeddedServletContainer：（嵌入式的Servlet容器）</p>
<p><img src="images/%E6%90%9C%E7%8B%97%E6%88%AA%E5%9B%BE20180302144910.png" alt=""></p>
<p>3）、以<strong>TomcatEmbeddedServletContainerFactory</strong>为例</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#707a7c">@Override</span>
<span style="color:#8b008b;font-weight:bold">public</span> EmbeddedServletContainer <span style="color:#008b45">getEmbeddedServletContainer</span>(
      ServletContextInitializer... initializers) {
    <span style="color:#228b22">//创建一个Tomcat
</span><span style="color:#228b22"></span>   Tomcat tomcat = <span style="color:#8b008b;font-weight:bold">new</span> Tomcat();
    
    <span style="color:#228b22">//配置Tomcat的基本环节
</span><span style="color:#228b22"></span>   File baseDir = (<span style="color:#8b008b;font-weight:bold">this</span>.<span style="color:#658b00">baseDirectory</span> != <span style="color:#8b008b;font-weight:bold">null</span> ? <span style="color:#8b008b;font-weight:bold">this</span>.<span style="color:#658b00">baseDirectory</span>
         : createTempDir(<span style="color:#cd5555">&#34;tomcat&#34;</span>));
   tomcat.<span style="color:#658b00">setBaseDir</span>(baseDir.<span style="color:#658b00">getAbsolutePath</span>());
   Connector connector = <span style="color:#8b008b;font-weight:bold">new</span> Connector(<span style="color:#8b008b;font-weight:bold">this</span>.<span style="color:#658b00">protocol</span>);
   tomcat.<span style="color:#658b00">getService</span>().<span style="color:#658b00">addConnector</span>(connector);
   customizeConnector(connector);
   tomcat.<span style="color:#658b00">setConnector</span>(connector);
   tomcat.<span style="color:#658b00">getHost</span>().<span style="color:#658b00">setAutoDeploy</span>(<span style="color:#8b008b;font-weight:bold">false</span>);
   configureEngine(tomcat.<span style="color:#658b00">getEngine</span>());
   <span style="color:#8b008b;font-weight:bold">for</span> (Connector additionalConnector : <span style="color:#8b008b;font-weight:bold">this</span>.<span style="color:#658b00">additionalTomcatConnectors</span>) {
      tomcat.<span style="color:#658b00">getService</span>().<span style="color:#658b00">addConnector</span>(additionalConnector);
   }
   prepareContext(tomcat.<span style="color:#658b00">getHost</span>(), initializers);
    
    <span style="color:#228b22">//将配置好的Tomcat传入进去，返回一个EmbeddedServletContainer；并且启动Tomcat服务器
</span><span style="color:#228b22"></span>   <span style="color:#8b008b;font-weight:bold">return</span> getTomcatEmbeddedServletContainer(tomcat);
}
</code></pre></div><p>4）、我们对嵌入式容器的配置修改是怎么生效？</p>
<pre><code>ServerProperties、EmbeddedServletContainerCustomizer
</code></pre><p><strong>EmbeddedServletContainerCustomizer</strong>：定制器帮我们修改了Servlet容器的配置？</p>
<p>怎么修改的原理？</p>
<p>5）、容器中导入了<strong>EmbeddedServletContainerCustomizerBeanPostProcessor</strong></p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#228b22">//初始化之前
</span><span style="color:#228b22"></span><span style="color:#707a7c">@Override</span>
<span style="color:#8b008b;font-weight:bold">public</span> Object <span style="color:#008b45">postProcessBeforeInitialization</span>(Object bean, String beanName)
      <span style="color:#8b008b;font-weight:bold">throws</span> BeansException {
    <span style="color:#228b22">//如果当前初始化的是一个ConfigurableEmbeddedServletContainer类型的组件
</span><span style="color:#228b22"></span>   <span style="color:#8b008b;font-weight:bold">if</span> (bean <span style="color:#8b008b;font-weight:bold">instanceof</span> ConfigurableEmbeddedServletContainer) {
       <span style="color:#228b22">//
</span><span style="color:#228b22"></span>      postProcessBeforeInitialization((ConfigurableEmbeddedServletContainer) bean);
   }
   <span style="color:#8b008b;font-weight:bold">return</span> bean;
}

<span style="color:#8b008b;font-weight:bold">private</span> <span style="color:#00688b;font-weight:bold">void</span> <span style="color:#008b45">postProcessBeforeInitialization</span>(
			ConfigurableEmbeddedServletContainer bean) {
    <span style="color:#228b22">//获取所有的定制器，调用每一个定制器的customize方法来给Servlet容器进行属性赋值；
</span><span style="color:#228b22"></span>    <span style="color:#8b008b;font-weight:bold">for</span> (EmbeddedServletContainerCustomizer customizer : getCustomizers()) {
        customizer.<span style="color:#658b00">customize</span>(bean);
    }
}

<span style="color:#8b008b;font-weight:bold">private</span> Collection&lt;EmbeddedServletContainerCustomizer&gt; <span style="color:#008b45">getCustomizers</span>() {
    <span style="color:#8b008b;font-weight:bold">if</span> (<span style="color:#8b008b;font-weight:bold">this</span>.<span style="color:#658b00">customizers</span> == <span style="color:#8b008b;font-weight:bold">null</span>) {
        <span style="color:#228b22">// Look up does not include the parent context
</span><span style="color:#228b22"></span>        <span style="color:#8b008b;font-weight:bold">this</span>.<span style="color:#658b00">customizers</span> = <span style="color:#8b008b;font-weight:bold">new</span> ArrayList&lt;EmbeddedServletContainerCustomizer&gt;(
            <span style="color:#8b008b;font-weight:bold">this</span>.<span style="color:#658b00">beanFactory</span>
            <span style="color:#228b22">//从容器中获取所有这葛类型的组件：EmbeddedServletContainerCustomizer
</span><span style="color:#228b22"></span>            <span style="color:#228b22">//定制Servlet容器，给容器中可以添加一个EmbeddedServletContainerCustomizer类型的组件
</span><span style="color:#228b22"></span>            .<span style="color:#658b00">getBeansOfType</span>(EmbeddedServletContainerCustomizer.<span style="color:#658b00">class</span>,
                            <span style="color:#8b008b;font-weight:bold">false</span>, <span style="color:#8b008b;font-weight:bold">false</span>)
            .<span style="color:#658b00">values</span>());
        Collections.<span style="color:#658b00">sort</span>(<span style="color:#8b008b;font-weight:bold">this</span>.<span style="color:#658b00">customizers</span>, AnnotationAwareOrderComparator.<span style="color:#658b00">INSTANCE</span>);
        <span style="color:#8b008b;font-weight:bold">this</span>.<span style="color:#658b00">customizers</span> = Collections.<span style="color:#658b00">unmodifiableList</span>(<span style="color:#8b008b;font-weight:bold">this</span>.<span style="color:#658b00">customizers</span>);
    }
    <span style="color:#8b008b;font-weight:bold">return</span> <span style="color:#8b008b;font-weight:bold">this</span>.<span style="color:#658b00">customizers</span>;
}

ServerProperties也是定制器
</code></pre></div><p>步骤：</p>
<p>1）、SpringBoot根据导入的依赖情况，给容器中添加相应的EmbeddedServletContainerFactory【TomcatEmbeddedServletContainerFactory】</p>
<p>2）、容器中某个组件要创建对象就会惊动后置处理器；EmbeddedServletContainerCustomizerBeanPostProcessor；</p>
<p>只要是嵌入式的Servlet容器工厂，后置处理器就工作；</p>
<p>3）、后置处理器，从容器中获取所有的<strong>EmbeddedServletContainerCustomizer</strong>，调用定制器的定制方法</p>
<p>###5）、嵌入式Servlet容器启动原理；</p>
<p>什么时候创建嵌入式的Servlet容器工厂？什么时候获取嵌入式的Servlet容器并启动Tomcat；</p>
<p>获取嵌入式的Servlet容器工厂：</p>
<p>1）、SpringBoot应用启动运行run方法</p>
<p>2）、refreshContext(context);SpringBoot刷新IOC容器【创建IOC容器对象，并初始化容器，创建容器中的每一个组件】；如果是web应用创建<strong>AnnotationConfigEmbeddedWebApplicationContext</strong>，否则：<strong>AnnotationConfigApplicationContext</strong></p>
<p>3）、refresh(context);<strong>刷新刚才创建好的ioc容器；</strong></p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#00688b;font-weight:bold">void</span> <span style="color:#008b45">refresh</span>() <span style="color:#8b008b;font-weight:bold">throws</span> BeansException, IllegalStateException {
   <span style="color:#8b008b;font-weight:bold">synchronized</span> (<span style="color:#8b008b;font-weight:bold">this</span>.<span style="color:#658b00">startupShutdownMonitor</span>) {
      <span style="color:#228b22">// Prepare this context for refreshing.
</span><span style="color:#228b22"></span>      prepareRefresh();

      <span style="color:#228b22">// Tell the subclass to refresh the internal bean factory.
</span><span style="color:#228b22"></span>      ConfigurableListableBeanFactory beanFactory = obtainFreshBeanFactory();

      <span style="color:#228b22">// Prepare the bean factory for use in this context.
</span><span style="color:#228b22"></span>      prepareBeanFactory(beanFactory);

      <span style="color:#8b008b;font-weight:bold">try</span> {
         <span style="color:#228b22">// Allows post-processing of the bean factory in context subclasses.
</span><span style="color:#228b22"></span>         postProcessBeanFactory(beanFactory);

         <span style="color:#228b22">// Invoke factory processors registered as beans in the context.
</span><span style="color:#228b22"></span>         invokeBeanFactoryPostProcessors(beanFactory);

         <span style="color:#228b22">// Register bean processors that intercept bean creation.
</span><span style="color:#228b22"></span>         registerBeanPostProcessors(beanFactory);

         <span style="color:#228b22">// Initialize message source for this context.
</span><span style="color:#228b22"></span>         initMessageSource();

         <span style="color:#228b22">// Initialize event multicaster for this context.
</span><span style="color:#228b22"></span>         initApplicationEventMulticaster();

         <span style="color:#228b22">// Initialize other special beans in specific context subclasses.
</span><span style="color:#228b22"></span>         onRefresh();

         <span style="color:#228b22">// Check for listener beans and register them.
</span><span style="color:#228b22"></span>         registerListeners();

         <span style="color:#228b22">// Instantiate all remaining (non-lazy-init) singletons.
</span><span style="color:#228b22"></span>         finishBeanFactoryInitialization(beanFactory);

         <span style="color:#228b22">// Last step: publish corresponding event.
</span><span style="color:#228b22"></span>         finishRefresh();
      }

      <span style="color:#8b008b;font-weight:bold">catch</span> (BeansException ex) {
         <span style="color:#8b008b;font-weight:bold">if</span> (logger.<span style="color:#658b00">isWarnEnabled</span>()) {
            logger.<span style="color:#658b00">warn</span>(<span style="color:#cd5555">&#34;Exception encountered during context initialization - &#34;</span> +
                  <span style="color:#cd5555">&#34;cancelling refresh attempt: &#34;</span> + ex);
         }

         <span style="color:#228b22">// Destroy already created singletons to avoid dangling resources.
</span><span style="color:#228b22"></span>         destroyBeans();

         <span style="color:#228b22">// Reset &#39;active&#39; flag.
</span><span style="color:#228b22"></span>         cancelRefresh(ex);

         <span style="color:#228b22">// Propagate exception to caller.
</span><span style="color:#228b22"></span>         <span style="color:#8b008b;font-weight:bold">throw</span> ex;
      }

      <span style="color:#8b008b;font-weight:bold">finally</span> {
         <span style="color:#228b22">// Reset common introspection caches in Spring&#39;s core, since we
</span><span style="color:#228b22"></span>         <span style="color:#228b22">// might not ever need metadata for singleton beans anymore...
</span><span style="color:#228b22"></span>         resetCommonCaches();
      }
   }
}
</code></pre></div><p>4）、  onRefresh(); web的ioc容器重写了onRefresh方法</p>
<p>5）、webioc容器会创建嵌入式的Servlet容器；<strong>createEmbeddedServletContainer</strong>();</p>
<p><strong>6）、获取嵌入式的Servlet容器工厂：</strong></p>
<p>EmbeddedServletContainerFactory containerFactory = getEmbeddedServletContainerFactory();</p>
<p>​	从ioc容器中获取EmbeddedServletContainerFactory 组件；<strong>TomcatEmbeddedServletContainerFactory</strong>创建对象，后置处理器一看是这个对象，就获取所有的定制器来先定制Servlet容器的相关配置；</p>
<p>7）、<strong>使用容器工厂获取嵌入式的Servlet容器</strong>：this.embeddedServletContainer = containerFactory      .getEmbeddedServletContainer(getSelfInitializer());</p>
<p>8）、嵌入式的Servlet容器创建对象并启动Servlet容器；</p>
<p><strong>先启动嵌入式的Servlet容器，再将ioc容器中剩下没有创建出的对象获取出来；</strong></p>
<p><strong>==IOC容器启动创建嵌入式的Servlet容器==</strong></p>
<h2 id="9使用外置的servlet容器">9、使用外置的Servlet容器</h2>
<p>嵌入式Servlet容器：应用打成可执行的jar</p>
<p>​		优点：简单、便携；</p>
<p>​		缺点：默认不支持JSP、优化定制比较复杂（使用定制器【ServerProperties、自定义EmbeddedServletContainerCustomizer】，自己编写嵌入式Servlet容器的创建工厂【EmbeddedServletContainerFactory】）；</p>
<p>外置的Servlet容器：外面安装Tomcat&mdash;应用war包的方式打包；</p>
<h3 id="步骤">步骤</h3>
<p>1）、必须创建一个war项目；（利用idea创建好目录结构）</p>
<p>2）、将嵌入式的Tomcat指定为provided；</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml"><span style="color:#8b008b;font-weight:bold">&lt;dependency&gt;</span>
   <span style="color:#8b008b;font-weight:bold">&lt;groupId&gt;</span>org.springframework.boot<span style="color:#8b008b;font-weight:bold">&lt;/groupId&gt;</span>
   <span style="color:#8b008b;font-weight:bold">&lt;artifactId&gt;</span>spring-boot-starter-tomcat<span style="color:#8b008b;font-weight:bold">&lt;/artifactId&gt;</span>
   <span style="color:#8b008b;font-weight:bold">&lt;scope&gt;</span>provided<span style="color:#8b008b;font-weight:bold">&lt;/scope&gt;</span>
<span style="color:#8b008b;font-weight:bold">&lt;/dependency&gt;</span>
</code></pre></div><p>3）、必须编写一个<strong>SpringBootServletInitializer</strong>的子类，并调用configure方法</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#8b008b;font-weight:bold">class</span> <span style="color:#008b45;font-weight:bold">ServletInitializer</span> <span style="color:#8b008b;font-weight:bold">extends</span> SpringBootServletInitializer {

   <span style="color:#707a7c">@Override</span>
   <span style="color:#8b008b;font-weight:bold">protected</span> SpringApplicationBuilder <span style="color:#008b45">configure</span>(SpringApplicationBuilder application) {
       <span style="color:#228b22">//传入SpringBoot应用的主程序
</span><span style="color:#228b22"></span>      <span style="color:#8b008b;font-weight:bold">return</span> application.<span style="color:#658b00">sources</span>(SpringBoot04WebJspApplication.<span style="color:#658b00">class</span>);
   }

}
</code></pre></div><p>4）、启动服务器就可以使用；</p>
<h3 id="原理">原理</h3>
<p>jar包：执行SpringBoot主类的main方法，启动ioc容器，创建嵌入式的Servlet容器；</p>
<p>war包：启动服务器，<strong>服务器启动SpringBoot应用</strong>【SpringBootServletInitializer】，启动ioc容器；</p>
<p>servlet3.0（Spring注解版）：</p>
<p>8.2.4 Shared libraries / runtimes pluggability：</p>
<p>规则：</p>
<p>​	1）、服务器启动（web应用启动）会创建当前web应用里面每一个jar包里面ServletContainerInitializer实例：</p>
<p>​	2）、ServletContainerInitializer的实现放在jar包的META-INF/services文件夹下，有一个名为javax.servlet.ServletContainerInitializer的文件，内容就是ServletContainerInitializer的实现类的全类名</p>
<p>​	3）、还可以使用@HandlesTypes，在应用启动的时候加载我们感兴趣的类；</p>
<p>流程：</p>
<p>1）、启动Tomcat</p>
<p>2）、org\springframework\spring-web\4.3.14.RELEASE\spring-web-4.3.14.RELEASE.jar!\META-INF\services\javax.servlet.ServletContainerInitializer：</p>
<p>Spring的web模块里面有这个文件：<strong>org.springframework.web.SpringServletContainerInitializer</strong></p>
<p>3）、SpringServletContainerInitializer将@HandlesTypes(WebApplicationInitializer.class)标注的所有这个类型的类都传入到onStartup方法的Set&lt;Class&lt;?&raquo;；为这些WebApplicationInitializer类型的类创建实例；</p>
<p>4）、每一个WebApplicationInitializer都调用自己的onStartup；</p>
<p><img src="images/%E6%90%9C%E7%8B%97%E6%88%AA%E5%9B%BE20180302221835.png" alt=""></p>
<p>5）、相当于我们的SpringBootServletInitializer的类会被创建对象，并执行onStartup方法</p>
<p>6）、SpringBootServletInitializer实例执行onStartup的时候会createRootApplicationContext；创建容器</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#8b008b;font-weight:bold">protected</span> WebApplicationContext <span style="color:#008b45">createRootApplicationContext</span>(
      ServletContext servletContext) {
    <span style="color:#228b22">//1、创建SpringApplicationBuilder
</span><span style="color:#228b22"></span>   SpringApplicationBuilder builder = createSpringApplicationBuilder();
   StandardServletEnvironment environment = <span style="color:#8b008b;font-weight:bold">new</span> StandardServletEnvironment();
   environment.<span style="color:#658b00">initPropertySources</span>(servletContext, <span style="color:#8b008b;font-weight:bold">null</span>);
   builder.<span style="color:#658b00">environment</span>(environment);
   builder.<span style="color:#658b00">main</span>(getClass());
   ApplicationContext parent = getExistingRootWebApplicationContext(servletContext);
   <span style="color:#8b008b;font-weight:bold">if</span> (parent != <span style="color:#8b008b;font-weight:bold">null</span>) {
      <span style="color:#8b008b;font-weight:bold">this</span>.<span style="color:#658b00">logger</span>.<span style="color:#658b00">info</span>(<span style="color:#cd5555">&#34;Root context already created (using as parent).&#34;</span>);
      servletContext.<span style="color:#658b00">setAttribute</span>(
            WebApplicationContext.<span style="color:#658b00">ROOT_WEB_APPLICATION_CONTEXT_ATTRIBUTE</span>, <span style="color:#8b008b;font-weight:bold">null</span>);
      builder.<span style="color:#658b00">initializers</span>(<span style="color:#8b008b;font-weight:bold">new</span> ParentContextApplicationContextInitializer(parent));
   }
   builder.<span style="color:#658b00">initializers</span>(
         <span style="color:#8b008b;font-weight:bold">new</span> ServletContextApplicationContextInitializer(servletContext));
   builder.<span style="color:#658b00">contextClass</span>(AnnotationConfigEmbeddedWebApplicationContext.<span style="color:#658b00">class</span>);
    
    <span style="color:#228b22">//调用configure方法，子类重写了这个方法，将SpringBoot的主程序类传入了进来
</span><span style="color:#228b22"></span>   builder = configure(builder);
    
    <span style="color:#228b22">//使用builder创建一个Spring应用
</span><span style="color:#228b22"></span>   SpringApplication application = builder.<span style="color:#658b00">build</span>();
   <span style="color:#8b008b;font-weight:bold">if</span> (application.<span style="color:#658b00">getSources</span>().<span style="color:#658b00">isEmpty</span>() &amp;&amp; AnnotationUtils
         .<span style="color:#658b00">findAnnotation</span>(getClass(), Configuration.<span style="color:#658b00">class</span>) != <span style="color:#8b008b;font-weight:bold">null</span>) {
      application.<span style="color:#658b00">getSources</span>().<span style="color:#658b00">add</span>(getClass());
   }
   Assert.<span style="color:#658b00">state</span>(!application.<span style="color:#658b00">getSources</span>().<span style="color:#658b00">isEmpty</span>(),
         <span style="color:#cd5555">&#34;No SpringApplication sources have been defined. Either override the &#34;</span>
               + <span style="color:#cd5555">&#34;configure method or add an @Configuration annotation&#34;</span>);
   <span style="color:#228b22">// Ensure error pages are registered
</span><span style="color:#228b22"></span>   <span style="color:#8b008b;font-weight:bold">if</span> (<span style="color:#8b008b;font-weight:bold">this</span>.<span style="color:#658b00">registerErrorPageFilter</span>) {
      application.<span style="color:#658b00">getSources</span>().<span style="color:#658b00">add</span>(ErrorPageFilterConfiguration.<span style="color:#658b00">class</span>);
   }
    <span style="color:#228b22">//启动Spring应用
</span><span style="color:#228b22"></span>   <span style="color:#8b008b;font-weight:bold">return</span> run(application);
}
</code></pre></div><p>7）、Spring的应用就启动并且创建IOC容器</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#8b008b;font-weight:bold">public</span> ConfigurableApplicationContext <span style="color:#008b45">run</span>(String... args) {
   StopWatch stopWatch = <span style="color:#8b008b;font-weight:bold">new</span> StopWatch();
   stopWatch.<span style="color:#658b00">start</span>();
   ConfigurableApplicationContext context = <span style="color:#8b008b;font-weight:bold">null</span>;
   FailureAnalyzers analyzers = <span style="color:#8b008b;font-weight:bold">null</span>;
   configureHeadlessProperty();
   SpringApplicationRunListeners listeners = getRunListeners(args);
   listeners.<span style="color:#658b00">starting</span>();
   <span style="color:#8b008b;font-weight:bold">try</span> {
      ApplicationArguments applicationArguments = <span style="color:#8b008b;font-weight:bold">new</span> DefaultApplicationArguments(
            args);
      ConfigurableEnvironment environment = prepareEnvironment(listeners,
            applicationArguments);
      Banner printedBanner = printBanner(environment);
      context = createApplicationContext();
      analyzers = <span style="color:#8b008b;font-weight:bold">new</span> FailureAnalyzers(context);
      prepareContext(context, environment, listeners, applicationArguments,
            printedBanner);
       
       <span style="color:#228b22">//刷新IOC容器
</span><span style="color:#228b22"></span>      refreshContext(context);
      afterRefresh(context, applicationArguments);
      listeners.<span style="color:#658b00">finished</span>(context, <span style="color:#8b008b;font-weight:bold">null</span>);
      stopWatch.<span style="color:#658b00">stop</span>();
      <span style="color:#8b008b;font-weight:bold">if</span> (<span style="color:#8b008b;font-weight:bold">this</span>.<span style="color:#658b00">logStartupInfo</span>) {
         <span style="color:#8b008b;font-weight:bold">new</span> StartupInfoLogger(<span style="color:#8b008b;font-weight:bold">this</span>.<span style="color:#658b00">mainApplicationClass</span>)
               .<span style="color:#658b00">logStarted</span>(getApplicationLog(), stopWatch);
      }
      <span style="color:#8b008b;font-weight:bold">return</span> context;
   }
   <span style="color:#8b008b;font-weight:bold">catch</span> (Throwable ex) {
      handleRunFailure(context, listeners, analyzers, ex);
      <span style="color:#8b008b;font-weight:bold">throw</span> <span style="color:#8b008b;font-weight:bold">new</span> IllegalStateException(ex);
   }
}
</code></pre></div><p><strong>==启动Servlet容器，再启动SpringBoot应用==</strong></p>
<h1 id="五docker">五、Docker</h1>
<h2 id="1简介-1">1、简介</h2>
<p><strong>Docker</strong>是一个开源的应用容器引擎；是一个轻量级容器技术；</p>
<p>Docker支持将软件编译成一个镜像；然后在镜像中各种软件做好配置，将镜像发布出去，其他使用者可以直接使用这个镜像；</p>
<p>运行中的这个镜像称为容器，容器启动是非常快速的。</p>
<p><img src="images/%E6%90%9C%E7%8B%97%E6%88%AA%E5%9B%BE20180303145450.png" alt=""></p>
<p><img src="images/%E6%90%9C%E7%8B%97%E6%88%AA%E5%9B%BE20180303145531.png" alt=""></p>
<h2 id="2核心概念">2、核心概念</h2>
<p>docker主机(Host)：安装了Docker程序的机器（Docker直接安装在操作系统之上）；</p>
<p>docker客户端(Client)：连接docker主机进行操作；</p>
<p>docker仓库(Registry)：用来保存各种打包好的软件镜像；</p>
<p>docker镜像(Images)：软件打包好的镜像；放在docker仓库中；</p>
<p>docker容器(Container)：镜像启动后的实例称为一个容器；容器是独立运行的一个或一组应用</p>
<p><img src="images/%E6%90%9C%E7%8B%97%E6%88%AA%E5%9B%BE20180303165113.png" alt=""></p>
<p>使用Docker的步骤：</p>
<p>1）、安装Docker</p>
<p>2）、去Docker仓库找到这个软件对应的镜像；</p>
<p>3）、使用Docker运行这个镜像，这个镜像就会生成一个Docker容器；</p>
<p>4）、对容器的启动停止就是对软件的启动停止；</p>
<h2 id="3安装docker">3、安装Docker</h2>
<h4 id="1安装linux虚拟机">1）、安装linux虚拟机</h4>
<p>​	1）、VMWare、VirtualBox（安装）；</p>
<p>​	2）、导入虚拟机文件centos7-atguigu.ova；</p>
<p>​	3）、双击启动linux虚拟机;使用  root/ 123456登陆</p>
<p>​	4）、使用客户端连接linux服务器进行命令操作；</p>
<p>​	5）、设置虚拟机网络；</p>
<p>​		桥接网络===选好网卡====接入网线；</p>
<p>​	6）、设置好网络以后使用命令重启虚拟机的网络</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">service network restart
</code></pre></div><p>​	7）、查看linux的ip地址</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">ip addr
</code></pre></div><p>​	8）、使用客户端连接linux；</p>
<h4 id="2在linux虚拟机上安装docker">2）、在linux虚拟机上安装docker</h4>
<p>步骤：</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">1、检查内核版本，必须是3.10及以上
uname -r
2、安装docker
yum install docker
3、输入y确认安装
4、启动docker
[root@localhost ~]<span style="color:#228b22"># systemctl start docker</span>
[root@localhost ~]<span style="color:#228b22"># docker -v</span>
Docker version 1.12.6, build 3e8e77d/1.12.6
5、开机启动docker
[root@localhost ~]<span style="color:#228b22"># systemctl enable docker</span>
Created symlink from /etc/systemd/system/multi-user.target.wants/docker.service to /usr/lib/systemd/system/docker.service.
6、停止docker
systemctl stop docker
</code></pre></div><h2 id="4docker常用命令操作">4、Docker常用命令&amp;操作</h2>
<h3 id="1镜像操作">1）、镜像操作</h3>
<table class='pure-table pure-table-striped'>
<thead>
<tr>
<th>操作</th>
<th>命令</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>检索</td>
<td>docker  search 关键字  eg：docker  search redis</td>
<td>我们经常去docker  hub上检索镜像的详细信息，如镜像的TAG。</td>
</tr>
<tr>
<td>拉取</td>
<td>docker pull 镜像名:tag</td>
<td>:tag是可选的，tag表示标签，多为软件的版本，默认是latest</td>
</tr>
<tr>
<td>列表</td>
<td>docker images</td>
<td>查看所有本地镜像</td>
</tr>
<tr>
<td>删除</td>
<td>docker rmi image-id</td>
<td>删除指定的本地镜像</td>
</tr>
</tbody>
</table>
<p><a href="https://hub.docker.com/">https://hub.docker.com/</a></p>
<h3 id="2容器操作">2）、容器操作</h3>
<p>软件镜像（QQ安装程序）&mdash;-运行镜像&mdash;-产生一个容器（正在运行的软件，运行的QQ）；</p>
<p>步骤：</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">1、搜索镜像
[root@localhost ~]<span style="color:#228b22"># docker search tomcat</span>
2、拉取镜像
[root@localhost ~]<span style="color:#228b22"># docker pull tomcat</span>
3、根据镜像启动容器
docker run --name mytomcat -d tomcat:latest
4、docker ps  
查看运行中的容器
5、 停止运行中的容器
docker stop  容器的id
6、查看所有的容器
docker ps -a
7、启动容器
docker start 容器id
8、删除一个容器
 docker rm 容器id
9、启动一个做了端口映射的tomcat
[root@localhost ~]<span style="color:#228b22"># docker run -d -p 8888:8080 tomcat</span>
-d：后台运行
-p: 将主机的端口映射到容器的一个端口    主机端口:容器内部的端口

10、为了演示简单关闭了linux的防火墙
service firewalld status ；查看防火墙状态
service firewalld stop：关闭防火墙
11、查看容器的日志
docker logs container-name/container-id

更多命令参看
https://docs.docker.com/engine/reference/commandline/docker/
可以参考每一个镜像的文档

</code></pre></div><h3 id="3安装mysql示例">3）、安装MySQL示例</h3>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">docker pull mysql
</code></pre></div><p>错误的启动</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">[root@localhost ~]<span style="color:#228b22"># docker run --name mysql01 -d mysql</span>
42f09819908bb72dd99ae19e792e0a5d03c48638421fa64cce5f8ba0f40f5846

mysql退出了
[root@localhost ~]<span style="color:#228b22"># docker ps -a</span>
CONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS                           PORTS               NAMES
42f09819908b        mysql               <span style="color:#cd5555">&#34;docker-entrypoint.sh&#34;</span>   <span style="color:#b452cd">34</span> seconds ago      Exited (1) <span style="color:#b452cd">33</span> seconds ago                            mysql01
538bde63e500        tomcat              <span style="color:#cd5555">&#34;catalina.sh run&#34;</span>        About an hour ago   Exited (143) About an hour ago                       compassionate_
goldstine
c4f1ac60b3fc        tomcat              <span style="color:#cd5555">&#34;catalina.sh run&#34;</span>        About an hour ago   Exited (143) About an hour ago                       lonely_fermi
81ec743a5271        tomcat              <span style="color:#cd5555">&#34;catalina.sh run&#34;</span>        About an hour ago   Exited (143) About an hour ago                       sick_ramanujan


//错误日志
[root@localhost ~]<span style="color:#228b22"># docker logs 42f09819908b</span>
error: database is uninitialized and password option is not specified 
  You need to specify one of MYSQL_ROOT_PASSWORD, MYSQL_ALLOW_EMPTY_PASSWORD and MYSQL_RANDOM_ROOT_PASSWORD；这个三个参数必须指定一个
</code></pre></div><p>正确的启动</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">[root@localhost ~]<span style="color:#228b22"># docker run --name mysql01 -e MYSQL_ROOT_PASSWORD=123456 -d mysql</span>
b874c56bec49fb43024b3805ab51e9097da779f2f572c22c695305dedd684c5f
[root@localhost ~]<span style="color:#228b22"># docker ps</span>
CONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS              PORTS               NAMES
b874c56bec49        mysql               <span style="color:#cd5555">&#34;docker-entrypoint.sh&#34;</span>   <span style="color:#b452cd">4</span> seconds ago       Up <span style="color:#b452cd">3</span> seconds        3306/tcp            mysql01
</code></pre></div><p>做了端口映射</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">[root@localhost ~]<span style="color:#228b22"># docker run -p 3306:3306 --name mysql02 -e MYSQL_ROOT_PASSWORD=123456 -d mysql</span>
ad10e4bc5c6a0f61cbad43898de71d366117d120e39db651844c0e73863b9434
[root@localhost ~]<span style="color:#228b22"># docker ps</span>
CONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS              PORTS                    NAMES
ad10e4bc5c6a        mysql               <span style="color:#cd5555">&#34;docker-entrypoint.sh&#34;</span>   <span style="color:#b452cd">4</span> seconds ago       Up <span style="color:#b452cd">2</span> seconds        0.0.0.0:3306-&gt;3306/tcp   mysql02
</code></pre></div><p>几个其他的高级操作</p>
<pre><code>docker run --name mysql03 -v /conf/mysql:/etc/mysql/conf.d -e MYSQL_ROOT_PASSWORD=my-secret-pw -d mysql:tag
把主机的/conf/mysql文件夹挂载到 mysqldocker容器的/etc/mysql/conf.d文件夹里面
改mysql的配置文件就只需要把mysql配置文件放在自定义的文件夹下（/conf/mysql）

docker run --name some-mysql -e MYSQL_ROOT_PASSWORD=my-secret-pw -d mysql:tag --character-set-server=utf8mb4 --collation-server=utf8mb4_unicode_ci
指定mysql的一些配置参数
</code></pre><h1 id="六springboot与数据访问">六、SpringBoot与数据访问</h1>
<h2 id="1jdbc">1、JDBC</h2>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml"><span style="color:#8b008b;font-weight:bold">&lt;dependency&gt;</span>
			<span style="color:#8b008b;font-weight:bold">&lt;groupId&gt;</span>org.springframework.boot<span style="color:#8b008b;font-weight:bold">&lt;/groupId&gt;</span>
			<span style="color:#8b008b;font-weight:bold">&lt;artifactId&gt;</span>spring-boot-starter-jdbc<span style="color:#8b008b;font-weight:bold">&lt;/artifactId&gt;</span>
		<span style="color:#8b008b;font-weight:bold">&lt;/dependency&gt;</span>
		<span style="color:#8b008b;font-weight:bold">&lt;dependency&gt;</span>
			<span style="color:#8b008b;font-weight:bold">&lt;groupId&gt;</span>mysql<span style="color:#8b008b;font-weight:bold">&lt;/groupId&gt;</span>
			<span style="color:#8b008b;font-weight:bold">&lt;artifactId&gt;</span>mysql-connector-java<span style="color:#8b008b;font-weight:bold">&lt;/artifactId&gt;</span>
			<span style="color:#8b008b;font-weight:bold">&lt;scope&gt;</span>runtime<span style="color:#8b008b;font-weight:bold">&lt;/scope&gt;</span>
		<span style="color:#8b008b;font-weight:bold">&lt;/dependency&gt;</span>
</code></pre></div><div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#8b008b;font-weight:bold">spring</span>:<span style="color:#bbb">
</span><span style="color:#bbb">  </span><span style="color:#8b008b;font-weight:bold">datasource</span>:<span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#8b008b;font-weight:bold">username</span>:<span style="color:#bbb"> </span>root<span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#8b008b;font-weight:bold">password</span>:<span style="color:#bbb"> </span><span style="color:#b452cd">123456</span><span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#8b008b;font-weight:bold">url</span>:<span style="color:#bbb"> </span>jdbc:mysql://<span style="color:#b452cd">192.168.15.22</span>:<span style="color:#b452cd">3306</span>/jdbc<span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#8b008b;font-weight:bold">driver-class-name</span>:<span style="color:#bbb"> </span>com.mysql.jdbc.Driver<span style="color:#bbb">
</span></code></pre></div><p>效果：</p>
<p>​	默认是用org.apache.tomcat.jdbc.pool.DataSource作为数据源；</p>
<p>​	数据源的相关配置都在DataSourceProperties里面；</p>
<p>自动配置原理：</p>
<p>org.springframework.boot.autoconfigure.jdbc：</p>
<p>1、参考DataSourceConfiguration，根据配置创建数据源，默认使用Tomcat连接池；可以使用spring.datasource.type指定自定义的数据源类型；</p>
<p>2、SpringBoot默认可以支持；</p>
<pre><code>org.apache.tomcat.jdbc.pool.DataSource、HikariDataSource、BasicDataSource、
</code></pre><p>3、自定义数据源类型</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#228b22">/**
</span><span style="color:#228b22"> * Generic DataSource configuration.
</span><span style="color:#228b22"> */</span>
<span style="color:#707a7c">@ConditionalOnMissingBean</span>(DataSource.<span style="color:#658b00">class</span>)
<span style="color:#707a7c">@ConditionalOnProperty</span>(name = <span style="color:#cd5555">&#34;spring.datasource.type&#34;</span>)
<span style="color:#8b008b;font-weight:bold">static</span> <span style="color:#8b008b;font-weight:bold">class</span> <span style="color:#008b45;font-weight:bold">Generic</span> {

   <span style="color:#707a7c">@Bean</span>
   <span style="color:#8b008b;font-weight:bold">public</span> DataSource <span style="color:#008b45">dataSource</span>(DataSourceProperties properties) {
       <span style="color:#228b22">//使用DataSourceBuilder创建数据源，利用反射创建响应type的数据源，并且绑定相关属性
</span><span style="color:#228b22"></span>      <span style="color:#8b008b;font-weight:bold">return</span> properties.<span style="color:#658b00">initializeDataSourceBuilder</span>().<span style="color:#658b00">build</span>();
   }

}
</code></pre></div><p>4、<strong>DataSourceInitializer：ApplicationListener</strong>；</p>
<p>​	作用：</p>
<p>​		1）、runSchemaScripts();运行建表语句；</p>
<p>​		2）、runDataScripts();运行插入数据的sql语句；</p>
<p>默认只需要将文件命名为：</p>
<pre><code class="language-properties" data-lang="properties">schema-*.sql、data-*.sql
默认规则：schema.sql，schema-all.sql；
可以使用   
	schema:
      - classpath:department.sql
      指定位置
</code></pre><p>5、操作数据库：自动配置了JdbcTemplate操作数据库</p>
<h2 id="2整合druid数据源">2、整合Druid数据源</h2>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java">导入druid数据源
<span style="color:#707a7c">@Configuration</span>
<span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#8b008b;font-weight:bold">class</span> <span style="color:#008b45;font-weight:bold">DruidConfig</span> {

    <span style="color:#707a7c">@ConfigurationProperties</span>(prefix = <span style="color:#cd5555">&#34;spring.datasource&#34;</span>)
    <span style="color:#707a7c">@Bean</span>
    <span style="color:#8b008b;font-weight:bold">public</span> DataSource <span style="color:#008b45">druid</span>(){
       <span style="color:#8b008b;font-weight:bold">return</span>  <span style="color:#8b008b;font-weight:bold">new</span> DruidDataSource();
    }

    <span style="color:#228b22">//配置Druid的监控
</span><span style="color:#228b22"></span>    <span style="color:#228b22">//1、配置一个管理后台的Servlet
</span><span style="color:#228b22"></span>    <span style="color:#707a7c">@Bean</span>
    <span style="color:#8b008b;font-weight:bold">public</span> ServletRegistrationBean <span style="color:#008b45">statViewServlet</span>(){
        ServletRegistrationBean bean = <span style="color:#8b008b;font-weight:bold">new</span> ServletRegistrationBean(<span style="color:#8b008b;font-weight:bold">new</span> StatViewServlet(), <span style="color:#cd5555">&#34;/druid/*&#34;</span>);
        Map&lt;String,String&gt; initParams = <span style="color:#8b008b;font-weight:bold">new</span> HashMap&lt;&gt;();

        initParams.<span style="color:#658b00">put</span>(<span style="color:#cd5555">&#34;loginUsername&#34;</span>,<span style="color:#cd5555">&#34;admin&#34;</span>);
        initParams.<span style="color:#658b00">put</span>(<span style="color:#cd5555">&#34;loginPassword&#34;</span>,<span style="color:#cd5555">&#34;123456&#34;</span>);
        initParams.<span style="color:#658b00">put</span>(<span style="color:#cd5555">&#34;allow&#34;</span>,<span style="color:#cd5555">&#34;&#34;</span>);<span style="color:#228b22">//默认就是允许所有访问
</span><span style="color:#228b22"></span>        initParams.<span style="color:#658b00">put</span>(<span style="color:#cd5555">&#34;deny&#34;</span>,<span style="color:#cd5555">&#34;192.168.15.21&#34;</span>);

        bean.<span style="color:#658b00">setInitParameters</span>(initParams);
        <span style="color:#8b008b;font-weight:bold">return</span> bean;
    }


    <span style="color:#228b22">//2、配置一个web监控的filter
</span><span style="color:#228b22"></span>    <span style="color:#707a7c">@Bean</span>
    <span style="color:#8b008b;font-weight:bold">public</span> FilterRegistrationBean <span style="color:#008b45">webStatFilter</span>(){
        FilterRegistrationBean bean = <span style="color:#8b008b;font-weight:bold">new</span> FilterRegistrationBean();
        bean.<span style="color:#658b00">setFilter</span>(<span style="color:#8b008b;font-weight:bold">new</span> WebStatFilter());

        Map&lt;String,String&gt; initParams = <span style="color:#8b008b;font-weight:bold">new</span> HashMap&lt;&gt;();
        initParams.<span style="color:#658b00">put</span>(<span style="color:#cd5555">&#34;exclusions&#34;</span>,<span style="color:#cd5555">&#34;*.js,*.css,/druid/*&#34;</span>);

        bean.<span style="color:#658b00">setInitParameters</span>(initParams);

        bean.<span style="color:#658b00">setUrlPatterns</span>(Arrays.<span style="color:#658b00">asList</span>(<span style="color:#cd5555">&#34;/*&#34;</span>));

        <span style="color:#8b008b;font-weight:bold">return</span>  bean;
    }
}

</code></pre></div><h2 id="3整合mybatis">3、整合MyBatis</h2>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml">		<span style="color:#8b008b;font-weight:bold">&lt;dependency&gt;</span>
			<span style="color:#8b008b;font-weight:bold">&lt;groupId&gt;</span>org.mybatis.spring.boot<span style="color:#8b008b;font-weight:bold">&lt;/groupId&gt;</span>
			<span style="color:#8b008b;font-weight:bold">&lt;artifactId&gt;</span>mybatis-spring-boot-starter<span style="color:#8b008b;font-weight:bold">&lt;/artifactId&gt;</span>
			<span style="color:#8b008b;font-weight:bold">&lt;version&gt;</span>1.3.1<span style="color:#8b008b;font-weight:bold">&lt;/version&gt;</span>
		<span style="color:#8b008b;font-weight:bold">&lt;/dependency&gt;</span>
</code></pre></div><p><img src="images/%E6%90%9C%E7%8B%97%E6%88%AA%E5%9B%BE20180305194443.png" alt=""></p>
<p>步骤：</p>
<p>​	1）、配置数据源相关属性（见上一节Druid）</p>
<p>​	2）、给数据库建表</p>
<p>​	3）、创建JavaBean</p>
<h3 id="4注解版">4）、注解版</h3>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#228b22">//指定这是一个操作数据库的mapper
</span><span style="color:#228b22"></span><span style="color:#707a7c">@Mapper</span>
<span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#8b008b;font-weight:bold">interface</span> <span style="color:#008b45;font-weight:bold">DepartmentMapper</span> {

    <span style="color:#707a7c">@Select</span>(<span style="color:#cd5555">&#34;select * from department where id=#{id}&#34;</span>)
    <span style="color:#8b008b;font-weight:bold">public</span> Department <span style="color:#008b45">getDeptById</span>(Integer id);

    <span style="color:#707a7c">@Delete</span>(<span style="color:#cd5555">&#34;delete from department where id=#{id}&#34;</span>)
    <span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#00688b;font-weight:bold">int</span> <span style="color:#008b45">deleteDeptById</span>(Integer id);

    <span style="color:#707a7c">@Options</span>(useGeneratedKeys = <span style="color:#8b008b;font-weight:bold">true</span>,keyProperty = <span style="color:#cd5555">&#34;id&#34;</span>)
    <span style="color:#707a7c">@Insert</span>(<span style="color:#cd5555">&#34;insert into department(departmentName) values(#{departmentName})&#34;</span>)
    <span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#00688b;font-weight:bold">int</span> <span style="color:#008b45">insertDept</span>(Department department);

    <span style="color:#707a7c">@Update</span>(<span style="color:#cd5555">&#34;update department set departmentName=#{departmentName} where id=#{id}&#34;</span>)
    <span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#00688b;font-weight:bold">int</span> <span style="color:#008b45">updateDept</span>(Department department);
}
</code></pre></div><p>问题：</p>
<p>自定义MyBatis的配置规则；给容器中添加一个ConfigurationCustomizer；</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#707a7c">@org.springframework.context.annotation.Configuration</span>
<span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#8b008b;font-weight:bold">class</span> <span style="color:#008b45;font-weight:bold">MyBatisConfig</span> {

    <span style="color:#707a7c">@Bean</span>
    <span style="color:#8b008b;font-weight:bold">public</span> ConfigurationCustomizer <span style="color:#008b45">configurationCustomizer</span>(){
        <span style="color:#8b008b;font-weight:bold">return</span> <span style="color:#8b008b;font-weight:bold">new</span> ConfigurationCustomizer(){

            <span style="color:#707a7c">@Override</span>
            <span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#00688b;font-weight:bold">void</span> <span style="color:#008b45">customize</span>(Configuration configuration) {
                configuration.<span style="color:#658b00">setMapUnderscoreToCamelCase</span>(<span style="color:#8b008b;font-weight:bold">true</span>);
            }
        };
    }
}
</code></pre></div><div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java">使用MapperScan批量扫描所有的Mapper接口<span style="color:#a61717;background-color:#e3d2d2">；</span>
<span style="color:#707a7c">@MapperScan</span>(value = <span style="color:#cd5555">&#34;com.atguigu.springboot.mapper&#34;</span>)
<span style="color:#707a7c">@SpringBootApplication</span>
<span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#8b008b;font-weight:bold">class</span> <span style="color:#008b45;font-weight:bold">SpringBoot06DataMybatisApplication</span> {

	<span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#8b008b;font-weight:bold">static</span> <span style="color:#00688b;font-weight:bold">void</span> <span style="color:#008b45">main</span>(String[] args) {
		SpringApplication.<span style="color:#658b00">run</span>(SpringBoot06DataMybatisApplication.<span style="color:#658b00">class</span>, args);
	}
}
</code></pre></div><h3 id="5配置文件版">5）、配置文件版</h3>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#8b008b;font-weight:bold">mybatis</span>:<span style="color:#bbb">
</span><span style="color:#bbb">  </span><span style="color:#8b008b;font-weight:bold">config-location</span>:<span style="color:#bbb"> </span>classpath:mybatis/mybatis-config.xml<span style="color:#bbb"> </span>指定全局配置文件的位置<span style="color:#bbb">
</span><span style="color:#bbb">  </span><span style="color:#8b008b;font-weight:bold">mapper-locations</span>:<span style="color:#bbb"> </span>classpath:mybatis/mapper/<span style="color:#1e889b">*.xml</span><span style="color:#bbb">  </span>指定sql映射文件的位置<span style="color:#bbb">
</span></code></pre></div><p>更多使用参照</p>
<p><a href="http://www.mybatis.org/spring-boot-starter/mybatis-spring-boot-autoconfigure/">http://www.mybatis.org/spring-boot-starter/mybatis-spring-boot-autoconfigure/</a></p>
<h2 id="4整合springdata-jpa">4、整合SpringData JPA</h2>
<h3 id="1springdata简介">1）、SpringData简介</h3>
<p><img src="images/%E6%90%9C%E7%8B%97%E6%88%AA%E5%9B%BE20180306105412.png" alt=""></p>
<h3 id="2整合springdata-jpa">2）、整合SpringData JPA</h3>
<p>JPA:ORM（Object Relational Mapping）；</p>
<p>1）、编写一个实体类（bean）和数据表进行映射，并且配置好映射关系；</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#228b22">//使用JPA注解配置映射关系
</span><span style="color:#228b22"></span><span style="color:#707a7c">@Entity</span> <span style="color:#228b22">//告诉JPA这是一个实体类（和数据表映射的类）
</span><span style="color:#228b22"></span><span style="color:#707a7c">@Table</span>(name = <span style="color:#cd5555">&#34;tbl_user&#34;</span>) <span style="color:#228b22">//@Table来指定和哪个数据表对应;如果省略默认表名就是user；
</span><span style="color:#228b22"></span><span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#8b008b;font-weight:bold">class</span> <span style="color:#008b45;font-weight:bold">User</span> {

    <span style="color:#707a7c">@Id</span> <span style="color:#228b22">//这是一个主键
</span><span style="color:#228b22"></span>    <span style="color:#707a7c">@GeneratedValue</span>(strategy = GenerationType.<span style="color:#658b00">IDENTITY</span>)<span style="color:#228b22">//自增主键
</span><span style="color:#228b22"></span>    <span style="color:#8b008b;font-weight:bold">private</span> Integer id;

    <span style="color:#707a7c">@Column</span>(name = <span style="color:#cd5555">&#34;last_name&#34;</span>,length = 50) <span style="color:#228b22">//这是和数据表对应的一个列
</span><span style="color:#228b22"></span>    <span style="color:#8b008b;font-weight:bold">private</span> String lastName;
    <span style="color:#707a7c">@Column</span> <span style="color:#228b22">//省略默认列名就是属性名
</span><span style="color:#228b22"></span>    <span style="color:#8b008b;font-weight:bold">private</span> String email;
</code></pre></div><p>2）、编写一个Dao接口来操作实体类对应的数据表（Repository）</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#228b22">//继承JpaRepository来完成对数据库的操作
</span><span style="color:#228b22"></span><span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#8b008b;font-weight:bold">interface</span> <span style="color:#008b45;font-weight:bold">UserRepository</span> <span style="color:#8b008b;font-weight:bold">extends</span> JpaRepository&lt;User,Integer&gt; {
}

</code></pre></div><p>3）、基本的配置JpaProperties</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#8b008b;font-weight:bold">spring</span>:<span style="color:#bbb">  
</span><span style="color:#bbb"> </span><span style="color:#8b008b;font-weight:bold">jpa</span>:<span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#8b008b;font-weight:bold">hibernate</span>:<span style="color:#bbb">
</span><span style="color:#bbb"></span><span style="color:#228b22">#     更新或者创建数据表结构</span><span style="color:#bbb">
</span><span style="color:#bbb">      </span><span style="color:#8b008b;font-weight:bold">ddl-auto</span>:<span style="color:#bbb"> </span>update<span style="color:#bbb">
</span><span style="color:#bbb"></span><span style="color:#228b22">#    控制台显示SQL</span><span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#8b008b;font-weight:bold">show-sql</span>:<span style="color:#bbb"> </span><span style="color:#8b008b;font-weight:bold">true</span><span style="color:#bbb">
</span></code></pre></div><h1 id="七启动配置原理">七、启动配置原理</h1>
<p>几个重要的事件回调机制</p>
<p>配置在META-INF/spring.factories</p>
<p><strong>ApplicationContextInitializer</strong></p>
<p><strong>SpringApplicationRunListener</strong></p>
<p>只需要放在ioc容器中</p>
<p><strong>ApplicationRunner</strong></p>
<p><strong>CommandLineRunner</strong></p>
<p>启动流程：</p>
<h2 id="1创建springapplication对象"><strong>1、创建SpringApplication对象</strong></h2>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java">initialize(sources);
<span style="color:#8b008b;font-weight:bold">private</span> <span style="color:#00688b;font-weight:bold">void</span> <span style="color:#008b45">initialize</span>(Object[] sources) {
    <span style="color:#228b22">//保存主配置类
</span><span style="color:#228b22"></span>    <span style="color:#8b008b;font-weight:bold">if</span> (sources != <span style="color:#8b008b;font-weight:bold">null</span> &amp;&amp; sources.<span style="color:#658b00">length</span> &gt; 0) {
        <span style="color:#8b008b;font-weight:bold">this</span>.<span style="color:#658b00">sources</span>.<span style="color:#658b00">addAll</span>(Arrays.<span style="color:#658b00">asList</span>(sources));
    }
    <span style="color:#228b22">//判断当前是否一个web应用
</span><span style="color:#228b22"></span>    <span style="color:#8b008b;font-weight:bold">this</span>.<span style="color:#658b00">webEnvironment</span> = deduceWebEnvironment();
    <span style="color:#228b22">//从类路径下找到META-INF/spring.factories配置的所有ApplicationContextInitializer；然后保存起来
</span><span style="color:#228b22"></span>    setInitializers((Collection) getSpringFactoriesInstances(
        ApplicationContextInitializer.<span style="color:#658b00">class</span>));
    <span style="color:#228b22">//从类路径下找到ETA-INF/spring.factories配置的所有ApplicationListener
</span><span style="color:#228b22"></span>    setListeners((Collection) getSpringFactoriesInstances(ApplicationListener.<span style="color:#658b00">class</span>));
    <span style="color:#228b22">//从多个配置类中找到有main方法的主配置类
</span><span style="color:#228b22"></span>    <span style="color:#8b008b;font-weight:bold">this</span>.<span style="color:#658b00">mainApplicationClass</span> = deduceMainApplicationClass();
}
</code></pre></div><p><img src="images/%E6%90%9C%E7%8B%97%E6%88%AA%E5%9B%BE20180306145727.png" alt=""></p>
<p><img src="images/%E6%90%9C%E7%8B%97%E6%88%AA%E5%9B%BE20180306145855.png" alt=""></p>
<h2 id="2运行run方法">2、运行run方法</h2>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#8b008b;font-weight:bold">public</span> ConfigurableApplicationContext <span style="color:#008b45">run</span>(String... args) {
   StopWatch stopWatch = <span style="color:#8b008b;font-weight:bold">new</span> StopWatch();
   stopWatch.<span style="color:#658b00">start</span>();
   ConfigurableApplicationContext context = <span style="color:#8b008b;font-weight:bold">null</span>;
   FailureAnalyzers analyzers = <span style="color:#8b008b;font-weight:bold">null</span>;
   configureHeadlessProperty();
    
   <span style="color:#228b22">//获取SpringApplicationRunListeners；从类路径下META-INF/spring.factories
</span><span style="color:#228b22"></span>   SpringApplicationRunListeners listeners = getRunListeners(args);
    <span style="color:#228b22">//回调所有的获取SpringApplicationRunListener.starting()方法
</span><span style="color:#228b22"></span>   listeners.<span style="color:#658b00">starting</span>();
   <span style="color:#8b008b;font-weight:bold">try</span> {
       <span style="color:#228b22">//封装命令行参数
</span><span style="color:#228b22"></span>      ApplicationArguments applicationArguments = <span style="color:#8b008b;font-weight:bold">new</span> DefaultApplicationArguments(
            args);
      <span style="color:#228b22">//准备环境
</span><span style="color:#228b22"></span>      ConfigurableEnvironment environment = prepareEnvironment(listeners,
            applicationArguments);
       		<span style="color:#228b22">//创建环境完成后回调SpringApplicationRunListener.environmentPrepared()；表示环境准备完成
</span><span style="color:#228b22"></span>       
      Banner printedBanner = printBanner(environment);
       
       <span style="color:#228b22">//创建ApplicationContext；决定创建web的ioc还是普通的ioc
</span><span style="color:#228b22"></span>      context = createApplicationContext();
       
      analyzers = <span style="color:#8b008b;font-weight:bold">new</span> FailureAnalyzers(context);
       <span style="color:#228b22">//准备上下文环境;将environment保存到ioc中；而且applyInitializers()；
</span><span style="color:#228b22"></span>       <span style="color:#228b22">//applyInitializers()：回调之前保存的所有的ApplicationContextInitializer的initialize方法
</span><span style="color:#228b22"></span>       <span style="color:#228b22">//回调所有的SpringApplicationRunListener的contextPrepared()；
</span><span style="color:#228b22"></span>       <span style="color:#228b22">//
</span><span style="color:#228b22"></span>      prepareContext(context, environment, listeners, applicationArguments,
            printedBanner);
       <span style="color:#228b22">//prepareContext运行完成以后回调所有的SpringApplicationRunListener的contextLoaded（）；
</span><span style="color:#228b22"></span>       
       <span style="color:#228b22">//s刷新容器；ioc容器初始化（如果是web应用还会创建嵌入式的Tomcat）；Spring注解版
</span><span style="color:#228b22"></span>       <span style="color:#228b22">//扫描，创建，加载所有组件的地方；（配置类，组件，自动配置）
</span><span style="color:#228b22"></span>      refreshContext(context);
       <span style="color:#228b22">//从ioc容器中获取所有的ApplicationRunner和CommandLineRunner进行回调
</span><span style="color:#228b22"></span>       <span style="color:#228b22">//ApplicationRunner先回调，CommandLineRunner再回调
</span><span style="color:#228b22"></span>      afterRefresh(context, applicationArguments);
       <span style="color:#228b22">//所有的SpringApplicationRunListener回调finished方法
</span><span style="color:#228b22"></span>      listeners.<span style="color:#658b00">finished</span>(context, <span style="color:#8b008b;font-weight:bold">null</span>);
      stopWatch.<span style="color:#658b00">stop</span>();
      <span style="color:#8b008b;font-weight:bold">if</span> (<span style="color:#8b008b;font-weight:bold">this</span>.<span style="color:#658b00">logStartupInfo</span>) {
         <span style="color:#8b008b;font-weight:bold">new</span> StartupInfoLogger(<span style="color:#8b008b;font-weight:bold">this</span>.<span style="color:#658b00">mainApplicationClass</span>)
               .<span style="color:#658b00">logStarted</span>(getApplicationLog(), stopWatch);
      }
       <span style="color:#228b22">//整个SpringBoot应用启动完成以后返回启动的ioc容器；
</span><span style="color:#228b22"></span>      <span style="color:#8b008b;font-weight:bold">return</span> context;
   }
   <span style="color:#8b008b;font-weight:bold">catch</span> (Throwable ex) {
      handleRunFailure(context, listeners, analyzers, ex);
      <span style="color:#8b008b;font-weight:bold">throw</span> <span style="color:#8b008b;font-weight:bold">new</span> IllegalStateException(ex);
   }
}
</code></pre></div><h2 id="3事件监听机制">3、事件监听机制</h2>
<p>配置在META-INF/spring.factories</p>
<p><strong>ApplicationContextInitializer</strong></p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#8b008b;font-weight:bold">class</span> <span style="color:#008b45;font-weight:bold">HelloApplicationContextInitializer</span> <span style="color:#8b008b;font-weight:bold">implements</span> ApplicationContextInitializer&lt;ConfigurableApplicationContext&gt; {
    <span style="color:#707a7c">@Override</span>
    <span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#00688b;font-weight:bold">void</span> <span style="color:#008b45">initialize</span>(ConfigurableApplicationContext applicationContext) {
        System.<span style="color:#658b00">out</span>.<span style="color:#658b00">println</span>(<span style="color:#cd5555">&#34;ApplicationContextInitializer...initialize...&#34;</span>+applicationContext);
    }
}

</code></pre></div><p><strong>SpringApplicationRunListener</strong></p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#8b008b;font-weight:bold">class</span> <span style="color:#008b45;font-weight:bold">HelloSpringApplicationRunListener</span> <span style="color:#8b008b;font-weight:bold">implements</span> SpringApplicationRunListener {

    <span style="color:#228b22">//必须有的构造器
</span><span style="color:#228b22"></span>    <span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#008b45">HelloSpringApplicationRunListener</span>(SpringApplication application, String[] args){

    }

    <span style="color:#707a7c">@Override</span>
    <span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#00688b;font-weight:bold">void</span> <span style="color:#008b45">starting</span>() {
        System.<span style="color:#658b00">out</span>.<span style="color:#658b00">println</span>(<span style="color:#cd5555">&#34;SpringApplicationRunListener...starting...&#34;</span>);
    }

    <span style="color:#707a7c">@Override</span>
    <span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#00688b;font-weight:bold">void</span> <span style="color:#008b45">environmentPrepared</span>(ConfigurableEnvironment environment) {
        Object o = environment.<span style="color:#658b00">getSystemProperties</span>().<span style="color:#658b00">get</span>(<span style="color:#cd5555">&#34;os.name&#34;</span>);
        System.<span style="color:#658b00">out</span>.<span style="color:#658b00">println</span>(<span style="color:#cd5555">&#34;SpringApplicationRunListener...environmentPrepared..&#34;</span>+o);
    }

    <span style="color:#707a7c">@Override</span>
    <span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#00688b;font-weight:bold">void</span> <span style="color:#008b45">contextPrepared</span>(ConfigurableApplicationContext context) {
        System.<span style="color:#658b00">out</span>.<span style="color:#658b00">println</span>(<span style="color:#cd5555">&#34;SpringApplicationRunListener...contextPrepared...&#34;</span>);
    }

    <span style="color:#707a7c">@Override</span>
    <span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#00688b;font-weight:bold">void</span> <span style="color:#008b45">contextLoaded</span>(ConfigurableApplicationContext context) {
        System.<span style="color:#658b00">out</span>.<span style="color:#658b00">println</span>(<span style="color:#cd5555">&#34;SpringApplicationRunListener...contextLoaded...&#34;</span>);
    }

    <span style="color:#707a7c">@Override</span>
    <span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#00688b;font-weight:bold">void</span> <span style="color:#008b45">finished</span>(ConfigurableApplicationContext context, Throwable exception) {
        System.<span style="color:#658b00">out</span>.<span style="color:#658b00">println</span>(<span style="color:#cd5555">&#34;SpringApplicationRunListener...finished...&#34;</span>);
    }
}

</code></pre></div><p>配置（META-INF/spring.factories）</p>
<pre><code class="language-properties" data-lang="properties">org.springframework.context.ApplicationContextInitializer=\
com.atguigu.springboot.listener.HelloApplicationContextInitializer

org.springframework.boot.SpringApplicationRunListener=\
com.atguigu.springboot.listener.HelloSpringApplicationRunListener
</code></pre><p>只需要放在ioc容器中</p>
<p><strong>ApplicationRunner</strong></p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#707a7c">@Component</span>
<span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#8b008b;font-weight:bold">class</span> <span style="color:#008b45;font-weight:bold">HelloApplicationRunner</span> <span style="color:#8b008b;font-weight:bold">implements</span> ApplicationRunner {
    <span style="color:#707a7c">@Override</span>
    <span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#00688b;font-weight:bold">void</span> <span style="color:#008b45">run</span>(ApplicationArguments args) <span style="color:#8b008b;font-weight:bold">throws</span> Exception {
        System.<span style="color:#658b00">out</span>.<span style="color:#658b00">println</span>(<span style="color:#cd5555">&#34;ApplicationRunner...run....&#34;</span>);
    }
}
</code></pre></div><p><strong>CommandLineRunner</strong></p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#707a7c">@Component</span>
<span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#8b008b;font-weight:bold">class</span> <span style="color:#008b45;font-weight:bold">HelloCommandLineRunner</span> <span style="color:#8b008b;font-weight:bold">implements</span> CommandLineRunner {
    <span style="color:#707a7c">@Override</span>
    <span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#00688b;font-weight:bold">void</span> <span style="color:#008b45">run</span>(String... args) <span style="color:#8b008b;font-weight:bold">throws</span> Exception {
        System.<span style="color:#658b00">out</span>.<span style="color:#658b00">println</span>(<span style="color:#cd5555">&#34;CommandLineRunner...run...&#34;</span>+ Arrays.<span style="color:#658b00">asList</span>(args));
    }
}
</code></pre></div><h1 id="八自定义starter">八、自定义starter</h1>
<p>starter：</p>
<p>​	1、这个场景需要使用到的依赖是什么？</p>
<p>​	2、如何编写自动配置</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#707a7c">@Configuration</span>  <span style="color:#228b22">//指定这个类是一个配置类
</span><span style="color:#228b22"></span><span style="color:#707a7c">@ConditionalOnXXX</span>  <span style="color:#228b22">//在指定条件成立的情况下自动配置类生效
</span><span style="color:#228b22"></span><span style="color:#707a7c">@AutoConfigureAfter</span>  <span style="color:#228b22">//指定自动配置类的顺序
</span><span style="color:#228b22"></span><span style="color:#707a7c">@Bean</span>  <span style="color:#228b22">//给容器中添加组件
</span><span style="color:#228b22"></span>
<span style="color:#707a7c">@ConfigurationPropertie结合相关xxxProperties类来绑定相关的配置</span>
<span style="color:#707a7c">@EnableConfigurationProperties</span> <span style="color:#228b22">//让xxxProperties生效加入到容器中
</span><span style="color:#228b22"></span>
自动配置类要能加载
将需要启动就加载的自动配置类<span style="color:#a61717;background-color:#e3d2d2">，</span>配置在META-INF/spring.<span style="color:#658b00">factories</span>
org.<span style="color:#658b00">springframework</span>.<span style="color:#658b00">boot</span>.<span style="color:#658b00">autoconfigure</span>.<span style="color:#658b00">EnableAutoConfiguration</span>=<span style="color:#a61717;background-color:#e3d2d2">\</span>
org.<span style="color:#658b00">springframework</span>.<span style="color:#658b00">boot</span>.<span style="color:#658b00">autoconfigure</span>.<span style="color:#658b00">admin</span>.<span style="color:#658b00">SpringApplicationAdminJmxAutoConfiguration</span>,<span style="color:#a61717;background-color:#e3d2d2">\</span>
org.<span style="color:#658b00">springframework</span>.<span style="color:#658b00">boot</span>.<span style="color:#658b00">autoconfigure</span>.<span style="color:#658b00">aop</span>.<span style="color:#658b00">AopAutoConfiguration</span>,<span style="color:#a61717;background-color:#e3d2d2">\</span>
</code></pre></div><p>​	3、模式：</p>
<p>启动器只用来做依赖导入；</p>
<p>专门来写一个自动配置模块；</p>
<p>启动器依赖自动配置；别人只需要引入启动器（starter）</p>
<p>mybatis-spring-boot-starter；自定义启动器名-spring-boot-starter</p>
<p>步骤：</p>
<p>1）、启动器模块</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml"><span style="color:#1e889b">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;</span>
<span style="color:#8b008b;font-weight:bold">&lt;project</span> <span style="color:#658b00">xmlns=</span><span style="color:#cd5555">&#34;http://maven.apache.org/POM/4.0.0&#34;</span>
         <span style="color:#658b00">xmlns:xsi=</span><span style="color:#cd5555">&#34;http://www.w3.org/2001/XMLSchema-instance&#34;</span>
         <span style="color:#658b00">xsi:schemaLocation=</span><span style="color:#cd5555">&#34;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&#34;</span><span style="color:#8b008b;font-weight:bold">&gt;</span>
    <span style="color:#8b008b;font-weight:bold">&lt;modelVersion&gt;</span>4.0.0<span style="color:#8b008b;font-weight:bold">&lt;/modelVersion&gt;</span>

    <span style="color:#8b008b;font-weight:bold">&lt;groupId&gt;</span>com.atguigu.starter<span style="color:#8b008b;font-weight:bold">&lt;/groupId&gt;</span>
    <span style="color:#8b008b;font-weight:bold">&lt;artifactId&gt;</span>atguigu-spring-boot-starter<span style="color:#8b008b;font-weight:bold">&lt;/artifactId&gt;</span>
    <span style="color:#8b008b;font-weight:bold">&lt;version&gt;</span>1.0-SNAPSHOT<span style="color:#8b008b;font-weight:bold">&lt;/version&gt;</span>

    <span style="color:#228b22">&lt;!--启动器--&gt;</span>
    <span style="color:#8b008b;font-weight:bold">&lt;dependencies&gt;</span>

        <span style="color:#228b22">&lt;!--引入自动配置模块--&gt;</span>
        <span style="color:#8b008b;font-weight:bold">&lt;dependency&gt;</span>
            <span style="color:#8b008b;font-weight:bold">&lt;groupId&gt;</span>com.atguigu.starter<span style="color:#8b008b;font-weight:bold">&lt;/groupId&gt;</span>
            <span style="color:#8b008b;font-weight:bold">&lt;artifactId&gt;</span>atguigu-spring-boot-starter-autoconfigurer<span style="color:#8b008b;font-weight:bold">&lt;/artifactId&gt;</span>
            <span style="color:#8b008b;font-weight:bold">&lt;version&gt;</span>0.0.1-SNAPSHOT<span style="color:#8b008b;font-weight:bold">&lt;/version&gt;</span>
        <span style="color:#8b008b;font-weight:bold">&lt;/dependency&gt;</span>
    <span style="color:#8b008b;font-weight:bold">&lt;/dependencies&gt;</span>

<span style="color:#8b008b;font-weight:bold">&lt;/project&gt;</span>
</code></pre></div><p>2）、自动配置模块</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml"><span style="color:#1e889b">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;</span>
<span style="color:#8b008b;font-weight:bold">&lt;project</span> <span style="color:#658b00">xmlns=</span><span style="color:#cd5555">&#34;http://maven.apache.org/POM/4.0.0&#34;</span> <span style="color:#658b00">xmlns:xsi=</span><span style="color:#cd5555">&#34;http://www.w3.org/2001/XMLSchema-instance&#34;</span>
   <span style="color:#658b00">xsi:schemaLocation=</span><span style="color:#cd5555">&#34;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&#34;</span><span style="color:#8b008b;font-weight:bold">&gt;</span>
   <span style="color:#8b008b;font-weight:bold">&lt;modelVersion&gt;</span>4.0.0<span style="color:#8b008b;font-weight:bold">&lt;/modelVersion&gt;</span>

   <span style="color:#8b008b;font-weight:bold">&lt;groupId&gt;</span>com.atguigu.starter<span style="color:#8b008b;font-weight:bold">&lt;/groupId&gt;</span>
   <span style="color:#8b008b;font-weight:bold">&lt;artifactId&gt;</span>atguigu-spring-boot-starter-autoconfigurer<span style="color:#8b008b;font-weight:bold">&lt;/artifactId&gt;</span>
   <span style="color:#8b008b;font-weight:bold">&lt;version&gt;</span>0.0.1-SNAPSHOT<span style="color:#8b008b;font-weight:bold">&lt;/version&gt;</span>
   <span style="color:#8b008b;font-weight:bold">&lt;packaging&gt;</span>jar<span style="color:#8b008b;font-weight:bold">&lt;/packaging&gt;</span>

   <span style="color:#8b008b;font-weight:bold">&lt;name&gt;</span>atguigu-spring-boot-starter-autoconfigurer<span style="color:#8b008b;font-weight:bold">&lt;/name&gt;</span>
   <span style="color:#8b008b;font-weight:bold">&lt;description&gt;</span>Demo project for Spring Boot<span style="color:#8b008b;font-weight:bold">&lt;/description&gt;</span>

   <span style="color:#8b008b;font-weight:bold">&lt;parent&gt;</span>
      <span style="color:#8b008b;font-weight:bold">&lt;groupId&gt;</span>org.springframework.boot<span style="color:#8b008b;font-weight:bold">&lt;/groupId&gt;</span>
      <span style="color:#8b008b;font-weight:bold">&lt;artifactId&gt;</span>spring-boot-starter-parent<span style="color:#8b008b;font-weight:bold">&lt;/artifactId&gt;</span>
      <span style="color:#8b008b;font-weight:bold">&lt;version&gt;</span>1.5.10.RELEASE<span style="color:#8b008b;font-weight:bold">&lt;/version&gt;</span>
      <span style="color:#8b008b;font-weight:bold">&lt;relativePath/&gt;</span> <span style="color:#228b22">&lt;!-- lookup parent from repository --&gt;</span>
   <span style="color:#8b008b;font-weight:bold">&lt;/parent&gt;</span>

   <span style="color:#8b008b;font-weight:bold">&lt;properties&gt;</span>
      <span style="color:#8b008b;font-weight:bold">&lt;project.build.sourceEncoding&gt;</span>UTF-8<span style="color:#8b008b;font-weight:bold">&lt;/project.build.sourceEncoding&gt;</span>
      <span style="color:#8b008b;font-weight:bold">&lt;project.reporting.outputEncoding&gt;</span>UTF-8<span style="color:#8b008b;font-weight:bold">&lt;/project.reporting.outputEncoding&gt;</span>
      <span style="color:#8b008b;font-weight:bold">&lt;java.version&gt;</span>1.8<span style="color:#8b008b;font-weight:bold">&lt;/java.version&gt;</span>
   <span style="color:#8b008b;font-weight:bold">&lt;/properties&gt;</span>

   <span style="color:#8b008b;font-weight:bold">&lt;dependencies&gt;</span>

      <span style="color:#228b22">&lt;!--引入spring-boot-starter；所有starter的基本配置--&gt;</span>
      <span style="color:#8b008b;font-weight:bold">&lt;dependency&gt;</span>
         <span style="color:#8b008b;font-weight:bold">&lt;groupId&gt;</span>org.springframework.boot<span style="color:#8b008b;font-weight:bold">&lt;/groupId&gt;</span>
         <span style="color:#8b008b;font-weight:bold">&lt;artifactId&gt;</span>spring-boot-starter<span style="color:#8b008b;font-weight:bold">&lt;/artifactId&gt;</span>
      <span style="color:#8b008b;font-weight:bold">&lt;/dependency&gt;</span>

   <span style="color:#8b008b;font-weight:bold">&lt;/dependencies&gt;</span>



<span style="color:#8b008b;font-weight:bold">&lt;/project&gt;</span>

</code></pre></div><div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#8b008b;font-weight:bold">package</span> <span style="color:#008b45;text-decoration:underline">com.atguigu.starter</span>;

<span style="color:#8b008b;font-weight:bold">import</span> <span style="color:#008b45;text-decoration:underline">org.springframework.boot.context.properties.ConfigurationProperties</span>;

<span style="color:#707a7c">@ConfigurationProperties</span>(prefix = <span style="color:#cd5555">&#34;atguigu.hello&#34;</span>)
<span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#8b008b;font-weight:bold">class</span> <span style="color:#008b45;font-weight:bold">HelloProperties</span> {

    <span style="color:#8b008b;font-weight:bold">private</span> String prefix;
    <span style="color:#8b008b;font-weight:bold">private</span> String suffix;

    <span style="color:#8b008b;font-weight:bold">public</span> String <span style="color:#008b45">getPrefix</span>() {
        <span style="color:#8b008b;font-weight:bold">return</span> prefix;
    }

    <span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#00688b;font-weight:bold">void</span> <span style="color:#008b45">setPrefix</span>(String prefix) {
        <span style="color:#8b008b;font-weight:bold">this</span>.<span style="color:#658b00">prefix</span> = prefix;
    }

    <span style="color:#8b008b;font-weight:bold">public</span> String <span style="color:#008b45">getSuffix</span>() {
        <span style="color:#8b008b;font-weight:bold">return</span> suffix;
    }

    <span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#00688b;font-weight:bold">void</span> <span style="color:#008b45">setSuffix</span>(String suffix) {
        <span style="color:#8b008b;font-weight:bold">this</span>.<span style="color:#658b00">suffix</span> = suffix;
    }
}

</code></pre></div><div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#8b008b;font-weight:bold">package</span> <span style="color:#008b45;text-decoration:underline">com.atguigu.starter</span>;

<span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#8b008b;font-weight:bold">class</span> <span style="color:#008b45;font-weight:bold">HelloService</span> {

    HelloProperties helloProperties;

    <span style="color:#8b008b;font-weight:bold">public</span> HelloProperties <span style="color:#008b45">getHelloProperties</span>() {
        <span style="color:#8b008b;font-weight:bold">return</span> helloProperties;
    }

    <span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#00688b;font-weight:bold">void</span> <span style="color:#008b45">setHelloProperties</span>(HelloProperties helloProperties) {
        <span style="color:#8b008b;font-weight:bold">this</span>.<span style="color:#658b00">helloProperties</span> = helloProperties;
    }

    <span style="color:#8b008b;font-weight:bold">public</span> String <span style="color:#008b45">sayHellAtguigu</span>(String name){
        <span style="color:#8b008b;font-weight:bold">return</span> helloProperties.<span style="color:#658b00">getPrefix</span>()+<span style="color:#cd5555">&#34;-&#34;</span> +name + helloProperties.<span style="color:#658b00">getSuffix</span>();
    }
}

</code></pre></div><div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#8b008b;font-weight:bold">package</span> <span style="color:#008b45;text-decoration:underline">com.atguigu.starter</span>;

<span style="color:#8b008b;font-weight:bold">import</span> <span style="color:#008b45;text-decoration:underline">org.springframework.beans.factory.annotation.Autowired</span>;
<span style="color:#8b008b;font-weight:bold">import</span> <span style="color:#008b45;text-decoration:underline">org.springframework.boot.autoconfigure.condition.ConditionalOnWebApplication</span>;
<span style="color:#8b008b;font-weight:bold">import</span> <span style="color:#008b45;text-decoration:underline">org.springframework.boot.context.properties.EnableConfigurationProperties</span>;
<span style="color:#8b008b;font-weight:bold">import</span> <span style="color:#008b45;text-decoration:underline">org.springframework.context.annotation.Bean</span>;
<span style="color:#8b008b;font-weight:bold">import</span> <span style="color:#008b45;text-decoration:underline">org.springframework.context.annotation.Configuration</span>;

<span style="color:#707a7c">@Configuration</span>
<span style="color:#707a7c">@ConditionalOnWebApplication</span> <span style="color:#228b22">//web应用才生效
</span><span style="color:#228b22"></span><span style="color:#707a7c">@EnableConfigurationProperties</span>(HelloProperties.<span style="color:#658b00">class</span>)
<span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#8b008b;font-weight:bold">class</span> <span style="color:#008b45;font-weight:bold">HelloServiceAutoConfiguration</span> {

    <span style="color:#707a7c">@Autowired</span>
    HelloProperties helloProperties;
    <span style="color:#707a7c">@Bean</span>
    <span style="color:#8b008b;font-weight:bold">public</span> HelloService <span style="color:#008b45">helloService</span>(){
        HelloService service = <span style="color:#8b008b;font-weight:bold">new</span> HelloService();
        service.<span style="color:#658b00">setHelloProperties</span>(helloProperties);
        <span style="color:#8b008b;font-weight:bold">return</span> service;
    }
}

</code></pre></div><h1 id="更多springboot整合示例">更多SpringBoot整合示例</h1>
<p><a href="https://github.com/spring-projects/spring-boot/tree/master/spring-boot-samples">https://github.com/spring-projects/spring-boot/tree/master/spring-boot-samples</a></p>

</article></div>
    <div class="pad"></div>

    

    <div class="pad">

<div class="date">
    <time pubdate="0001-01-01">January 1, 0001</time>
    <span class="author">学习笔记</span>
</div>

<article>
    <h1><a href="https://example.com/posts/%E6%B6%88%E6%81%AF%E4%B8%AD%E9%97%B4%E4%BB%B6%E4%B9%8Bactivemq/">SpringBoot</a></h1>
    <div class="tags">
        
        
        <a href="/tags/%E5%88%86%E5%B8%83%E5%BC%8F" class="pure-button">分布式</a>
        
    </div>
    <h2 id="一什么是消息中间件">一、什么是消息中间件</h2>
<p>消息中间件利用高效可靠的消息传递机制进行平台无关的数据交流，并基于数据通信来进行分布式系统的集成。通过提供消息传递和消息排队模型，它可以在分布式环境下扩展进程间的通信。</p>
<h2 id="二消息中间件之hello-world">二、消息中间件之hello world</h2>
<p>目录结构：
<img src="/assets/blogImg/activemq1.jpg" alt="activemq">
1.queue
JmsConsumer.java：</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#8b008b;font-weight:bold">package</span> <span style="color:#008b45;text-decoration:underline">com.atguigu.activemq.queue</span>;

<span style="color:#8b008b;font-weight:bold">import</span> <span style="color:#008b45;text-decoration:underline">java.io.IOException</span>;

<span style="color:#8b008b;font-weight:bold">import</span> <span style="color:#008b45;text-decoration:underline">javax.jms.Connection</span>;
<span style="color:#8b008b;font-weight:bold">import</span> <span style="color:#008b45;text-decoration:underline">javax.jms.JMSException</span>;
<span style="color:#8b008b;font-weight:bold">import</span> <span style="color:#008b45;text-decoration:underline">javax.jms.Message</span>;
<span style="color:#8b008b;font-weight:bold">import</span> <span style="color:#008b45;text-decoration:underline">javax.jms.MessageConsumer</span>;
<span style="color:#8b008b;font-weight:bold">import</span> <span style="color:#008b45;text-decoration:underline">javax.jms.MessageListener</span>;
<span style="color:#8b008b;font-weight:bold">import</span> <span style="color:#008b45;text-decoration:underline">javax.jms.Queue</span>;
<span style="color:#8b008b;font-weight:bold">import</span> <span style="color:#008b45;text-decoration:underline">javax.jms.Session</span>;
<span style="color:#8b008b;font-weight:bold">import</span> <span style="color:#008b45;text-decoration:underline">javax.jms.TextMessage</span>;
<span style="color:#8b008b;font-weight:bold">import</span> <span style="color:#008b45;text-decoration:underline">org.apache.activemq.ActiveMQConnectionFactory</span>;
<span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#8b008b;font-weight:bold">class</span> <span style="color:#008b45;font-weight:bold">JmsConsumer</span> {
	<span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#8b008b;font-weight:bold">static</span> <span style="color:#8b008b;font-weight:bold">final</span> String ACTIVEMQ_URL = <span style="color:#cd5555">&#34;tcp://192.168.0.103:61616&#34;</span>;
	<span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#8b008b;font-weight:bold">static</span> <span style="color:#8b008b;font-weight:bold">final</span> String QUEUE_NAME = <span style="color:#cd5555">&#34;queue01&#34;</span>;
	<span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#8b008b;font-weight:bold">static</span> <span style="color:#00688b;font-weight:bold">void</span> <span style="color:#008b45">main</span>(String[] args) <span style="color:#8b008b;font-weight:bold">throws</span> JMSException, IOException {
		<span style="color:#228b22">// TODO Auto-generated method stub
</span><span style="color:#228b22"></span>        System.<span style="color:#658b00">out</span>.<span style="color:#658b00">println</span>(<span style="color:#cd5555">&#34;hello mq&#34;</span>);
        <span style="color:#228b22">//1.创建连接工厂
</span><span style="color:#228b22"></span>        ActiveMQConnectionFactory activeMQConnectionFactory = <span style="color:#8b008b;font-weight:bold">new</span> ActiveMQConnectionFactory(ACTIVEMQ_URL);
        <span style="color:#228b22">//2.通过连接工厂，获得连接的connection并启动
</span><span style="color:#228b22"></span>        Connection connection = activeMQConnectionFactory.<span style="color:#658b00">createConnection</span>();
        connection.<span style="color:#658b00">start</span>();
        <span style="color:#228b22">//3.创建会话session，其中两个书屋一个叫事务，一个交签收
</span><span style="color:#228b22"></span>        Session session = connection.<span style="color:#658b00">createSession</span>(<span style="color:#8b008b;font-weight:bold">false</span>, Session.<span style="color:#658b00">AUTO_ACKNOWLEDGE</span>);
        <span style="color:#228b22">//4创建目的地
</span><span style="color:#228b22"></span>        Queue queue = session.<span style="color:#658b00">createQueue</span>(QUEUE_NAME);
        <span style="color:#228b22">//5.创建消费者
</span><span style="color:#228b22"></span>        MessageConsumer messageConsumer = session.<span style="color:#658b00">createConsumer</span>(queue);
        <span style="color:#228b22">/*
</span><span style="color:#228b22">            * 方式一：等待消息的接受,过时不候
</span><span style="color:#228b22">        while(true) {
</span><span style="color:#228b22">            TextMessage textMessage = (TextMessage)messageConsumer.receive(4000L);
</span><span style="color:#228b22">            if(null != textMessage) {
</span><span style="color:#228b22">                System.out.println(&#34;接收者接收到的消息为:&#34;+textMessage.getText());
</span><span style="color:#228b22">            }else {
</span><span style="color:#228b22">                break;
</span><span style="color:#228b22">            }
</span><span style="color:#228b22">        }
</span><span style="color:#228b22">        messageConsumer.close();
</span><span style="color:#228b22">        session.close();
</span><span style="color:#228b22">        connection.close();
</span><span style="color:#228b22">        */</span>
            <span style="color:#228b22">//方式二：监听消息
</span><span style="color:#228b22"></span>            messageConsumer.<span style="color:#658b00">setMessageListener</span>(<span style="color:#8b008b;font-weight:bold">new</span> MessageListener() {	
            <span style="color:#707a7c">@Override</span>
            <span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#00688b;font-weight:bold">void</span> <span style="color:#008b45">onMessage</span>(Message message) {
                <span style="color:#228b22">// TODO Auto-generated method stub
</span><span style="color:#228b22"></span>                <span style="color:#8b008b;font-weight:bold">if</span>(message != <span style="color:#8b008b;font-weight:bold">null</span> &amp;&amp; message <span style="color:#8b008b;font-weight:bold">instanceof</span> TextMessage) {
                    TextMessage textmessage = (TextMessage)message;
                    <span style="color:#8b008b;font-weight:bold">try</span> {
                        System.<span style="color:#658b00">out</span>.<span style="color:#658b00">println</span>(<span style="color:#cd5555">&#34;监听到的消息为:&#34;</span>+textmessage.<span style="color:#658b00">getText</span>());
                    } <span style="color:#8b008b;font-weight:bold">catch</span> (JMSException e) {
                        <span style="color:#228b22">// TODO Auto-generated catch block
</span><span style="color:#228b22"></span>                        e.<span style="color:#658b00">printStackTrace</span>();
                    }
                }
            }
        });
        System.<span style="color:#658b00">in</span>.<span style="color:#658b00">read</span>();
        messageConsumer.<span style="color:#658b00">close</span>();
        session.<span style="color:#658b00">close</span>();
        connection.<span style="color:#658b00">close</span>();
	}
}
</code></pre></div><p>JmsProducer.java:</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#8b008b;font-weight:bold">package</span> <span style="color:#008b45;text-decoration:underline">com.atguigu.activemq.queue</span>;

<span style="color:#8b008b;font-weight:bold">import</span> <span style="color:#008b45;text-decoration:underline">javax.jms.Connection</span>;
<span style="color:#8b008b;font-weight:bold">import</span> <span style="color:#008b45;text-decoration:underline">javax.jms.Destination</span>;
<span style="color:#8b008b;font-weight:bold">import</span> <span style="color:#008b45;text-decoration:underline">javax.jms.JMSException</span>;
<span style="color:#8b008b;font-weight:bold">import</span> <span style="color:#008b45;text-decoration:underline">javax.jms.MessageProducer</span>;
<span style="color:#8b008b;font-weight:bold">import</span> <span style="color:#008b45;text-decoration:underline">javax.jms.Queue</span>;
<span style="color:#8b008b;font-weight:bold">import</span> <span style="color:#008b45;text-decoration:underline">javax.jms.Session</span>;
<span style="color:#8b008b;font-weight:bold">import</span> <span style="color:#008b45;text-decoration:underline">javax.jms.TextMessage</span>;

<span style="color:#8b008b;font-weight:bold">import</span> <span style="color:#008b45;text-decoration:underline">org.apache.activemq.ActiveMQConnectionFactory</span>;

<span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#8b008b;font-weight:bold">class</span> <span style="color:#008b45;font-weight:bold">JmsProducer</span> {
	<span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#8b008b;font-weight:bold">static</span> <span style="color:#8b008b;font-weight:bold">final</span> String ACTIVEMQ_URL = <span style="color:#cd5555">&#34;tcp://192.168.0.103:61616&#34;</span>;
	<span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#8b008b;font-weight:bold">static</span> <span style="color:#8b008b;font-weight:bold">final</span> String QUEUE_NAME = <span style="color:#cd5555">&#34;queue01&#34;</span>;
	<span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#8b008b;font-weight:bold">static</span> <span style="color:#00688b;font-weight:bold">void</span> <span style="color:#008b45">main</span>(String[] args) <span style="color:#8b008b;font-weight:bold">throws</span> JMSException {
		<span style="color:#228b22">//1.创建连接工厂
</span><span style="color:#228b22"></span>		ActiveMQConnectionFactory activeMQConnectionFactory = <span style="color:#8b008b;font-weight:bold">new</span> ActiveMQConnectionFactory(ACTIVEMQ_URL);
		<span style="color:#228b22">//2.通过连接工厂，获得连接的connection并启动
</span><span style="color:#228b22"></span>		Connection connection = activeMQConnectionFactory.<span style="color:#658b00">createConnection</span>();
		connection.<span style="color:#658b00">start</span>();
		<span style="color:#228b22">//3.创建会话session，其中两个书屋一个叫事务，一个交签收
</span><span style="color:#228b22"></span>		Session session = connection.<span style="color:#658b00">createSession</span>(<span style="color:#8b008b;font-weight:bold">false</span>, Session.<span style="color:#658b00">AUTO_ACKNOWLEDGE</span>);
		<span style="color:#228b22">//4创建目的地
</span><span style="color:#228b22"></span>		Queue queue = session.<span style="color:#658b00">createQueue</span>(QUEUE_NAME);
		<span style="color:#228b22">//5.创建消息的生产者
</span><span style="color:#228b22"></span>		MessageProducer messageProducer = session.<span style="color:#658b00">createProducer</span>(queue);
		<span style="color:#228b22">//6.通过消息生产者messageProducer生产三条消息发送到MQ的队列里面
</span><span style="color:#228b22"></span>		<span style="color:#8b008b;font-weight:bold">for</span>(<span style="color:#00688b;font-weight:bold">int</span> i=1;i&lt;=3;i++) {
			<span style="color:#228b22">//7.创建消息，
</span><span style="color:#228b22"></span>			TextMessage textMessage = session.<span style="color:#658b00">createTextMessage</span>(<span style="color:#cd5555">&#34;message-----&#34;</span>+i);
			<span style="color:#228b22">//8.通过messageProducer发送给mq
</span><span style="color:#228b22"></span>			messageProducer.<span style="color:#658b00">send</span>(textMessage);
			
		}
		messageProducer.<span style="color:#658b00">close</span>();
		session.<span style="color:#658b00">close</span>();
		connection.<span style="color:#658b00">close</span>();
		System.<span style="color:#658b00">out</span>.<span style="color:#658b00">println</span>(<span style="color:#cd5555">&#34;********消息发布到mq**********&#34;</span>);
	}
}
</code></pre></div><p>2.topic
JmsConsumer.java:</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#8b008b;font-weight:bold">package</span> <span style="color:#008b45;text-decoration:underline">com.atguigu.activemq.topic</span>;

<span style="color:#8b008b;font-weight:bold">import</span> <span style="color:#008b45;text-decoration:underline">java.io.IOException</span>;

<span style="color:#8b008b;font-weight:bold">import</span> <span style="color:#008b45;text-decoration:underline">javax.jms.Connection</span>;
<span style="color:#8b008b;font-weight:bold">import</span> <span style="color:#008b45;text-decoration:underline">javax.jms.JMSException</span>;
<span style="color:#8b008b;font-weight:bold">import</span> <span style="color:#008b45;text-decoration:underline">javax.jms.Message</span>;
<span style="color:#8b008b;font-weight:bold">import</span> <span style="color:#008b45;text-decoration:underline">javax.jms.MessageConsumer</span>;
<span style="color:#8b008b;font-weight:bold">import</span> <span style="color:#008b45;text-decoration:underline">javax.jms.MessageListener</span>;
<span style="color:#8b008b;font-weight:bold">import</span> <span style="color:#008b45;text-decoration:underline">javax.jms.Queue</span>;
<span style="color:#8b008b;font-weight:bold">import</span> <span style="color:#008b45;text-decoration:underline">javax.jms.Session</span>;
<span style="color:#8b008b;font-weight:bold">import</span> <span style="color:#008b45;text-decoration:underline">javax.jms.TextMessage</span>;
<span style="color:#8b008b;font-weight:bold">import</span> <span style="color:#008b45;text-decoration:underline">javax.jms.Topic</span>;

<span style="color:#8b008b;font-weight:bold">import</span> <span style="color:#008b45;text-decoration:underline">org.apache.activemq.ActiveMQConnectionFactory</span>;

<span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#8b008b;font-weight:bold">class</span> <span style="color:#008b45;font-weight:bold">JmsConsumer</span> {
	<span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#8b008b;font-weight:bold">static</span> <span style="color:#8b008b;font-weight:bold">final</span> String ACTIVEMQ_URL = <span style="color:#cd5555">&#34;tcp://192.168.0.106:61616&#34;</span>;
	<span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#8b008b;font-weight:bold">static</span> <span style="color:#8b008b;font-weight:bold">final</span> String TOPIC_NAME = <span style="color:#cd5555">&#34;queue01&#34;</span>;
	<span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#8b008b;font-weight:bold">static</span> <span style="color:#00688b;font-weight:bold">void</span> <span style="color:#008b45">main</span>(String[] args) <span style="color:#8b008b;font-weight:bold">throws</span> JMSException, IOException {
		<span style="color:#228b22">// TODO Auto-generated method stub
</span><span style="color:#228b22"></span>        System.<span style="color:#658b00">out</span>.<span style="color:#658b00">println</span>(<span style="color:#cd5555">&#34;我是一号消费者&#34;</span>);
        <span style="color:#228b22">//1.创建连接工厂
</span><span style="color:#228b22"></span>        ActiveMQConnectionFactory activeMQConnectionFactory = <span style="color:#8b008b;font-weight:bold">new</span> ActiveMQConnectionFactory(ACTIVEMQ_URL);
        <span style="color:#228b22">//2.通过连接工厂，获得连接的connection并启动
</span><span style="color:#228b22"></span>        Connection connection = activeMQConnectionFactory.<span style="color:#658b00">createConnection</span>();
        connection.<span style="color:#658b00">start</span>();
        <span style="color:#228b22">//3.创建会话session，其中两个书屋一个叫事务，一个交签收
</span><span style="color:#228b22"></span>        Session session = connection.<span style="color:#658b00">createSession</span>(<span style="color:#8b008b;font-weight:bold">false</span>, Session.<span style="color:#658b00">AUTO_ACKNOWLEDGE</span>);
        <span style="color:#228b22">//4创建目的地
</span><span style="color:#228b22"></span>        Topic topic = session.<span style="color:#658b00">createTopic</span>(TOPIC_NAME);
        <span style="color:#228b22">//5.创建消费者
</span><span style="color:#228b22"></span>        MessageConsumer messageConsumer = session.<span style="color:#658b00">createConsumer</span>(topic);
        <span style="color:#228b22">/*
</span><span style="color:#228b22">            * 方式一：等待消息的接受,过时不候
</span><span style="color:#228b22">        while(true) {
</span><span style="color:#228b22">            TextMessage textMessage = (TextMessage)messageConsumer.receive(4000L);
</span><span style="color:#228b22">            if(null != textMessage) {
</span><span style="color:#228b22">                System.out.println(&#34;接收者接收到的消息为:&#34;+textMessage.getText());
</span><span style="color:#228b22">            }else {
</span><span style="color:#228b22">                break;
</span><span style="color:#228b22">            }
</span><span style="color:#228b22">        }
</span><span style="color:#228b22">        messageConsumer.close();
</span><span style="color:#228b22">        session.close();
</span><span style="color:#228b22">        connection.close();
</span><span style="color:#228b22">        */</span>
        
            <span style="color:#228b22">//方式二：监听消息
</span><span style="color:#228b22"></span>            messageConsumer.<span style="color:#658b00">setMessageListener</span>(<span style="color:#8b008b;font-weight:bold">new</span> MessageListener() {
            
            <span style="color:#707a7c">@Override</span>
            <span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#00688b;font-weight:bold">void</span> <span style="color:#008b45">onMessage</span>(Message message) {
                <span style="color:#228b22">// TODO Auto-generated method stub
</span><span style="color:#228b22"></span>                <span style="color:#8b008b;font-weight:bold">if</span>(message != <span style="color:#8b008b;font-weight:bold">null</span> &amp;&amp; message <span style="color:#8b008b;font-weight:bold">instanceof</span> TextMessage) {
                    TextMessage textmessage = (TextMessage)message;
                    <span style="color:#8b008b;font-weight:bold">try</span> {
                        System.<span style="color:#658b00">out</span>.<span style="color:#658b00">println</span>(<span style="color:#cd5555">&#34;监听到的消息为:&#34;</span>+textmessage.<span style="color:#658b00">getText</span>());
                    } <span style="color:#8b008b;font-weight:bold">catch</span> (JMSException e) {
                        <span style="color:#228b22">// TODO Auto-generated catch block
</span><span style="color:#228b22"></span>                        e.<span style="color:#658b00">printStackTrace</span>();
                    }
                }
            }
        });
        System.<span style="color:#658b00">in</span>.<span style="color:#658b00">read</span>();
        messageConsumer.<span style="color:#658b00">close</span>();
        session.<span style="color:#658b00">close</span>();
        connection.<span style="color:#658b00">close</span>();
	}
}
</code></pre></div><p>JmsProducer.java:</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#8b008b;font-weight:bold">package</span> <span style="color:#008b45;text-decoration:underline">com.atguigu.activemq.topic</span>;
<span style="color:#8b008b;font-weight:bold">import</span> <span style="color:#008b45;text-decoration:underline">javax.jms.Connection</span>;
<span style="color:#8b008b;font-weight:bold">import</span> <span style="color:#008b45;text-decoration:underline">javax.jms.JMSException</span>;
<span style="color:#8b008b;font-weight:bold">import</span> <span style="color:#008b45;text-decoration:underline">javax.jms.MessageProducer</span>;
<span style="color:#8b008b;font-weight:bold">import</span> <span style="color:#008b45;text-decoration:underline">javax.jms.Queue</span>;
<span style="color:#8b008b;font-weight:bold">import</span> <span style="color:#008b45;text-decoration:underline">javax.jms.Session</span>;
<span style="color:#8b008b;font-weight:bold">import</span> <span style="color:#008b45;text-decoration:underline">javax.jms.TextMessage</span>;
<span style="color:#8b008b;font-weight:bold">import</span> <span style="color:#008b45;text-decoration:underline">javax.jms.Topic</span>;
<span style="color:#8b008b;font-weight:bold">import</span> <span style="color:#008b45;text-decoration:underline">org.apache.activemq.ActiveMQConnectionFactory</span>;

<span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#8b008b;font-weight:bold">class</span> <span style="color:#008b45;font-weight:bold">JmsProducer</span> {
	<span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#8b008b;font-weight:bold">static</span> <span style="color:#8b008b;font-weight:bold">final</span> String ACTIVEMQ_URL = <span style="color:#cd5555">&#34;tcp://192.168.0.106:61616&#34;</span>;
	<span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#8b008b;font-weight:bold">static</span> <span style="color:#8b008b;font-weight:bold">final</span> String TOPIC_NAME = <span style="color:#cd5555">&#34;queue01&#34;</span>;
	<span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#8b008b;font-weight:bold">static</span> <span style="color:#00688b;font-weight:bold">void</span> <span style="color:#008b45">main</span>(String[] args) <span style="color:#8b008b;font-weight:bold">throws</span> JMSException {
		<span style="color:#228b22">//1.创建连接工厂
</span><span style="color:#228b22"></span>		ActiveMQConnectionFactory activeMQConnectionFactory = <span style="color:#8b008b;font-weight:bold">new</span> ActiveMQConnectionFactory(ACTIVEMQ_URL);
		<span style="color:#228b22">//2.通过连接工厂，获得连接的connection并启动
</span><span style="color:#228b22"></span>		Connection connection = activeMQConnectionFactory.<span style="color:#658b00">createConnection</span>();
		connection.<span style="color:#658b00">start</span>();
		<span style="color:#228b22">//3.创建会话session，其中两个书屋一个叫事务，一个交签收
</span><span style="color:#228b22"></span>		Session session = connection.<span style="color:#658b00">createSession</span>(<span style="color:#8b008b;font-weight:bold">false</span>, Session.<span style="color:#658b00">AUTO_ACKNOWLEDGE</span>);
		<span style="color:#228b22">//4创建目的地
</span><span style="color:#228b22"></span>		Topic topic = session.<span style="color:#658b00">createTopic</span>(TOPIC_NAME);
		<span style="color:#228b22">//5.创建消息的生产者
</span><span style="color:#228b22"></span>		MessageProducer messageProducer = session.<span style="color:#658b00">createProducer</span>(topic);
		<span style="color:#228b22">//6.通过消息生产者messageProducer生产三条消息发送到MQ的队列里面
</span><span style="color:#228b22"></span>		<span style="color:#8b008b;font-weight:bold">for</span>(<span style="color:#00688b;font-weight:bold">int</span> i=1;i&lt;=3;i++) {
			<span style="color:#228b22">//7.创建消息，
</span><span style="color:#228b22"></span>			TextMessage textMessage = session.<span style="color:#658b00">createTextMessage</span>(<span style="color:#cd5555">&#34;topic message-----&#34;</span>+i);
			<span style="color:#228b22">//8.通过messageProducer发送给mq
</span><span style="color:#228b22"></span>			messageProducer.<span style="color:#658b00">send</span>(textMessage);
		}
		messageProducer.<span style="color:#658b00">close</span>();
		session.<span style="color:#658b00">close</span>();
		connection.<span style="color:#658b00">close</span>();
		System.<span style="color:#658b00">out</span>.<span style="color:#658b00">println</span>(<span style="color:#cd5555">&#34;********消息发布到mq**********&#34;</span>);
	}
}
</code></pre></div>
</article></div>
    <div class="pad"></div>

    

    <div class="pad">

<div class="date">
    <time pubdate="0001-01-01">January 1, 0001</time>
    <span class="author">学习笔记</span>
</div>

<article>
    <h1><a href="https://example.com/posts/springmvc%E7%9A%84%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/">SpringMVC的入门级教程</a></h1>
    <div class="tags">
        
        
        <a href="/tags/%E6%A1%86%E6%9E%B6" class="pure-button">框架</a>
        
    </div>
    <h2 id="一mvc的三层架构">一、MVC的三层架构</h2>
<p>接下来我们就说说每层都负责哪些方面：
<code>表现层</code>：
也就是我们常说的web层。它负责接收客户端请求，向客户端响应结果，通常客户端使用http协议请求web 层，web 需要接收 http 请求，完成 http 响应。表现层包括展示层和控制层：控制层负责接收请求，展示层负责结果的展示。表现层依赖业务层，接收到客户端请求一般会调用业务层进行业务处理，并将处理结果响应给客户端。表现层的设计一般都使用 MVC 模型。（MVC 是表现层的设计模型，和其他层没有关系）
<code>业务层</code>：
也就是我们常说的 service 层。它负责业务逻辑处理，和我们开发项目的需求息息相关。web 层依赖业务层，但是业务层不依赖 web 层。业务层在业务处理时可能会依赖持久层，如果要对数据持久化需要保证事务一致性。（也就是我们说的，事务应该放到业务层来控制）
<code>持久层</code>：
也就是我们是常说的 dao 层。负责数据持久化，包括数据层即数据库和数据访问层，数据库是对数据进行持久化的载体，数据访问层是业务层和持久层交互的接口，业务层需要通过数据访问层将数据持久化到数据库中。通俗的讲，持久层就是和数据库交互，对数据库表进行曾删改查的。
<img src="/assets/blogImg/springmvc1.png" alt="mvc"></p>
<h2 id="二springmvc的简介">二、SpringMVC的简介</h2>
<p>SpringMVC 是一种基于 Java 的实现 MVC 设计模型的请求驱动类型的轻量级 Web 框架，属于 SpringFrameWork 的后续产品，已经融合在 Spring Web Flow 里面。Spring 框架提供了构建Web 应用程序的全功能 MVC 模块。使用 Spring 可插入的 MVC 架构，从而在使用 Spring 进行 WEB 开发时，可以选择使用 Spring的 Spring MVC 框架或集成其他 MVC 开发框架，如 Struts1(现在一般不用)，Struts2 等。SpringMVC 已经成为目前最主流的 MVC 框架之一，并且随着 Spring3.0 的发布，全面超越 Struts2，成为最优秀的 MVC 框架。它通过一套注解，让一个简单的 Java 类成为处理请求的控制器，而无须实现任何接口。同时它还支持RESTful 编程风格的请求。</p>
<h2 id="二springmvc在三层结构中的位置">二、SpringMVC在三层结构中的位置</h2>
<p><img src="/assets/blogImg/springmvc2.png" alt="mvc2"></p>
<h2 id="三springmvc和struts2的区别">三、SpringMVC和Struts2的区别</h2>
<p><code>1、共同点</code>：
它们都是表现层框架，都是基于 MVC 模型编写的。
它们的底层都离不开原始 ServletAPI。
它们处理请求的机制都是一个核心控制器。
<code>2、区别</code>：
Spring MVC 的入口是 Servlet, 而 Struts2 是 Filter
Spring MVC 是基于方法设计的，而 Struts2 是基于类，Struts2 每次执行都会创建一个动作类。所以 Spring MVC 会稍微比 Struts2 快些。
Spring MVC 使用更加简洁,同时还支持 JSR303, 处理 ajax 的请求更方便(JSR303 是一套 JavaBean 参数校验的标准，它定义了很多常用的校验注解，我们可以直接将这些注解加在我们 JavaBean 的属性上面，就可以在需要校验的时候进行校验了。)Struts2 的 OGNL 表达式使页面的开发效率相比 Spring MVC 更高些，但执行效率并没有比 JSTL 提升，尤其是 struts2 的表单标签，远没有 html 执行效率高。</p>
<h2 id="四springmvc的入门案例">四、SpringMVC的入门案例</h2>
<h3 id="入门案例之idea版本">入门案例之IDEA版本</h3>
<p><code>1.启动服务器，加载一些配置文件</code></p>
<blockquote>
<p>DispatcherServlet对象创建(前端控制器，指挥控制作用)    <br>
springmvc.xml被加载         <br>
HelloContrller创建程对象</p>
</blockquote>
<p><code>2.发送请求，后台处理请求</code>
<img src="/assets/blogImg/springmvc3.jpg" alt="mvc3"></p>
<p><code>3、编码的具体流程</code>
第一步：创建一个Maven工程
第二部：补全目录结构</p>
<blockquote>
<p>java -&gt; make Directory as -&gt; Sources Root
resources -&gt; make Directory as -&gt; Resource Root(并在该目录下new XML configuraton File -&gt; Spring Config)</p>
</blockquote>
<p>第三步：引入坐标依赖(在pom.xml)</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml"><span style="color:#1e889b">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;</span>

<span style="color:#8b008b;font-weight:bold">&lt;project</span> <span style="color:#658b00">xmlns=</span><span style="color:#cd5555">&#34;http://maven.apache.org/POM/4.0.0&#34;</span> <span style="color:#658b00">xmlns:xsi=</span><span style="color:#cd5555">&#34;http://www.w3.org/2001/XMLSchema-instance&#34;</span>
  <span style="color:#658b00">xsi:schemaLocation=</span><span style="color:#cd5555">&#34;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&#34;</span><span style="color:#8b008b;font-weight:bold">&gt;</span>
  <span style="color:#8b008b;font-weight:bold">&lt;modelVersion&gt;</span>4.0.0<span style="color:#8b008b;font-weight:bold">&lt;/modelVersion&gt;</span>

  <span style="color:#8b008b;font-weight:bold">&lt;groupId&gt;</span>cn.itcast<span style="color:#8b008b;font-weight:bold">&lt;/groupId&gt;</span>
  <span style="color:#8b008b;font-weight:bold">&lt;artifactId&gt;</span>springmvc_day01_01_start<span style="color:#8b008b;font-weight:bold">&lt;/artifactId&gt;</span>
  <span style="color:#8b008b;font-weight:bold">&lt;version&gt;</span>1.0-SNAPSHOT<span style="color:#8b008b;font-weight:bold">&lt;/version&gt;</span>
  <span style="color:#8b008b;font-weight:bold">&lt;packaging&gt;</span>war<span style="color:#8b008b;font-weight:bold">&lt;/packaging&gt;</span>

  <span style="color:#8b008b;font-weight:bold">&lt;name&gt;</span>springmvc_day01_01_start Maven Webapp<span style="color:#8b008b;font-weight:bold">&lt;/name&gt;</span>
  <span style="color:#228b22">&lt;!-- FIXME change it to the project&#39;s website --&gt;</span>
  <span style="color:#8b008b;font-weight:bold">&lt;url&gt;</span>http://www.example.com<span style="color:#8b008b;font-weight:bold">&lt;/url&gt;</span>

  <span style="color:#8b008b;font-weight:bold">&lt;properties&gt;</span>
    <span style="color:#8b008b;font-weight:bold">&lt;project.build.sourceEncoding&gt;</span>UTF-8<span style="color:#8b008b;font-weight:bold">&lt;/project.build.sourceEncoding&gt;</span>
    <span style="color:#8b008b;font-weight:bold">&lt;maven.compiler.source&gt;</span>1.8<span style="color:#8b008b;font-weight:bold">&lt;/maven.compiler.source&gt;</span>
    <span style="color:#8b008b;font-weight:bold">&lt;maven.compiler.target&gt;</span>1.8<span style="color:#8b008b;font-weight:bold">&lt;/maven.compiler.target&gt;</span>
    <span style="color:#8b008b;font-weight:bold">&lt;spring.version&gt;</span>5.0.2.RELEASE<span style="color:#8b008b;font-weight:bold">&lt;/spring.version&gt;</span>
  <span style="color:#8b008b;font-weight:bold">&lt;/properties&gt;</span>

  <span style="color:#8b008b;font-weight:bold">&lt;dependencies&gt;</span>
    <span style="color:#8b008b;font-weight:bold">&lt;dependency&gt;</span>
      <span style="color:#8b008b;font-weight:bold">&lt;groupId&gt;</span>org.springframework<span style="color:#8b008b;font-weight:bold">&lt;/groupId&gt;</span>
      <span style="color:#8b008b;font-weight:bold">&lt;artifactId&gt;</span>spring-context<span style="color:#8b008b;font-weight:bold">&lt;/artifactId&gt;</span>
      <span style="color:#8b008b;font-weight:bold">&lt;version&gt;</span>${spring.version}<span style="color:#8b008b;font-weight:bold">&lt;/version&gt;</span>
    <span style="color:#8b008b;font-weight:bold">&lt;/dependency&gt;</span>
    <span style="color:#8b008b;font-weight:bold">&lt;dependency&gt;</span>
      <span style="color:#8b008b;font-weight:bold">&lt;groupId&gt;</span>org.springframework<span style="color:#8b008b;font-weight:bold">&lt;/groupId&gt;</span>
      <span style="color:#8b008b;font-weight:bold">&lt;artifactId&gt;</span>spring-web<span style="color:#8b008b;font-weight:bold">&lt;/artifactId&gt;</span>
      <span style="color:#8b008b;font-weight:bold">&lt;version&gt;</span>${spring.version}<span style="color:#8b008b;font-weight:bold">&lt;/version&gt;</span>
    <span style="color:#8b008b;font-weight:bold">&lt;/dependency&gt;</span>
    <span style="color:#8b008b;font-weight:bold">&lt;dependency&gt;</span>
      <span style="color:#8b008b;font-weight:bold">&lt;groupId&gt;</span>org.springframework<span style="color:#8b008b;font-weight:bold">&lt;/groupId&gt;</span>
      <span style="color:#8b008b;font-weight:bold">&lt;artifactId&gt;</span>spring-webmvc<span style="color:#8b008b;font-weight:bold">&lt;/artifactId&gt;</span>
      <span style="color:#8b008b;font-weight:bold">&lt;version&gt;</span>${spring.version}<span style="color:#8b008b;font-weight:bold">&lt;/version&gt;</span>
    <span style="color:#8b008b;font-weight:bold">&lt;/dependency&gt;</span>
    <span style="color:#8b008b;font-weight:bold">&lt;dependency&gt;</span>
      <span style="color:#8b008b;font-weight:bold">&lt;groupId&gt;</span>javax.servlet<span style="color:#8b008b;font-weight:bold">&lt;/groupId&gt;</span>
      <span style="color:#8b008b;font-weight:bold">&lt;artifactId&gt;</span>servlet-api<span style="color:#8b008b;font-weight:bold">&lt;/artifactId&gt;</span>
      <span style="color:#8b008b;font-weight:bold">&lt;version&gt;</span>2.5<span style="color:#8b008b;font-weight:bold">&lt;/version&gt;</span>
      <span style="color:#8b008b;font-weight:bold">&lt;scope&gt;</span>provided<span style="color:#8b008b;font-weight:bold">&lt;/scope&gt;</span>
    <span style="color:#8b008b;font-weight:bold">&lt;/dependency&gt;</span>
    <span style="color:#8b008b;font-weight:bold">&lt;dependency&gt;</span>
      <span style="color:#8b008b;font-weight:bold">&lt;groupId&gt;</span>javax.servlet.jsp<span style="color:#8b008b;font-weight:bold">&lt;/groupId&gt;</span>
      <span style="color:#8b008b;font-weight:bold">&lt;artifactId&gt;</span>jsp-api<span style="color:#8b008b;font-weight:bold">&lt;/artifactId&gt;</span>
      <span style="color:#8b008b;font-weight:bold">&lt;version&gt;</span>2.0<span style="color:#8b008b;font-weight:bold">&lt;/version&gt;</span>
      <span style="color:#8b008b;font-weight:bold">&lt;scope&gt;</span>provided<span style="color:#8b008b;font-weight:bold">&lt;/scope&gt;</span>
    <span style="color:#8b008b;font-weight:bold">&lt;/dependency&gt;</span>
  <span style="color:#8b008b;font-weight:bold">&lt;/dependencies&gt;</span>

  <span style="color:#8b008b;font-weight:bold">&lt;build&gt;</span>
    <span style="color:#8b008b;font-weight:bold">&lt;finalName&gt;</span>springmvc_day01_01_start<span style="color:#8b008b;font-weight:bold">&lt;/finalName&gt;</span>
    <span style="color:#8b008b;font-weight:bold">&lt;pluginManagement&gt;</span><span style="color:#228b22">&lt;!-- lock down plugins versions to avoid using Maven defaults (may be moved to parent pom) --&gt;</span>
      <span style="color:#8b008b;font-weight:bold">&lt;plugins&gt;</span>
        <span style="color:#8b008b;font-weight:bold">&lt;plugin&gt;</span>
          <span style="color:#8b008b;font-weight:bold">&lt;artifactId&gt;</span>maven-clean-plugin<span style="color:#8b008b;font-weight:bold">&lt;/artifactId&gt;</span>
          <span style="color:#8b008b;font-weight:bold">&lt;version&gt;</span>3.1.0<span style="color:#8b008b;font-weight:bold">&lt;/version&gt;</span>
        <span style="color:#8b008b;font-weight:bold">&lt;/plugin&gt;</span>
        <span style="color:#228b22">&lt;!-- see http://maven.apache.org/ref/current/maven-core/default-bindings.html#Plugin_bindings_for_war_packaging --&gt;</span>
        <span style="color:#8b008b;font-weight:bold">&lt;plugin&gt;</span>
          <span style="color:#8b008b;font-weight:bold">&lt;artifactId&gt;</span>maven-resources-plugin<span style="color:#8b008b;font-weight:bold">&lt;/artifactId&gt;</span>
          <span style="color:#8b008b;font-weight:bold">&lt;version&gt;</span>3.0.2<span style="color:#8b008b;font-weight:bold">&lt;/version&gt;</span>
        <span style="color:#8b008b;font-weight:bold">&lt;/plugin&gt;</span>
        <span style="color:#8b008b;font-weight:bold">&lt;plugin&gt;</span>
          <span style="color:#8b008b;font-weight:bold">&lt;artifactId&gt;</span>maven-compiler-plugin<span style="color:#8b008b;font-weight:bold">&lt;/artifactId&gt;</span>
          <span style="color:#8b008b;font-weight:bold">&lt;version&gt;</span>3.8.0<span style="color:#8b008b;font-weight:bold">&lt;/version&gt;</span>
        <span style="color:#8b008b;font-weight:bold">&lt;/plugin&gt;</span>
        <span style="color:#8b008b;font-weight:bold">&lt;plugin&gt;</span>
          <span style="color:#8b008b;font-weight:bold">&lt;artifactId&gt;</span>maven-surefire-plugin<span style="color:#8b008b;font-weight:bold">&lt;/artifactId&gt;</span>
          <span style="color:#8b008b;font-weight:bold">&lt;version&gt;</span>2.22.1<span style="color:#8b008b;font-weight:bold">&lt;/version&gt;</span>
        <span style="color:#8b008b;font-weight:bold">&lt;/plugin&gt;</span>
        <span style="color:#8b008b;font-weight:bold">&lt;plugin&gt;</span>
          <span style="color:#8b008b;font-weight:bold">&lt;artifactId&gt;</span>maven-war-plugin<span style="color:#8b008b;font-weight:bold">&lt;/artifactId&gt;</span>
          <span style="color:#8b008b;font-weight:bold">&lt;version&gt;</span>3.2.2<span style="color:#8b008b;font-weight:bold">&lt;/version&gt;</span>
        <span style="color:#8b008b;font-weight:bold">&lt;/plugin&gt;</span>
        <span style="color:#8b008b;font-weight:bold">&lt;plugin&gt;</span>
          <span style="color:#8b008b;font-weight:bold">&lt;artifactId&gt;</span>maven-install-plugin<span style="color:#8b008b;font-weight:bold">&lt;/artifactId&gt;</span>
          <span style="color:#8b008b;font-weight:bold">&lt;version&gt;</span>2.5.2<span style="color:#8b008b;font-weight:bold">&lt;/version&gt;</span>
        <span style="color:#8b008b;font-weight:bold">&lt;/plugin&gt;</span>
        <span style="color:#8b008b;font-weight:bold">&lt;plugin&gt;</span>
          <span style="color:#8b008b;font-weight:bold">&lt;artifactId&gt;</span>maven-deploy-plugin<span style="color:#8b008b;font-weight:bold">&lt;/artifactId&gt;</span>
          <span style="color:#8b008b;font-weight:bold">&lt;version&gt;</span>2.8.2<span style="color:#8b008b;font-weight:bold">&lt;/version&gt;</span>
        <span style="color:#8b008b;font-weight:bold">&lt;/plugin&gt;</span>
      <span style="color:#8b008b;font-weight:bold">&lt;/plugins&gt;</span>
    <span style="color:#8b008b;font-weight:bold">&lt;/pluginManagement&gt;</span>
  <span style="color:#8b008b;font-weight:bold">&lt;/build&gt;</span>
<span style="color:#8b008b;font-weight:bold">&lt;/project&gt;</span>

</code></pre></div><p>第四部：配置前端控制器（web.xml）&mdash;实质是servlet</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml"><span style="color:#1e889b">&lt;!DOCTYPE web-app PUBLIC
</span><span style="color:#1e889b"> &#34;-//Sun Microsystems, Inc.//DTD Web Application 2.3//EN&#34;
</span><span style="color:#1e889b"> &#34;http://java.sun.com/dtd/web-app_2_3.dtd&#34; &gt;</span>

<span style="color:#8b008b;font-weight:bold">&lt;web-app&gt;</span>
  <span style="color:#8b008b;font-weight:bold">&lt;display-name&gt;</span>Archetype Created Web Application<span style="color:#8b008b;font-weight:bold">&lt;/display-name&gt;</span>
  <span style="color:#8b008b;font-weight:bold">&lt;servlet&gt;</span>
    <span style="color:#8b008b;font-weight:bold">&lt;servlet-name&gt;</span>dispatcherServlet<span style="color:#8b008b;font-weight:bold">&lt;/servlet-name&gt;</span>
    <span style="color:#8b008b;font-weight:bold">&lt;servlet-class&gt;</span>org.springframework.web.servlet.DispatcherServlet<span style="color:#8b008b;font-weight:bold">&lt;/servlet-class&gt;</span>
    <span style="color:#8b008b;font-weight:bold">&lt;init-param&gt;</span>
      <span style="color:#8b008b;font-weight:bold">&lt;param-name&gt;</span>contextConfigLocation<span style="color:#8b008b;font-weight:bold">&lt;/param-name&gt;</span>
      <span style="color:#8b008b;font-weight:bold">&lt;param-value&gt;</span>classpath:springmvc.xml<span style="color:#8b008b;font-weight:bold">&lt;/param-value&gt;</span>
    <span style="color:#8b008b;font-weight:bold">&lt;/init-param&gt;</span>
      <span style="color:#228b22">&lt;!--该标签使得我们第一次启动服务器时，servlet直接创建成为对象--&gt;</span>
    <span style="color:#8b008b;font-weight:bold">&lt;load-on-startup&gt;</span>1<span style="color:#8b008b;font-weight:bold">&lt;/load-on-startup&gt;</span>
  <span style="color:#8b008b;font-weight:bold">&lt;/servlet&gt;</span>

  <span style="color:#8b008b;font-weight:bold">&lt;servlet-mapping&gt;</span>
    <span style="color:#8b008b;font-weight:bold">&lt;servlet-name&gt;</span>dispatcherServlet<span style="color:#8b008b;font-weight:bold">&lt;/servlet-name&gt;</span>
    <span style="color:#8b008b;font-weight:bold">&lt;url-pattern&gt;</span>/<span style="color:#8b008b;font-weight:bold">&lt;/url-pattern&gt;</span>
  <span style="color:#8b008b;font-weight:bold">&lt;/servlet-mapping&gt;</span>
<span style="color:#8b008b;font-weight:bold">&lt;/web-app&gt;</span>
</code></pre></div><p>第五步：配置springmvc框架（springmvc.xml）</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml"><span style="color:#1e889b">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;</span>
<span style="color:#8b008b;font-weight:bold">&lt;beans</span> <span style="color:#658b00">xmlns=</span><span style="color:#cd5555">&#34;http://www.springframework.org/schema/beans&#34;</span>
       <span style="color:#658b00">xmlns:mvc=</span><span style="color:#cd5555">&#34;http://www.springframework.org/schema/mvc&#34;</span>
       <span style="color:#658b00">xmlns:context=</span><span style="color:#cd5555">&#34;http://www.springframework.org/schema/context&#34;</span>
       <span style="color:#658b00">xmlns:xsi=</span><span style="color:#cd5555">&#34;http://www.w3.org/2001/XMLSchema-instance&#34;</span>
       <span style="color:#658b00">xsi:schemaLocation=</span><span style="color:#cd5555">&#34;
</span><span style="color:#cd5555">        http://www.springframework.org/schema/beans
</span><span style="color:#cd5555">        http://www.springframework.org/schema/beans/spring-beans.xsd
</span><span style="color:#cd5555">        http://www.springframework.org/schema/mvc
</span><span style="color:#cd5555">        http://www.springframework.org/schema/mvc/spring-mvc.xsd
</span><span style="color:#cd5555">        http://www.springframework.org/schema/context
</span><span style="color:#cd5555">        http://www.springframework.org/schema/context/spring-context.xsd&#34;</span><span style="color:#8b008b;font-weight:bold">&gt;</span>
    <span style="color:#228b22">&lt;!--开启注解扫描--&gt;</span>
    <span style="color:#8b008b;font-weight:bold">&lt;context:component-scan</span> <span style="color:#658b00">base-package=</span><span style="color:#cd5555">&#34;cn.itcast&#34;</span><span style="color:#8b008b;font-weight:bold">/&gt;</span>

    <span style="color:#228b22">&lt;!--视图解析器对象--&gt;</span>
    <span style="color:#8b008b;font-weight:bold">&lt;bean</span> <span style="color:#658b00">id=</span><span style="color:#cd5555">&#34;internalResourceViewResolver&#34;</span> <span style="color:#658b00">class=</span><span style="color:#cd5555">&#34;org.springframework.web.servlet.view.InternalResourceViewResolver&#34;</span><span style="color:#8b008b;font-weight:bold">&gt;</span>
        <span style="color:#8b008b;font-weight:bold">&lt;property</span> <span style="color:#658b00">name=</span><span style="color:#cd5555">&#34;prefix&#34;</span> <span style="color:#658b00">value=</span><span style="color:#cd5555">&#34;/WEB-INF/pages/&#34;</span><span style="color:#8b008b;font-weight:bold">&gt;&lt;/property&gt;</span>
        <span style="color:#8b008b;font-weight:bold">&lt;property</span> <span style="color:#658b00">name=</span><span style="color:#cd5555">&#34;suffix&#34;</span> <span style="color:#658b00">value=</span><span style="color:#cd5555">&#34;.jsp&#34;</span><span style="color:#8b008b;font-weight:bold">&gt;&lt;/property&gt;</span>
    <span style="color:#8b008b;font-weight:bold">&lt;/bean&gt;</span>
    <span style="color:#228b22">&lt;!--开启SpringMVC框架注解的支持--&gt;</span>
    <span style="color:#8b008b;font-weight:bold">&lt;mvc:annotation-driven</span> <span style="color:#8b008b;font-weight:bold">/&gt;</span>
<span style="color:#8b008b;font-weight:bold">&lt;/beans&gt;</span>
</code></pre></div><p>第六步：服务器部署
Deployment -&gt; &ldquo;+&rdquo; -&gt; artifact(xxx.exploded)
第七部：编写入门程序(index.jsp)</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java">&lt;%--
  Created by IntelliJ IDEA.
  User: admin
  Date: 2019/7/9
  Time: 15:22
  To change <span style="color:#8b008b;font-weight:bold">this</span> template use File | Settings | File Templates.
--%&gt;
&lt;%<span style="color:#a61717;background-color:#e3d2d2">@</span> page contentType=<span style="color:#cd5555">&#34;text/html;charset=UTF-8&#34;</span> language=<span style="color:#cd5555">&#34;java&#34;</span> %&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;Title&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;h3&gt;热门程序&lt;/h3&gt;
    &lt;a href=<span style="color:#cd5555">&#34;hello&#34;</span>&gt;点我跳转&lt;/a&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre></div><p>第七步：提供访问成功是返回的文件
创建文件夹：WEB-INF -&gt;pages-&gt;success.jsp
第八步：配置视图解析器
配置视图解析器，能使核心控制器找到返回的JSP文件的具体位置。</p>
<p><code>总结：</code>
1.引入相关的依赖
2.配置前端控制器
3.配置springmvc框架</p>
<h3 id="入门案例之eclipse版本">入门案例之Eclipse版本</h3>
<p>目录结构：
<img src="/assets/blogImg/spring2.jpg" alt="spring">
HelloController.java:</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#8b008b;font-weight:bold">package</span> <span style="color:#008b45;text-decoration:underline">com.test.controller</span>;
<span style="color:#8b008b;font-weight:bold">import</span> <span style="color:#008b45;text-decoration:underline">org.springframework.stereotype.Controller</span>;
<span style="color:#8b008b;font-weight:bold">import</span> <span style="color:#008b45;text-decoration:underline">org.springframework.web.bind.annotation.RequestMapping</span>;
<span style="color:#707a7c">@Controller</span>
<span style="color:#707a7c">@RequestMapping</span>(path=<span style="color:#cd5555">&#34;/test&#34;</span>)
<span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#8b008b;font-weight:bold">class</span> <span style="color:#008b45;font-weight:bold">HelloController</span> {
	<span style="color:#707a7c">@RequestMapping</span>(path=<span style="color:#cd5555">&#34;/hello&#34;</span>)
	<span style="color:#8b008b;font-weight:bold">public</span> String <span style="color:#008b45">sayHello</span>() {
		<span style="color:#8b008b;font-weight:bold">return</span> <span style="color:#cd5555">&#34;success&#34;</span>;
	}
}
</code></pre></div><p>springmvc.xml:</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml"><span style="color:#1e889b">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;</span>
<span style="color:#8b008b;font-weight:bold">&lt;beans</span> <span style="color:#658b00">xmlns=</span><span style="color:#cd5555">&#34;http://www.springframework.org/schema/beans&#34;</span>
	<span style="color:#658b00">xmlns:xsi=</span><span style="color:#cd5555">&#34;http://www.w3.org/2001/XMLSchema-instance&#34;</span>
	<span style="color:#658b00">xmlns:context=</span><span style="color:#cd5555">&#34;http://www.springframework.org/schema/context&#34;</span>
	<span style="color:#658b00">xmlns:mvc=</span><span style="color:#cd5555">&#34;http://www.springframework.org/schema/mvc&#34;</span>
	<span style="color:#658b00">xsi:schemaLocation=</span><span style="color:#cd5555">&#34;http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-4.3.xsd
</span><span style="color:#cd5555">		http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
</span><span style="color:#cd5555">		http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-4.3.xsd&#34;</span><span style="color:#8b008b;font-weight:bold">&gt;</span>
	<span style="color:#228b22">&lt;!-- 开启注解扫描 --&gt;</span>
	<span style="color:#8b008b;font-weight:bold">&lt;context:component-scan</span> <span style="color:#658b00">base-package=</span><span style="color:#cd5555">&#34;com.test&#34;</span><span style="color:#8b008b;font-weight:bold">&gt;&lt;/context:component-scan&gt;</span>
	
	<span style="color:#228b22">&lt;!-- 配置视图解析器 --&gt;</span>
	<span style="color:#8b008b;font-weight:bold">&lt;bean</span> <span style="color:#658b00">id=</span><span style="color:#cd5555">&#34;internalResourceView&#34;</span> <span style="color:#658b00">class=</span><span style="color:#cd5555">&#34;org.springframework.web.servlet.view.InternalResourceViewResolver&#34;</span><span style="color:#8b008b;font-weight:bold">&gt;</span>
		<span style="color:#8b008b;font-weight:bold">&lt;property</span> <span style="color:#658b00">name=</span><span style="color:#cd5555">&#34;prefix&#34;</span> <span style="color:#658b00">value=</span><span style="color:#cd5555">&#34;/WEB-INF/pages/&#34;</span><span style="color:#8b008b;font-weight:bold">&gt;&lt;/property&gt;</span>
		<span style="color:#8b008b;font-weight:bold">&lt;property</span> <span style="color:#658b00">name=</span><span style="color:#cd5555">&#34;suffix&#34;</span> <span style="color:#658b00">value=</span><span style="color:#cd5555">&#34;.jsp&#34;</span><span style="color:#8b008b;font-weight:bold">&gt;&lt;/property&gt;</span>
	<span style="color:#8b008b;font-weight:bold">&lt;/bean&gt;</span>
	
	<span style="color:#228b22">&lt;!-- 开启spring的注解支持 --&gt;</span>
	<span style="color:#8b008b;font-weight:bold">&lt;mvc:annotation-driven</span> <span style="color:#8b008b;font-weight:bold">/&gt;</span>
<span style="color:#8b008b;font-weight:bold">&lt;/beans&gt;</span>
</code></pre></div><p>success.jsp:</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">&lt;%@ page <span style="color:#00688b">language</span>=<span style="color:#cd5555">&#34;java&#34;</span> <span style="color:#00688b">contentType</span>=<span style="color:#cd5555">&#34;text/html; charset=UTF-8&#34;</span>
    <span style="color:#00688b">pageEncoding</span>=<span style="color:#cd5555">&#34;UTF-8&#34;</span>%&gt;
&lt;!DOCTYPE html&gt;
&lt;html&gt;
  &lt;head&gt;
    &lt;meta <span style="color:#00688b">charset</span>=<span style="color:#cd5555">&#34;UTF-8&#34;</span>&gt;
    &lt;title&gt;Insert title here&lt;/title&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;h1&gt;入门成功&lt;/h1&gt;
  &lt;/body&gt;
&lt;/html&gt;
</code></pre></div><p>web.xml:</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml"><span style="color:#1e889b">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;</span>
<span style="color:#8b008b;font-weight:bold">&lt;web-app</span> <span style="color:#658b00">id=</span><span style="color:#cd5555">&#34;WebApp_ID&#34;</span> <span style="color:#658b00">version=</span><span style="color:#cd5555">&#34;2.5&#34;</span> <span style="color:#658b00">xmlns=</span><span style="color:#cd5555">&#34;http://java.sun.com/xml/ns/javaee&#34;</span> <span style="color:#658b00">xmlns:xsi=</span><span style="color:#cd5555">&#34;http://www.w3.org/2001/XMLSchema-instance&#34;</span> <span style="color:#658b00">xsi:schemaLocation=</span><span style="color:#cd5555">&#34;http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd&#34;</span><span style="color:#8b008b;font-weight:bold">&gt;</span>
<span style="color:#228b22">&lt;!-- The front controller of this Spring Web application, responsible for handling all application requests --&gt;</span>
	<span style="color:#8b008b;font-weight:bold">&lt;servlet&gt;</span>
		<span style="color:#8b008b;font-weight:bold">&lt;servlet-name&gt;</span>dispatcherServlet<span style="color:#8b008b;font-weight:bold">&lt;/servlet-name&gt;</span>
		<span style="color:#8b008b;font-weight:bold">&lt;servlet-class&gt;</span>org.springframework.web.servlet.DispatcherServlet<span style="color:#8b008b;font-weight:bold">&lt;/servlet-class&gt;</span>
		<span style="color:#8b008b;font-weight:bold">&lt;init-param&gt;</span>
			<span style="color:#8b008b;font-weight:bold">&lt;param-name&gt;</span>contextConfigLocation<span style="color:#8b008b;font-weight:bold">&lt;/param-name&gt;</span>
			<span style="color:#8b008b;font-weight:bold">&lt;param-value&gt;</span>classpath:springmvc.xml<span style="color:#8b008b;font-weight:bold">&lt;/param-value&gt;</span>
		<span style="color:#8b008b;font-weight:bold">&lt;/init-param&gt;</span>
		<span style="color:#8b008b;font-weight:bold">&lt;load-on-startup&gt;</span>1<span style="color:#8b008b;font-weight:bold">&lt;/load-on-startup&gt;</span>
	<span style="color:#8b008b;font-weight:bold">&lt;/servlet&gt;</span>
	<span style="color:#228b22">&lt;!-- Map all requests to the DispatcherServlet for handling --&gt;</span>
	<span style="color:#8b008b;font-weight:bold">&lt;servlet-mapping&gt;</span>
		<span style="color:#8b008b;font-weight:bold">&lt;servlet-name&gt;</span>dispatcherServlet<span style="color:#8b008b;font-weight:bold">&lt;/servlet-name&gt;</span>
		<span style="color:#8b008b;font-weight:bold">&lt;url-pattern&gt;</span>/<span style="color:#8b008b;font-weight:bold">&lt;/url-pattern&gt;</span>
	<span style="color:#8b008b;font-weight:bold">&lt;/servlet-mapping&gt;</span>
<span style="color:#8b008b;font-weight:bold">&lt;/web-app&gt;</span>
</code></pre></div><p>index.jsp:</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">&lt;%@ page <span style="color:#00688b">language</span>=<span style="color:#cd5555">&#34;java&#34;</span> <span style="color:#00688b">contentType</span>=<span style="color:#cd5555">&#34;text/html; charset=UTF-8&#34;</span>
    <span style="color:#00688b">pageEncoding</span>=<span style="color:#cd5555">&#34;UTF-8&#34;</span>%&gt;
&lt;!DOCTYPE html&gt;
&lt;html&gt;
  &lt;head&gt;
    &lt;meta <span style="color:#00688b">charset</span>=<span style="color:#cd5555">&#34;UTF-8&#34;</span>&gt;
    &lt;title&gt;Insert title here&lt;/title&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;a <span style="color:#00688b">href</span>=<span style="color:#cd5555">&#34;test/hello&#34;</span>&gt;点我点我&lt;/a&gt;
  &lt;/body&gt;
&lt;/html&gt;
</code></pre></div><p>pom.xml:</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml"><span style="color:#8b008b;font-weight:bold">&lt;project</span> <span style="color:#658b00">xmlns=</span><span style="color:#cd5555">&#34;http://maven.apache.org/POM/4.0.0&#34;</span> <span style="color:#658b00">xmlns:xsi=</span><span style="color:#cd5555">&#34;http://www.w3.org/2001/XMLSchema-instance&#34;</span> <span style="color:#658b00">xsi:schemaLocation=</span><span style="color:#cd5555">&#34;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&#34;</span><span style="color:#8b008b;font-weight:bold">&gt;</span>
  <span style="color:#8b008b;font-weight:bold">&lt;modelVersion&gt;</span>4.0.0<span style="color:#8b008b;font-weight:bold">&lt;/modelVersion&gt;</span>
  <span style="color:#8b008b;font-weight:bold">&lt;groupId&gt;</span>com.atmntc<span style="color:#8b008b;font-weight:bold">&lt;/groupId&gt;</span>
  <span style="color:#8b008b;font-weight:bold">&lt;artifactId&gt;</span>springmvc<span style="color:#8b008b;font-weight:bold">&lt;/artifactId&gt;</span>
  <span style="color:#8b008b;font-weight:bold">&lt;version&gt;</span>0.0.1-SNAPSHOT<span style="color:#8b008b;font-weight:bold">&lt;/version&gt;</span>
  <span style="color:#8b008b;font-weight:bold">&lt;packaging&gt;</span>war<span style="color:#8b008b;font-weight:bold">&lt;/packaging&gt;</span>
  
	 <span style="color:#8b008b;font-weight:bold">&lt;properties&gt;</span>
		<span style="color:#8b008b;font-weight:bold">&lt;project.build.sourceEncoding&gt;</span>UTF-8<span style="color:#8b008b;font-weight:bold">&lt;/project.build.sourceEncoding&gt;</span>
		<span style="color:#8b008b;font-weight:bold">&lt;maven.compiler.source&gt;</span>1.8<span style="color:#8b008b;font-weight:bold">&lt;/maven.compiler.source&gt;</span>
		<span style="color:#8b008b;font-weight:bold">&lt;maven.compiler.target&gt;</span>1.8<span style="color:#8b008b;font-weight:bold">&lt;/maven.compiler.target&gt;</span>
		<span style="color:#228b22">&lt;!-- 版本锁定 --&gt;</span>
		 <span style="color:#8b008b;font-weight:bold">&lt;spring.version&gt;</span>5.0.2.RELEASE<span style="color:#8b008b;font-weight:bold">&lt;/spring.version&gt;</span>
	<span style="color:#8b008b;font-weight:bold">&lt;/properties&gt;</span>
	<span style="color:#8b008b;font-weight:bold">&lt;dependencies&gt;</span>
		<span style="color:#228b22">&lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-context --&gt;</span>
		<span style="color:#8b008b;font-weight:bold">&lt;dependency&gt;</span>
		    <span style="color:#8b008b;font-weight:bold">&lt;groupId&gt;</span>org.springframework<span style="color:#8b008b;font-weight:bold">&lt;/groupId&gt;</span>
		    <span style="color:#8b008b;font-weight:bold">&lt;artifactId&gt;</span>spring-context<span style="color:#8b008b;font-weight:bold">&lt;/artifactId&gt;</span>
		    <span style="color:#8b008b;font-weight:bold">&lt;version&gt;</span>5.0.2.RELEASE<span style="color:#8b008b;font-weight:bold">&lt;/version&gt;</span>
		<span style="color:#8b008b;font-weight:bold">&lt;/dependency&gt;</span>
		 
		 	<span style="color:#8b008b;font-weight:bold">&lt;dependency&gt;</span>
		    <span style="color:#8b008b;font-weight:bold">&lt;groupId&gt;</span>org.springframework<span style="color:#8b008b;font-weight:bold">&lt;/groupId&gt;</span>
		    <span style="color:#8b008b;font-weight:bold">&lt;artifactId&gt;</span>spring-web<span style="color:#8b008b;font-weight:bold">&lt;/artifactId&gt;</span>
		    <span style="color:#8b008b;font-weight:bold">&lt;version&gt;</span>5.0.2.RELEASE<span style="color:#8b008b;font-weight:bold">&lt;/version&gt;</span>
		<span style="color:#8b008b;font-weight:bold">&lt;/dependency&gt;</span>
		 
		 <span style="color:#228b22">&lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-webmvc --&gt;</span>
		<span style="color:#8b008b;font-weight:bold">&lt;dependency&gt;</span>
		    <span style="color:#8b008b;font-weight:bold">&lt;groupId&gt;</span>org.springframework<span style="color:#8b008b;font-weight:bold">&lt;/groupId&gt;</span>
		    <span style="color:#8b008b;font-weight:bold">&lt;artifactId&gt;</span>spring-webmvc<span style="color:#8b008b;font-weight:bold">&lt;/artifactId&gt;</span>
		    <span style="color:#8b008b;font-weight:bold">&lt;version&gt;</span>5.0.2.RELEASE<span style="color:#8b008b;font-weight:bold">&lt;/version&gt;</span>
		<span style="color:#8b008b;font-weight:bold">&lt;/dependency&gt;</span>
		 
		 <span style="color:#228b22">&lt;!-- https://mvnrepository.com/artifact/javax.servlet/servlet-api --&gt;</span>
		<span style="color:#8b008b;font-weight:bold">&lt;dependency&gt;</span>
		    <span style="color:#8b008b;font-weight:bold">&lt;groupId&gt;</span>javax.servlet<span style="color:#8b008b;font-weight:bold">&lt;/groupId&gt;</span>
		    <span style="color:#8b008b;font-weight:bold">&lt;artifactId&gt;</span>servlet-api<span style="color:#8b008b;font-weight:bold">&lt;/artifactId&gt;</span>
		    <span style="color:#8b008b;font-weight:bold">&lt;version&gt;</span>2.5<span style="color:#8b008b;font-weight:bold">&lt;/version&gt;</span>
		    <span style="color:#8b008b;font-weight:bold">&lt;scope&gt;</span>provided<span style="color:#8b008b;font-weight:bold">&lt;/scope&gt;</span>
		<span style="color:#8b008b;font-weight:bold">&lt;/dependency&gt;</span>
		 
		 <span style="color:#228b22">&lt;!-- https://mvnrepository.com/artifact/javax.servlet/jsp-api --&gt;</span>
		<span style="color:#8b008b;font-weight:bold">&lt;dependency&gt;</span>
		    <span style="color:#8b008b;font-weight:bold">&lt;groupId&gt;</span>javax.servlet<span style="color:#8b008b;font-weight:bold">&lt;/groupId&gt;</span>
		    <span style="color:#8b008b;font-weight:bold">&lt;artifactId&gt;</span>jsp-api<span style="color:#8b008b;font-weight:bold">&lt;/artifactId&gt;</span>
		    <span style="color:#8b008b;font-weight:bold">&lt;version&gt;</span>2.0<span style="color:#8b008b;font-weight:bold">&lt;/version&gt;</span>
		    <span style="color:#8b008b;font-weight:bold">&lt;scope&gt;</span>provided<span style="color:#8b008b;font-weight:bold">&lt;/scope&gt;</span>
		<span style="color:#8b008b;font-weight:bold">&lt;/dependency&gt;</span>
	 <span style="color:#8b008b;font-weight:bold">&lt;/dependencies&gt;</span>
<span style="color:#8b008b;font-weight:bold">&lt;/project&gt;</span>
</code></pre></div><h2 id="五常用的注解">五、常用的注解</h2>
<h3 id="1requestmapping注解">1.RequestMapping注解</h3>
<blockquote>
<p>a.作用：建立请求URL和处理请求方法之间的对应关系。
b.位置：可以放在<code>方法</code>上面也可以放在<code>类</code>上面.
c.例如:&quot;/user/hello&rdquo;:
/user:表示请求的一级路径
/hello:表示请求的二级路径
d.RequestMapping上常用的属性
path:指定请求的URL，他的作用和value一样。
method:用于指定请求的方式。method={RequestMethos.POST}
params:用于指定限制请求参数的条件。它支持简单的表达式。（params={&ldquo;accountName&rdquo;}:表示请求的参数必须有accountName;params={&ldquo;money!100&rdquo;}:表示请求参数中money不能是100）
headers:用于指定限制请求参数的条件。
注意：以上四个属性只要出现2个或者以上时，他们的关系是与的关系。</p>
</blockquote>
<h3 id="2requestparam注解">2.RequestParam注解</h3>
<blockquote>
<p>a.作用：把请求中指定名称的参数给控制器中的形参赋值
b.RequestParam上常用的属性
value:请求参数中的名称
required:请求参数中必须提供此参数。默认值：true。如果不提供将报错。
c.案例</p>
</blockquote>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">  /**
  * 请求
  * @return
  */
  @RequestMapping(<span style="color:#00688b">path</span>=<span style="color:#cd5555">&#34;/hello&#34;</span>)
  public String sayHello(@RequestParam(<span style="color:#00688b">value</span>=<span style="color:#cd5555">&#34;username&#34;</span>,required=<span style="color:#658b00">false</span>)String name) {
    System.out.println(<span style="color:#cd5555">&#34;aaaa&#34;</span>);
    System.out.println(name);
    <span style="color:#8b008b;font-weight:bold">return</span> <span style="color:#cd5555">&#34;success&#34;</span>;
  }
</code></pre></div><h3 id="3requedtbody注解">3.RequedtBody注解</h3>
<blockquote>
<p>a.作用：用于获取请求体的内容（注意get方法不可以）
b.属性：
required:是否有请求体，默认是是true</p>
</blockquote>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">  /**
  * 接收请求
  * @return
  */
  @RequestMapping(<span style="color:#00688b">path</span>=<span style="color:#cd5555">&#34;/hello&#34;</span>)
  public String sayHello(@RequestBody String body) {
    System.out.println(<span style="color:#cd5555">&#34;aaaa&#34;</span>);
    System.out.println(body);
    <span style="color:#8b008b;font-weight:bold">return</span> <span style="color:#cd5555">&#34;success&#34;</span>;
  }
</code></pre></div><h3 id="4pathvaribale注解">4.PathVaribale注解</h3>
<blockquote>
<p>a.作用：拥有绑定url中的占位符的。例如：url中有/delete/{id}，{id}就是占位符
b.属性
value：指定url中的占位符名称
c. Restful风格的URL</p>
<ol>
<li>请求路径一样，可以根据不同的请求方式去执行后台的不同方法</li>
<li>restful风格的URL优点:结构清晰、符合标准、易于理解、扩展方便</li>
</ol>
</blockquote>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java">&lt;a href=<span style="color:#cd5555">&#34;user/hello/1&#34;</span>&gt;入门案例&lt;/a&gt;
  <span style="color:#228b22">/**
</span><span style="color:#228b22">  * 接收请求
</span><span style="color:#228b22">  * @return
</span><span style="color:#228b22">  */</span>
  <span style="color:#707a7c">@RequestMapping</span>(path=<span style="color:#cd5555">&#34;/hello/{id}&#34;</span>)
    <span style="color:#8b008b;font-weight:bold">public</span> String <span style="color:#008b45">sayHello</span>(<span style="color:#707a7c">@PathVariable</span>(value=<span style="color:#cd5555">&#34;id&#34;</span>) String id) {
    System.<span style="color:#658b00">out</span>.<span style="color:#658b00">println</span>(id);
    <span style="color:#8b008b;font-weight:bold">return</span> <span style="color:#cd5555">&#34;success&#34;</span>;
  }
</code></pre></div><h3 id="5requestheader注解">5.RequestHeader注解</h3>
<blockquote>
<p>a.作用：用于获取请求消息头。
b.属性：
value:提供消息头名称
required:是否必须有此消息
注意：在开发中很少使用</p>
</blockquote>
<h3 id="6cookievalue注解">6.CookieValue注解</h3>
<blockquote>
<p>a.作用：用于指定cookie名称的值传入控制器方法参数
b.属性：
value:指定cookie的名称。
required:是否必须有此值。</p>
</blockquote>
<h3 id="7-modelattribute注解">7. ModelAttribute注解</h3>
<p>a. 作用</p>
<blockquote>
<ol>
<li>出现在方法上：表示当前方法会在控制器方法执行前线执行。</li>
<li>出现在参数上：获取指定的数据给参数赋值。
b. 应用场景</li>
<li>当提交表单数据不是完整的实体数据时，保证没有提交的字段使用数据库原来的数据。
具体的代码</li>
</ol>
</blockquote>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#228b22">// 1.修饰的方法有返回值
</span><span style="color:#228b22"></span><span style="color:#228b22">/**
</span><span style="color:#228b22">* 作用在方法，先执行
</span><span style="color:#228b22">* @param name
</span><span style="color:#228b22">* @return
</span><span style="color:#228b22">*/</span>
<span style="color:#707a7c">@ModelAttribute</span>
<span style="color:#8b008b;font-weight:bold">public</span> User <span style="color:#008b45">showUser</span>(String name) {
  System.<span style="color:#658b00">out</span>.<span style="color:#658b00">println</span>(<span style="color:#cd5555">&#34;showUser执行了...&#34;</span>);
  <span style="color:#228b22">// 模拟从数据库中查询对象
</span><span style="color:#228b22"></span>  User user = <span style="color:#8b008b;font-weight:bold">new</span> User();
  user.<span style="color:#658b00">setName</span>(<span style="color:#cd5555">&#34;哈哈&#34;</span>);
  user.<span style="color:#658b00">setPassword</span>(<span style="color:#cd5555">&#34;123&#34;</span>);
  user.<span style="color:#658b00">setMoney</span>(100d);
  <span style="color:#8b008b;font-weight:bold">return</span> user;
}
<span style="color:#228b22">/**
</span><span style="color:#228b22">* 修改用户的方法
</span><span style="color:#228b22">* @param cookieValue
</span><span style="color:#228b22">* @return
</span><span style="color:#228b22">*/</span>
<span style="color:#707a7c">@RequestMapping</span>(path=<span style="color:#cd5555">&#34;/updateUser&#34;</span>)
<span style="color:#8b008b;font-weight:bold">public</span> String <span style="color:#008b45">updateUser</span>(User user) {
  System.<span style="color:#658b00">out</span>.<span style="color:#658b00">println</span>(user);
  <span style="color:#8b008b;font-weight:bold">return</span> <span style="color:#cd5555">&#34;success&#34;</span>;
}

<span style="color:#228b22">//2. 修饰的方法没有返回值
</span><span style="color:#228b22"></span><span style="color:#228b22">/**
</span><span style="color:#228b22">* 作用在方法，先执行
</span><span style="color:#228b22">* @param name
</span><span style="color:#228b22">* @return
</span><span style="color:#228b22">*/</span>
<span style="color:#707a7c">@ModelAttribute</span>
<span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#00688b;font-weight:bold">void</span> <span style="color:#008b45">showUser</span>(String name,Map&lt;String, User&gt; map) {
  System.<span style="color:#658b00">out</span>.<span style="color:#658b00">println</span>(<span style="color:#cd5555">&#34;showUser执行了...&#34;</span>);
  <span style="color:#228b22">// 模拟从数据库中查询对象
</span><span style="color:#228b22"></span>  User user = <span style="color:#8b008b;font-weight:bold">new</span> User();
  user.<span style="color:#658b00">setName</span>(<span style="color:#cd5555">&#34;哈哈&#34;</span>);
  user.<span style="color:#658b00">setPassword</span>(<span style="color:#cd5555">&#34;123&#34;</span>);
  user.<span style="color:#658b00">setMoney</span>(100d);
  map.<span style="color:#658b00">put</span>(<span style="color:#cd5555">&#34;abc&#34;</span>, user);
}
<span style="color:#228b22">/**
</span><span style="color:#228b22">* 修改用户的方法
</span><span style="color:#228b22">* @param cookieValue
</span><span style="color:#228b22">* @return
</span><span style="color:#228b22">*/</span>
<span style="color:#707a7c">@RequestMapping</span>(path=<span style="color:#cd5555">&#34;/updateUser&#34;</span>)
<span style="color:#8b008b;font-weight:bold">public</span> String <span style="color:#008b45">updateUser</span>(<span style="color:#707a7c">@ModelAttribute</span>(value=<span style="color:#cd5555">&#34;abc&#34;</span>) User user) {
  System.<span style="color:#658b00">out</span>.<span style="color:#658b00">println</span>(user);
  <span style="color:#8b008b;font-weight:bold">return</span> <span style="color:#cd5555">&#34;success&#34;</span>;
}
</code></pre></div><h3 id="8sessionattributes注解">8.SessionAttributes注解</h3>
<blockquote>
<p>a.作用：用于多次执行控制器方法间的参数共享
b.属性
value:指定存入属性的名称。
案例如下：</p>
</blockquote>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#707a7c">@Controller</span>
<span style="color:#707a7c">@RequestMapping</span>(path=<span style="color:#cd5555">&#34;/user&#34;</span>)
<span style="color:#707a7c">@SessionAttributes</span>(value= {<span style="color:#cd5555">&#34;username&#34;</span>,<span style="color:#cd5555">&#34;password&#34;</span>,<span style="color:#cd5555">&#34;age&#34;</span>},types=
{String.<span style="color:#658b00">class</span>,Integer.<span style="color:#658b00">class</span>}) <span style="color:#228b22">// 把数据存入到session域对象中
</span><span style="color:#228b22"></span><span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#8b008b;font-weight:bold">class</span> <span style="color:#008b45;font-weight:bold">HelloController</span> {
<span style="color:#228b22">/**
</span><span style="color:#228b22">* 向session中存入值
</span><span style="color:#228b22">* @return
</span><span style="color:#228b22">*/</span>
  <span style="color:#707a7c">@RequestMapping</span>(path=<span style="color:#cd5555">&#34;/save&#34;</span>)
  <span style="color:#8b008b;font-weight:bold">public</span> String <span style="color:#008b45">save</span>(Model model) {
    System.<span style="color:#658b00">out</span>.<span style="color:#658b00">println</span>(<span style="color:#cd5555">&#34;向session域中保存数据&#34;</span>);
    model.<span style="color:#658b00">addAttribute</span>(<span style="color:#cd5555">&#34;username&#34;</span>, <span style="color:#cd5555">&#34;root&#34;</span>);
    model.<span style="color:#658b00">addAttribute</span>(<span style="color:#cd5555">&#34;password&#34;</span>, <span style="color:#cd5555">&#34;123&#34;</span>);
    model.<span style="color:#658b00">addAttribute</span>(<span style="color:#cd5555">&#34;age&#34;</span>, 20);
    <span style="color:#8b008b;font-weight:bold">return</span> <span style="color:#cd5555">&#34;success&#34;</span>;
  }
  <span style="color:#228b22">/**
</span><span style="color:#228b22">  * 从session中获取值
</span><span style="color:#228b22">  * @return
</span><span style="color:#228b22">  */</span>
  <span style="color:#707a7c">@RequestMapping</span>(path=<span style="color:#cd5555">&#34;/find&#34;</span>)
  <span style="color:#8b008b;font-weight:bold">public</span> String <span style="color:#008b45">find</span>(ModelMap modelMap) {
  String username = (String) modelMap.<span style="color:#658b00">get</span>(<span style="color:#cd5555">&#34;username&#34;</span>);
  String password = (String) modelMap.<span style="color:#658b00">get</span>(<span style="color:#cd5555">&#34;password&#34;</span>);
  Integer age = (Integer) modelMap.<span style="color:#658b00">get</span>(<span style="color:#cd5555">&#34;age&#34;</span>);
  System.<span style="color:#658b00">out</span>.<span style="color:#658b00">println</span>(username + <span style="color:#cd5555">&#34; : &#34;</span>+password +<span style="color:#cd5555">&#34; : &#34;</span>+age);
  <span style="color:#8b008b;font-weight:bold">return</span> <span style="color:#cd5555">&#34;success&#34;</span>;
  }
  <span style="color:#228b22">/**
</span><span style="color:#228b22">  * 清除值
</span><span style="color:#228b22">  * @return
</span><span style="color:#228b22">  */</span>
  <span style="color:#707a7c">@RequestMapping</span>(path=<span style="color:#cd5555">&#34;/delete&#34;</span>)
  <span style="color:#8b008b;font-weight:bold">public</span> String <span style="color:#008b45">delete</span>(SessionStatus status) {
    status.<span style="color:#658b00">setComplete</span>();
    <span style="color:#8b008b;font-weight:bold">return</span> <span style="color:#cd5555">&#34;success&#34;</span>;
  }
}
</code></pre></div><h2 id="六请求参数的绑定">六、请求参数的绑定</h2>
<h3 id="1-请求参数的绑定说明">1. 请求参数的绑定说明</h3>
<ol>
<li>绑定机制</li>
</ol>
<blockquote>
<p>表单提交的数据都是k=v格式的 username=haha&amp;password=123
SpringMVC的参数绑定过程是把表单提交的请求参数，作为控制器中方法的参数进行绑定的
要求：提交表单的name和参数的名称是相同的</p>
</blockquote>
<ol start="2">
<li>支持的数据类型</li>
</ol>
<blockquote>
<p>基本数据类型和字符串类型
实体类型（JavaBean）
集合数据类型（List、map集合等）</p>
</blockquote>
<h3 id="2-基本数据类型和字符串类型">2. 基本数据类型和字符串类型</h3>
<ol>
<li>提交表单的name和参数的名称是相同的</li>
<li>区分大小写</li>
</ol>
<h3 id="3-实体类型javabean">3. 实体类型（JavaBean）</h3>
<ol>
<li>提交表单的name和JavaBean中的属性名称需要一致</li>
<li>如果一个JavaBean类中包含其他的引用类型，那么表单的name属性需要编写成：对象.属性 例如：
address.name</li>
</ol>
<h3 id="4-给集合属性数据封装">4. 给集合属性数据封装</h3>
<ol>
<li>JSP页面编写方式：list[0].属性</li>
</ol>
<h3 id="5-请求参数中文乱码的解决">5. 请求参数中文乱码的解决</h3>
<ol>
<li>在web.xml中配置Spring提供的过滤器类</li>
</ol>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml"><span style="color:#228b22">&lt;!-- 配置过滤器，解决中文乱码的问题 --&gt;</span>
<span style="color:#8b008b;font-weight:bold">&lt;filter&gt;</span>
  <span style="color:#8b008b;font-weight:bold">&lt;filter-name&gt;</span>characterEncodingFilter<span style="color:#8b008b;font-weight:bold">&lt;/filter-name&gt;</span>
  <span style="color:#8b008b;font-weight:bold">&lt;filter-class&gt;</span>org.springframework.web.filter.CharacterEncodingFilter<span style="color:#8b008b;font-weight:bold">&lt;/filterclass&gt;</span>
  <span style="color:#228b22">&lt;!-- 指定字符集 --&gt;</span>
  <span style="color:#8b008b;font-weight:bold">&lt;init-param&gt;</span>
  <span style="color:#8b008b;font-weight:bold">&lt;param-name&gt;</span>encoding<span style="color:#8b008b;font-weight:bold">&lt;/param-name&gt;</span>
  <span style="color:#8b008b;font-weight:bold">&lt;param-value&gt;</span>UTF-8<span style="color:#8b008b;font-weight:bold">&lt;/param-value&gt;</span>
  <span style="color:#8b008b;font-weight:bold">&lt;/init-param&gt;</span>
<span style="color:#8b008b;font-weight:bold">&lt;/filter&gt;</span>
<span style="color:#8b008b;font-weight:bold">&lt;filter-mapping&gt;</span>
  <span style="color:#8b008b;font-weight:bold">&lt;filter-name&gt;</span>characterEncodingFilter<span style="color:#8b008b;font-weight:bold">&lt;/filter-name&gt;</span>
  <span style="color:#8b008b;font-weight:bold">&lt;url-pattern&gt;</span>/*<span style="color:#8b008b;font-weight:bold">&lt;/url-pattern&gt;</span>
<span style="color:#8b008b;font-weight:bold">&lt;/filter-mapping&gt;</span>
</code></pre></div><h3 id="6自定义类型转换器">6、自定义类型转换器</h3>
<ol>
<li>表单提交的任何数据类型全部都是<code>字符串类型</code>，但是后台定义Integer类型，数据也可以封装上，说明Spring框架内部会默认进行数据类型转换。</li>
<li>如果想自定义数据类型转换，可以实现Converter的接口
步骤一:自定义类型转换器</li>
</ol>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#8b008b;font-weight:bold">package</span> <span style="color:#008b45;text-decoration:underline">cn.itcast.utils</span>;
<span style="color:#8b008b;font-weight:bold">import</span> <span style="color:#008b45;text-decoration:underline">java.text.DateFormat</span>;
<span style="color:#8b008b;font-weight:bold">import</span> <span style="color:#008b45;text-decoration:underline">java.text.SimpleDateFormat</span>;
<span style="color:#8b008b;font-weight:bold">import</span> <span style="color:#008b45;text-decoration:underline">java.util.Date</span>;
<span style="color:#8b008b;font-weight:bold">import</span> <span style="color:#008b45;text-decoration:underline">org.springframework.core.convert.converter.Converter</span>;
<span style="color:#228b22">/**
</span><span style="color:#228b22">* 把字符串转换成日期的转换器
</span><span style="color:#228b22">* @author rt
</span><span style="color:#228b22">*/</span>
<span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#8b008b;font-weight:bold">class</span> <span style="color:#008b45;font-weight:bold">StringToDateConverter</span> <span style="color:#8b008b;font-weight:bold">implements</span> Converter&lt;String, Date&gt;{
  <span style="color:#228b22">/**
</span><span style="color:#228b22">  * 进行类型转换的方法
</span><span style="color:#228b22">  * source
</span><span style="color:#228b22">  */</span>
  <span style="color:#8b008b;font-weight:bold">public</span> Date <span style="color:#008b45">convert</span>(String source) {
  <span style="color:#228b22">// 判断
</span><span style="color:#228b22"></span>    <span style="color:#8b008b;font-weight:bold">if</span>(source == <span style="color:#8b008b;font-weight:bold">null</span>) {
    <span style="color:#8b008b;font-weight:bold">throw</span> <span style="color:#8b008b;font-weight:bold">new</span> RuntimeException(<span style="color:#cd5555">&#34;参数不能为空&#34;</span>)
    }
    <span style="color:#8b008b;font-weight:bold">try</span> {
      DateFormat df = <span style="color:#8b008b;font-weight:bold">new</span> SimpleDateFormat(<span style="color:#cd5555">&#34;yyyy-MM-dd&#34;</span>);
      <span style="color:#228b22">// 解析字符串
</span><span style="color:#228b22"></span>      Date date = df.<span style="color:#658b00">parse</span>(source);
      <span style="color:#8b008b;font-weight:bold">return</span> date;
    } <span style="color:#8b008b;font-weight:bold">catch</span> (Exception e) {
      <span style="color:#8b008b;font-weight:bold">throw</span> <span style="color:#8b008b;font-weight:bold">new</span> RuntimeException(<span style="color:#cd5555">&#34;类型转换错误&#34;</span>);
    }
  }
}
</code></pre></div><p>步骤二：. 注册自定义类型转换器，在springmvc.xml配置文件中编写配置</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml"><span style="color:#228b22">&lt;!-- 注册自定义类型转换器 --&gt;</span>
<span style="color:#8b008b;font-weight:bold">&lt;bean</span> <span style="color:#658b00">id=</span><span style="color:#cd5555">&#34;conversionService&#34;</span> <span style="color:#658b00">class=</span><span style="color:#cd5555">&#34;org.springframework.context.support.ConversionServiceFactoryBean&#34;</span><span style="color:#8b008b;font-weight:bold">&gt;</span>
  <span style="color:#8b008b;font-weight:bold">&lt;property</span> <span style="color:#658b00">name=</span><span style="color:#cd5555">&#34;converters&#34;</span><span style="color:#8b008b;font-weight:bold">&gt;</span>
    <span style="color:#8b008b;font-weight:bold">&lt;set&gt;</span>
      <span style="color:#8b008b;font-weight:bold">&lt;bean</span> <span style="color:#658b00">class=</span><span style="color:#cd5555">&#34;cn.itcast.utils.StringToDateConverter&#34;</span><span style="color:#8b008b;font-weight:bold">/&gt;</span>
    <span style="color:#8b008b;font-weight:bold">&lt;/set&gt;</span>
  <span style="color:#8b008b;font-weight:bold">&lt;/property&gt;</span>
<span style="color:#8b008b;font-weight:bold">&lt;/bean&gt;</span>
<span style="color:#228b22">&lt;!-- 开启Spring对MVC注解的支持 --&gt;</span>
<span style="color:#8b008b;font-weight:bold">&lt;mvc:annotation-driven</span> <span style="color:#658b00">conversion-service=</span><span style="color:#cd5555">&#34;conversionService&#34;</span><span style="color:#8b008b;font-weight:bold">/&gt;</span>
</code></pre></div><p>小知识点:在控制器中使用原生的ServletAPI对象,只需要在控制器的方法参数定义HttpServletRequest和HttpServletResponse对象</p>
<h2 id="七响应数据和结果视图">七、响应数据和结果视图</h2>
<h3 id="1返回值分类">1.返回值分类</h3>
<p><code>字符串</code>
HelloController.java:</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#8b008b;font-weight:bold">package</span> <span style="color:#008b45;text-decoration:underline">com.atmntc.controller</span>;<span style="color:#228b22">/*
</span><span style="color:#228b22"> @author wujiwen
</span><span style="color:#228b22"> @data 2019/7/11 - 16:54   
</span><span style="color:#228b22">*/</span>
<span style="color:#8b008b;font-weight:bold">import</span> <span style="color:#008b45;text-decoration:underline">com.atmntc.domain.Account</span>;
<span style="color:#8b008b;font-weight:bold">import</span> <span style="color:#008b45;text-decoration:underline">org.springframework.stereotype.Controller</span>;
<span style="color:#8b008b;font-weight:bold">import</span> <span style="color:#008b45;text-decoration:underline">org.springframework.ui.Model</span>;
<span style="color:#8b008b;font-weight:bold">import</span> <span style="color:#008b45;text-decoration:underline">org.springframework.web.bind.annotation.RequestMapping</span>;
<span style="color:#707a7c">@Controller</span>
<span style="color:#707a7c">@RequestMapping</span>(<span style="color:#cd5555">&#34;/user&#34;</span>)
<span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#8b008b;font-weight:bold">class</span> <span style="color:#008b45;font-weight:bold">HelloController</span> {
    <span style="color:#707a7c">@RequestMapping</span>(<span style="color:#cd5555">&#34;/testString&#34;</span>)
    <span style="color:#8b008b;font-weight:bold">public</span> String <span style="color:#008b45">hello</span>(Model model){
        System.<span style="color:#658b00">out</span>.<span style="color:#658b00">println</span>(<span style="color:#cd5555">&#34;返回string测试&#34;</span>);
        Account account = <span style="color:#8b008b;font-weight:bold">new</span> Account();
        account.<span style="color:#658b00">setUsername</span>(<span style="color:#cd5555">&#34;吴继文&#34;</span>);
        account.<span style="color:#658b00">setPassword</span>(<span style="color:#cd5555">&#34;13733433427&#34;</span>);
        account.<span style="color:#658b00">setMoney</span>(1000d);
        model.<span style="color:#658b00">addAttribute</span>(<span style="color:#cd5555">&#34;account&#34;</span>,account);
        <span style="color:#8b008b;font-weight:bold">return</span> <span style="color:#cd5555">&#34;success&#34;</span>;
    }
}
</code></pre></div><p>Account.java:</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#8b008b;font-weight:bold">package</span> <span style="color:#008b45;text-decoration:underline">com.atmntc.domain</span>;<span style="color:#228b22">/*
</span><span style="color:#228b22"> @author wujiwen
</span><span style="color:#228b22"> @data 2019/7/11 - 18:13   
</span><span style="color:#228b22">*/</span>

<span style="color:#8b008b;font-weight:bold">import</span> <span style="color:#008b45;text-decoration:underline">java.io.Serializable</span>;

<span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#8b008b;font-weight:bold">class</span> <span style="color:#008b45;font-weight:bold">Account</span> <span style="color:#8b008b;font-weight:bold">implements</span> Serializable {
    <span style="color:#8b008b;font-weight:bold">private</span> String username;
    <span style="color:#8b008b;font-weight:bold">private</span> String password;
    <span style="color:#8b008b;font-weight:bold">private</span> Double money;

    <span style="color:#707a7c">@Override</span>
    <span style="color:#8b008b;font-weight:bold">public</span> String <span style="color:#008b45">toString</span>() {
        <span style="color:#8b008b;font-weight:bold">return</span> <span style="color:#cd5555">&#34;Account{&#34;</span> +
                <span style="color:#cd5555">&#34;username=&#39;&#34;</span> + username + <span style="color:#cd5555">&#39;\&#39;&#39;</span> +
                <span style="color:#cd5555">&#34;, password=&#39;&#34;</span> + password + <span style="color:#cd5555">&#39;\&#39;&#39;</span> +
                <span style="color:#cd5555">&#34;, money=&#34;</span> + money +
                <span style="color:#cd5555">&#39;}&#39;</span>;
    }

    <span style="color:#8b008b;font-weight:bold">public</span> String <span style="color:#008b45">getUsername</span>() {
        <span style="color:#8b008b;font-weight:bold">return</span> username;
    }

    <span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#00688b;font-weight:bold">void</span> <span style="color:#008b45">setUsername</span>(String username) {
        <span style="color:#8b008b;font-weight:bold">this</span>.<span style="color:#658b00">username</span> = username;
    }

    <span style="color:#8b008b;font-weight:bold">public</span> String <span style="color:#008b45">getPassword</span>() {
        <span style="color:#8b008b;font-weight:bold">return</span> password;
    }

    <span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#00688b;font-weight:bold">void</span> <span style="color:#008b45">setPassword</span>(String password) {
        <span style="color:#8b008b;font-weight:bold">this</span>.<span style="color:#658b00">password</span> = password;
    }

    <span style="color:#8b008b;font-weight:bold">public</span> Double <span style="color:#008b45">getMoney</span>() {
        <span style="color:#8b008b;font-weight:bold">return</span> money;
    }

    <span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#00688b;font-weight:bold">void</span> <span style="color:#008b45">setMoney</span>(Double money) {
        <span style="color:#8b008b;font-weight:bold">this</span>.<span style="color:#658b00">money</span> = money;
    }
}
</code></pre></div><p>success.jsp:</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java">&lt;%--
  Created by IntelliJ IDEA.
  User: admin
  Date: 2019/7/11
  Time: 16:58
  To change <span style="color:#8b008b;font-weight:bold">this</span> template use File | Settings | File Templates.
--%&gt;
&lt;%<span style="color:#a61717;background-color:#e3d2d2">@</span> page contentType=<span style="color:#cd5555">&#34;text/html;charset=UTF-8&#34;</span> language=<span style="color:#cd5555">&#34;java&#34;</span> isELIgnored=<span style="color:#cd5555">&#34;false&#34;</span> %&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;Title&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
    success&lt;br /&gt;
    ${account.<span style="color:#658b00">username</span>} &lt;br /&gt;
    ${account.<span style="color:#658b00">password</span>} &lt;br /&gt;
    ${account.<span style="color:#658b00">money</span>} &lt;br /&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre></div><p><code>空类型</code>
案例：</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java">    <span style="color:#707a7c">@RequestMapping</span>(<span style="color:#cd5555">&#34;/testVoid&#34;</span>)
    <span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#00688b;font-weight:bold">void</span> <span style="color:#008b45">testVoid</span>(HttpServletRequest request, HttpServletResponse response)<span style="color:#8b008b;font-weight:bold">throws</span> ServletException, IOException {
        <span style="color:#228b22">//编写转发的程序(可以跳转到success.jsp页面)
</span><span style="color:#228b22"></span>        <span style="color:#228b22">//request.getRequestDispatcher(&#34;/WEB-INF/pages/success.jsp&#34;).forward(request,response);
</span><span style="color:#228b22"></span>
        <span style="color:#228b22">//重定向
</span><span style="color:#228b22"></span>        <span style="color:#228b22">//response.sendRedirect(request.getContextPath()+&#34;/index.jsp&#34;);
</span><span style="color:#228b22"></span>
        <span style="color:#228b22">//直接响应
</span><span style="color:#228b22"></span>        response.<span style="color:#658b00">setCharacterEncoding</span>(<span style="color:#cd5555">&#34;UTF-8&#34;</span>);
        response.<span style="color:#658b00">setContentType</span>(<span style="color:#cd5555">&#34;text/html;charset=UTF-8&#34;</span>);
        response.<span style="color:#658b00">getWriter</span>().<span style="color:#658b00">print</span>(<span style="color:#cd5555">&#34;你好&#34;</span>);
    }
</code></pre></div><h3 id="2转发或者重定向">2.转发或者重定向</h3>
<p>案例：</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java">    <span style="color:#707a7c">@RequestMapping</span>(<span style="color:#cd5555">&#34;/testForwardOrRederect&#34;</span>)
    <span style="color:#8b008b;font-weight:bold">public</span> String <span style="color:#008b45">testVoid</span>(){

        <span style="color:#228b22">//return &#34;forward:/WEB-INF/pages/success.jsp&#34;;
</span><span style="color:#228b22"></span>        <span style="color:#8b008b;font-weight:bold">return</span> <span style="color:#cd5555">&#34;redirect:index.jsp&#34;</span>;
    }
</code></pre></div><h3 id="3responsebody响应json数据">3.ResponseBody响应json数据</h3>
<p>首先需要搭建异步的环境&mdash;&mdash;点击事件</p>
<blockquote>
<p>在webapp下的js文件夹中引入jQuery
编写js代码</p>
</blockquote>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java">&lt;script src=<span style="color:#cd5555">&#34;js/jquery.min.js&#34;</span>&gt;&lt;/script&gt;
    &lt;script&gt;

        <span style="color:#008b45">$</span>(function(){
            $(<span style="color:#cd5555">&#34;#btn&#34;</span>).<span style="color:#658b00">click</span>(function(){
                alert(<span style="color:#cd5555">&#34;hello world&#34;</span>)
            });
        });


    &lt;/script&gt;
</code></pre></div><blockquote>
<p>在springmvc.xml中设置对静态文件不拦截</p>
</blockquote>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml">    <span style="color:#228b22">&lt;!-- 提示前端控制器哪些静态的资源不拦截--&gt;</span>
    <span style="color:#8b008b;font-weight:bold">&lt;mvc:resources</span> <span style="color:#658b00">location=</span><span style="color:#cd5555">&#34;/js/&#34;</span> <span style="color:#658b00">mapping=</span><span style="color:#cd5555">&#34;/js/**&#34;</span> <span style="color:#8b008b;font-weight:bold">/&gt;</span>
    <span style="color:#8b008b;font-weight:bold">&lt;mvc:resources</span> <span style="color:#658b00">location=</span><span style="color:#cd5555">&#34;/images/&#34;</span> <span style="color:#658b00">mapping=</span><span style="color:#cd5555">&#34;/images/**&#34;</span> <span style="color:#8b008b;font-weight:bold">/&gt;</span>
    <span style="color:#8b008b;font-weight:bold">&lt;mvc:resources</span> <span style="color:#658b00">location=</span><span style="color:#cd5555">&#34;/css/&#34;</span> <span style="color:#658b00">mapping=</span><span style="color:#cd5555">&#34;/css/**&#34;</span> <span style="color:#8b008b;font-weight:bold">/&gt;</span>
</code></pre></div>
</article></div>
    <div class="pad"></div>

    

    <div class="pad">

<div class="date">
    <time pubdate="0001-01-01">January 1, 0001</time>
    <span class="author">学习笔记</span>
</div>

<article>
    <h1><a href="https://example.com/posts/spring%E7%9A%84%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/">Spring的基础知识</a></h1>
    <div class="tags">
        
        
        <a href="/tags/%E6%A1%86%E6%9E%B6" class="pure-button">框架</a>
        
    </div>
    <h2 id="一spring框架的简介">一、Spring框架的简介</h2>
<p>Spring是一个开放源代码的设计层面框架，他解决的是业务逻辑层和其他各层的松耦合问题，因此它将面向接口的编程思想贯穿整个系统应用。Spring是于2003 年兴起的一个轻量级的Java 开发框架，由Rod Johnson创建。简单来说，Spring是一个分层的JavaSE/EE full-stack(一站式) 轻量级开源框架。</p>
<h2 id="二spring框架入门之hello-world">二、spring框架入门之hello world</h2>
<p>目录结构：
<img src="/assets/blogImg/spring1.jpg" alt="spring">
Car.java:</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#8b008b;font-weight:bold">package</span> <span style="color:#008b45;text-decoration:underline">com.test.maven.spring</span>;

<span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#8b008b;font-weight:bold">class</span> <span style="color:#008b45;font-weight:bold">Car</span> {
	<span style="color:#8b008b;font-weight:bold">private</span> String name;
	<span style="color:#8b008b;font-weight:bold">private</span> <span style="color:#00688b;font-weight:bold">int</span> price;
	<span style="color:#8b008b;font-weight:bold">public</span> String <span style="color:#008b45">getName</span>() {
		<span style="color:#8b008b;font-weight:bold">return</span> name;
	}
	<span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#00688b;font-weight:bold">void</span> <span style="color:#008b45">setName</span>(String name) {
		<span style="color:#8b008b;font-weight:bold">this</span>.<span style="color:#658b00">name</span> = name;
	}
	<span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#00688b;font-weight:bold">int</span> <span style="color:#008b45">getPrice</span>() {
		<span style="color:#8b008b;font-weight:bold">return</span> price;
	}
	<span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#00688b;font-weight:bold">void</span> <span style="color:#008b45">setPrice</span>(<span style="color:#00688b;font-weight:bold">int</span> price) {
		<span style="color:#8b008b;font-weight:bold">this</span>.<span style="color:#658b00">price</span> = price;
	}
	<span style="color:#707a7c">@Override</span>
	<span style="color:#8b008b;font-weight:bold">public</span> String <span style="color:#008b45">toString</span>() {
		<span style="color:#8b008b;font-weight:bold">return</span> <span style="color:#cd5555">&#34;Car [name=&#34;</span> + name + <span style="color:#cd5555">&#34;, price=&#34;</span> + price + <span style="color:#cd5555">&#34;]&#34;</span>;
	}
	
}
</code></pre></div><p>Main.java:</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#8b008b;font-weight:bold">package</span> <span style="color:#008b45;text-decoration:underline">com.test.maven.spring</span>;
<span style="color:#8b008b;font-weight:bold">import</span> <span style="color:#008b45;text-decoration:underline">org.springframework.context.ApplicationContext</span>;
<span style="color:#8b008b;font-weight:bold">import</span> <span style="color:#008b45;text-decoration:underline">org.springframework.context.support.ClassPathXmlApplicationContext</span>;
<span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#8b008b;font-weight:bold">class</span> <span style="color:#008b45;font-weight:bold">Main</span> {
	<span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#8b008b;font-weight:bold">static</span> <span style="color:#00688b;font-weight:bold">void</span> <span style="color:#008b45">main</span>(String[] args) {
		<span style="color:#228b22">// TODO Auto-generated method stub
</span><span style="color:#228b22"></span>		ApplicationContext applicationContext = <span style="color:#8b008b;font-weight:bold">new</span> ClassPathXmlApplicationContext(<span style="color:#cd5555">&#34;SpringBean.xml&#34;</span>);
		Car a = (Car)applicationContext.<span style="color:#658b00">getBean</span>(<span style="color:#cd5555">&#34;car&#34;</span>);
		<span style="color:#228b22">//Car s = applicationContext.getBean(Car.class);
</span><span style="color:#228b22"></span>		System.<span style="color:#658b00">out</span>.<span style="color:#658b00">println</span>(a.<span style="color:#658b00">toString</span>());
		<span style="color:#228b22">//System.out.println(s.toString());
</span><span style="color:#228b22"></span>	}
}
</code></pre></div><p>SpringBean.xml:</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml"><span style="color:#1e889b">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;</span>
<span style="color:#8b008b;font-weight:bold">&lt;beans</span> <span style="color:#658b00">xmlns=</span><span style="color:#cd5555">&#34;http://www.springframework.org/schema/beans&#34;</span>
	<span style="color:#658b00">xmlns:xsi=</span><span style="color:#cd5555">&#34;http://www.w3.org/2001/XMLSchema-instance&#34;</span>
	<span style="color:#658b00">xsi:schemaLocation=</span><span style="color:#cd5555">&#34;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&#34;</span><span style="color:#8b008b;font-weight:bold">&gt;</span>
	<span style="color:#8b008b;font-weight:bold">&lt;bean</span> <span style="color:#658b00">id=</span><span style="color:#cd5555">&#34;car&#34;</span> <span style="color:#658b00">class=</span><span style="color:#cd5555">&#34;com.test.maven.spring.Car&#34;</span><span style="color:#8b008b;font-weight:bold">&gt;</span>
		<span style="color:#8b008b;font-weight:bold">&lt;property</span> <span style="color:#658b00">name=</span><span style="color:#cd5555">&#34;name&#34;</span> <span style="color:#658b00">value=</span><span style="color:#cd5555">&#34;Audi&#34;</span><span style="color:#8b008b;font-weight:bold">&gt;&lt;/property&gt;</span>
		<span style="color:#8b008b;font-weight:bold">&lt;property</span> <span style="color:#658b00">name=</span><span style="color:#cd5555">&#34;price&#34;</span> <span style="color:#658b00">value=</span><span style="color:#cd5555">&#34;1200&#34;</span><span style="color:#8b008b;font-weight:bold">&gt;&lt;/property&gt;</span>
	<span style="color:#8b008b;font-weight:bold">&lt;/bean&gt;</span>
<span style="color:#8b008b;font-weight:bold">&lt;/beans&gt;</span>
</code></pre></div><p>pom.xml:</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml"><span style="color:#1e889b">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;</span>
<span style="color:#8b008b;font-weight:bold">&lt;beans</span> <span style="color:#658b00">xmlns=</span><span style="color:#cd5555">&#34;http://www.springframework.org/schema/beans&#34;</span>
	<span style="color:#658b00">xmlns:xsi=</span><span style="color:#cd5555">&#34;http://www.w3.org/2001/XMLSchema-instance&#34;</span>
	<span style="color:#658b00">xsi:schemaLocation=</span><span style="color:#cd5555">&#34;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&#34;</span><span style="color:#8b008b;font-weight:bold">&gt;</span>
	<span style="color:#8b008b;font-weight:bold">&lt;bean</span> <span style="color:#658b00">id=</span><span style="color:#cd5555">&#34;car&#34;</span> <span style="color:#658b00">class=</span><span style="color:#cd5555">&#34;com.test.maven.spring.Car&#34;</span><span style="color:#8b008b;font-weight:bold">&gt;</span>
		<span style="color:#8b008b;font-weight:bold">&lt;property</span> <span style="color:#658b00">name=</span><span style="color:#cd5555">&#34;name&#34;</span> <span style="color:#658b00">value=</span><span style="color:#cd5555">&#34;Audi&#34;</span><span style="color:#8b008b;font-weight:bold">&gt;&lt;/property&gt;</span>
		<span style="color:#8b008b;font-weight:bold">&lt;property</span> <span style="color:#658b00">name=</span><span style="color:#cd5555">&#34;price&#34;</span> <span style="color:#658b00">value=</span><span style="color:#cd5555">&#34;1200&#34;</span><span style="color:#8b008b;font-weight:bold">&gt;&lt;/property&gt;</span>
	<span style="color:#8b008b;font-weight:bold">&lt;/bean&gt;</span>
<span style="color:#8b008b;font-weight:bold">&lt;/beans&gt;</span>
</code></pre></div>
</article></div>
    <div class="pad"></div>

    

    <div class="pad">

<div class="date">
    <time pubdate="0001-01-01">January 1, 0001</time>
    <span class="author">学习笔记</span>
</div>

<article>
    <h1><a href="https://example.com/posts/ssm%E6%A1%86%E6%9E%B6%E7%9A%84%E6%95%B4%E5%90%88/">SSM框架的整合</a></h1>
    <div class="tags">
        
        
        <a href="/tags/%E6%A1%86%E6%9E%B6" class="pure-button">框架</a>
        
    </div>
    <h1 id="一什么是ssm框架">一、什么是ssm框架</h1>
<p>SSM（Spring+SpringMVC+MyBatis）框架集由Spring、MyBatis两个开源框架整合而成（SpringMVC是Spring中的部分内容）。常作为数据源较简单的web项目的框架。</p>
<h1 id="二ssm框架整合之hello-world">二、ssm框架整合之hello world</h1>
<p>搭建的环境:eclipse+jdk1.8+maven
基本的步骤:</p>
<blockquote>
<p>1.创建maven工程
2.引入项目所需要的依赖
3.引入bootstrap前端框架
4.编写ssm整合的关键配置文件
5.使用逆向工程
程序的目录结构:
<img src="/assets/blogImg/ssm.png" alt="ssm">
注意：使用逆向工程并不是所有的文件都是需要手动编写的
pom.xml:</p>
</blockquote>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml">  <span style="color:#8b008b;font-weight:bold">&lt;project</span> <span style="color:#658b00">xmlns=</span><span style="color:#cd5555">&#34;http://maven.apache.org/POM/4.0.0&#34;</span> <span style="color:#658b00">xmlns:xsi=</span><span style="color:#cd5555">&#34;http://www.w3.org/2001/XMLSchema-instance&#34;</span> <span style="color:#658b00">xsi:schemaLocation=</span><span style="color:#cd5555">&#34;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&#34;</span><span style="color:#8b008b;font-weight:bold">&gt;</span>
  <span style="color:#8b008b;font-weight:bold">&lt;modelVersion&gt;</span>4.0.0<span style="color:#8b008b;font-weight:bold">&lt;/modelVersion&gt;</span>
  <span style="color:#8b008b;font-weight:bold">&lt;groupId&gt;</span>com.mntc.maven<span style="color:#8b008b;font-weight:bold">&lt;/groupId&gt;</span>
  <span style="color:#8b008b;font-weight:bold">&lt;artifactId&gt;</span>ssm-test<span style="color:#8b008b;font-weight:bold">&lt;/artifactId&gt;</span>
  <span style="color:#8b008b;font-weight:bold">&lt;version&gt;</span>0.0.1-SNAPSHOT<span style="color:#8b008b;font-weight:bold">&lt;/version&gt;</span>
  <span style="color:#8b008b;font-weight:bold">&lt;packaging&gt;</span>war<span style="color:#8b008b;font-weight:bold">&lt;/packaging&gt;</span>
  <span style="color:#8b008b;font-weight:bold">&lt;dependencies&gt;</span>
  <span style="color:#228b22">&lt;!-- 1.引入Springmvc、spring相关的依赖包 --&gt;</span>
  	<span style="color:#228b22">&lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-webmvc --&gt;</span>
	<span style="color:#8b008b;font-weight:bold">&lt;dependency&gt;</span>
	    <span style="color:#8b008b;font-weight:bold">&lt;groupId&gt;</span>org.springframework<span style="color:#8b008b;font-weight:bold">&lt;/groupId&gt;</span>
	    <span style="color:#8b008b;font-weight:bold">&lt;artifactId&gt;</span>spring-webmvc<span style="color:#8b008b;font-weight:bold">&lt;/artifactId&gt;</span>
	    <span style="color:#8b008b;font-weight:bold">&lt;version&gt;</span>4.3.7.RELEASE<span style="color:#8b008b;font-weight:bold">&lt;/version&gt;</span>
	<span style="color:#8b008b;font-weight:bold">&lt;/dependency&gt;</span>
  
  	<span style="color:#228b22">&lt;!-- 2.spring-jdbc --&gt;</span>
  	<span style="color:#228b22">&lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-jdbc --&gt;</span>
	<span style="color:#8b008b;font-weight:bold">&lt;dependency&gt;</span>
	    <span style="color:#8b008b;font-weight:bold">&lt;groupId&gt;</span>org.springframework<span style="color:#8b008b;font-weight:bold">&lt;/groupId&gt;</span>
	    <span style="color:#8b008b;font-weight:bold">&lt;artifactId&gt;</span>spring-jdbc<span style="color:#8b008b;font-weight:bold">&lt;/artifactId&gt;</span>
	    <span style="color:#8b008b;font-weight:bold">&lt;version&gt;</span>4.3.7.RELEASE<span style="color:#8b008b;font-weight:bold">&lt;/version&gt;</span>
	<span style="color:#8b008b;font-weight:bold">&lt;/dependency&gt;</span>
  
  
  
 	 <span style="color:#228b22">&lt;!-- spring面向切面编程  --&gt;</span>
  	<span style="color:#228b22">&lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-aspects --&gt;</span>
	<span style="color:#8b008b;font-weight:bold">&lt;dependency&gt;</span>
	    <span style="color:#8b008b;font-weight:bold">&lt;groupId&gt;</span>org.springframework<span style="color:#8b008b;font-weight:bold">&lt;/groupId&gt;</span>
	    <span style="color:#8b008b;font-weight:bold">&lt;artifactId&gt;</span>spring-aspects<span style="color:#8b008b;font-weight:bold">&lt;/artifactId&gt;</span>
	    <span style="color:#8b008b;font-weight:bold">&lt;version&gt;</span>4.3.7.RELEASE<span style="color:#8b008b;font-weight:bold">&lt;/version&gt;</span>
	<span style="color:#8b008b;font-weight:bold">&lt;/dependency&gt;</span>
  
 	 <span style="color:#228b22">&lt;!-- Mybatis --&gt;</span>
	 <span style="color:#228b22">&lt;!-- https://mvnrepository.com/artifact/org.mybatis/mybatis --&gt;</span>
	<span style="color:#8b008b;font-weight:bold">&lt;dependency&gt;</span>
	    <span style="color:#8b008b;font-weight:bold">&lt;groupId&gt;</span>org.mybatis<span style="color:#8b008b;font-weight:bold">&lt;/groupId&gt;</span>
	    <span style="color:#8b008b;font-weight:bold">&lt;artifactId&gt;</span>mybatis<span style="color:#8b008b;font-weight:bold">&lt;/artifactId&gt;</span>
	    <span style="color:#8b008b;font-weight:bold">&lt;version&gt;</span>3.4.2<span style="color:#8b008b;font-weight:bold">&lt;/version&gt;</span>
	<span style="color:#8b008b;font-weight:bold">&lt;/dependency&gt;</span>
  
  
  	<span style="color:#228b22">&lt;!-- mybatis整合spring的是适配包 --&gt;</span>
  	<span style="color:#228b22">&lt;!-- https://mvnrepository.com/artifact/org.mybatis/mybatis-spring --&gt;</span>
	<span style="color:#8b008b;font-weight:bold">&lt;dependency&gt;</span>
	    <span style="color:#8b008b;font-weight:bold">&lt;groupId&gt;</span>org.mybatis<span style="color:#8b008b;font-weight:bold">&lt;/groupId&gt;</span>
	    <span style="color:#8b008b;font-weight:bold">&lt;artifactId&gt;</span>mybatis-spring<span style="color:#8b008b;font-weight:bold">&lt;/artifactId&gt;</span>
	    <span style="color:#8b008b;font-weight:bold">&lt;version&gt;</span>1.3.1<span style="color:#8b008b;font-weight:bold">&lt;/version&gt;</span>
	<span style="color:#8b008b;font-weight:bold">&lt;/dependency&gt;</span>
  
  
  <span style="color:#228b22">&lt;!--数据库连接池  --&gt;</span>
 	 <span style="color:#228b22">&lt;!-- https://mvnrepository.com/artifact/c3p0/c3p0 --&gt;</span>
	<span style="color:#8b008b;font-weight:bold">&lt;dependency&gt;</span>
	    <span style="color:#8b008b;font-weight:bold">&lt;groupId&gt;</span>c3p0<span style="color:#8b008b;font-weight:bold">&lt;/groupId&gt;</span>
	    <span style="color:#8b008b;font-weight:bold">&lt;artifactId&gt;</span>c3p0<span style="color:#8b008b;font-weight:bold">&lt;/artifactId&gt;</span>
	    <span style="color:#8b008b;font-weight:bold">&lt;version&gt;</span>0.9.1.2<span style="color:#8b008b;font-weight:bold">&lt;/version&gt;</span>
	<span style="color:#8b008b;font-weight:bold">&lt;/dependency&gt;</span>
  
 	<span style="color:#228b22">&lt;!-- https://mvnrepository.com/artifact/mysql/mysql-connector-java --&gt;</span>
	<span style="color:#8b008b;font-weight:bold">&lt;dependency&gt;</span>
	    <span style="color:#8b008b;font-weight:bold">&lt;groupId&gt;</span>mysql<span style="color:#8b008b;font-weight:bold">&lt;/groupId&gt;</span>
	    <span style="color:#8b008b;font-weight:bold">&lt;artifactId&gt;</span>mysql-connector-java<span style="color:#8b008b;font-weight:bold">&lt;/artifactId&gt;</span>
	    <span style="color:#8b008b;font-weight:bold">&lt;version&gt;</span>8.0.11<span style="color:#8b008b;font-weight:bold">&lt;/version&gt;</span>
	<span style="color:#8b008b;font-weight:bold">&lt;/dependency&gt;</span>
	
	<span style="color:#228b22">&lt;!-- 引入jstl、servlet-api、junit --&gt;</span>
	<span style="color:#228b22">&lt;!-- https://mvnrepository.com/artifact/jstl/jstl --&gt;</span>
	<span style="color:#8b008b;font-weight:bold">&lt;dependency&gt;</span>
	    <span style="color:#8b008b;font-weight:bold">&lt;groupId&gt;</span>jstl<span style="color:#8b008b;font-weight:bold">&lt;/groupId&gt;</span>
	    <span style="color:#8b008b;font-weight:bold">&lt;artifactId&gt;</span>jstl<span style="color:#8b008b;font-weight:bold">&lt;/artifactId&gt;</span>
	    <span style="color:#8b008b;font-weight:bold">&lt;version&gt;</span>1.2<span style="color:#8b008b;font-weight:bold">&lt;/version&gt;</span>
	<span style="color:#8b008b;font-weight:bold">&lt;/dependency&gt;</span>

	<span style="color:#228b22">&lt;!-- https://mvnrepository.com/artifact/javax.servlet/servlet-api --&gt;</span>
	<span style="color:#8b008b;font-weight:bold">&lt;dependency&gt;</span>
	    <span style="color:#8b008b;font-weight:bold">&lt;groupId&gt;</span>javax.servlet<span style="color:#8b008b;font-weight:bold">&lt;/groupId&gt;</span>
	    <span style="color:#8b008b;font-weight:bold">&lt;artifactId&gt;</span>servlet-api<span style="color:#8b008b;font-weight:bold">&lt;/artifactId&gt;</span>
	    <span style="color:#8b008b;font-weight:bold">&lt;version&gt;</span>2.5<span style="color:#8b008b;font-weight:bold">&lt;/version&gt;</span>
	    <span style="color:#8b008b;font-weight:bold">&lt;scope&gt;</span>provided<span style="color:#8b008b;font-weight:bold">&lt;/scope&gt;</span>
	<span style="color:#8b008b;font-weight:bold">&lt;/dependency&gt;</span>
	
	<span style="color:#228b22">&lt;!-- https://mvnrepository.com/artifact/junit/junit --&gt;</span>
	<span style="color:#8b008b;font-weight:bold">&lt;dependency&gt;</span>
	    <span style="color:#8b008b;font-weight:bold">&lt;groupId&gt;</span>junit<span style="color:#8b008b;font-weight:bold">&lt;/groupId&gt;</span>
	    <span style="color:#8b008b;font-weight:bold">&lt;artifactId&gt;</span>junit<span style="color:#8b008b;font-weight:bold">&lt;/artifactId&gt;</span>
	    <span style="color:#8b008b;font-weight:bold">&lt;version&gt;</span>4.12<span style="color:#8b008b;font-weight:bold">&lt;/version&gt;</span>
	    <span style="color:#8b008b;font-weight:bold">&lt;scope&gt;</span>test<span style="color:#8b008b;font-weight:bold">&lt;/scope&gt;</span>
	<span style="color:#8b008b;font-weight:bold">&lt;/dependency&gt;</span>
	
	<span style="color:#228b22">&lt;!-- https://mvnrepository.com/artifact/org.mybatis.generator/mybatis-generator-core --&gt;</span>
	<span style="color:#8b008b;font-weight:bold">&lt;dependency&gt;</span>
	    <span style="color:#8b008b;font-weight:bold">&lt;groupId&gt;</span>org.mybatis.generator<span style="color:#8b008b;font-weight:bold">&lt;/groupId&gt;</span>
	    <span style="color:#8b008b;font-weight:bold">&lt;artifactId&gt;</span>mybatis-generator-core<span style="color:#8b008b;font-weight:bold">&lt;/artifactId&gt;</span>
	    <span style="color:#8b008b;font-weight:bold">&lt;version&gt;</span>1.3.5<span style="color:#8b008b;font-weight:bold">&lt;/version&gt;</span>
	<span style="color:#8b008b;font-weight:bold">&lt;/dependency&gt;</span>
	
  <span style="color:#8b008b;font-weight:bold">&lt;/dependencies&gt;</span>
<span style="color:#8b008b;font-weight:bold">&lt;/project&gt;</span>
</code></pre></div><p>web.xml:</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml"><span style="color:#1e889b">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;</span>
<span style="color:#8b008b;font-weight:bold">&lt;web-app</span> <span style="color:#658b00">id=</span><span style="color:#cd5555">&#34;WebApp_ID&#34;</span> <span style="color:#658b00">version=</span><span style="color:#cd5555">&#34;2.5&#34;</span> <span style="color:#658b00">xmlns=</span><span style="color:#cd5555">&#34;http://java.sun.com/xml/ns/javaee&#34;</span> <span style="color:#658b00">xmlns:xsi=</span><span style="color:#cd5555">&#34;http://www.w3.org/2001/XMLSchema-instance&#34;</span> <span style="color:#658b00">xsi:schemaLocation=</span><span style="color:#cd5555">&#34;http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd&#34;</span><span style="color:#8b008b;font-weight:bold">&gt;</span>
	<span style="color:#228b22">&lt;!-- 1.启动spring的容器 --&gt;</span>
	<span style="color:#228b22">&lt;!-- needed for ContextLoaderListener --&gt;</span>
	<span style="color:#8b008b;font-weight:bold">&lt;context-param&gt;</span>
		<span style="color:#8b008b;font-weight:bold">&lt;param-name&gt;</span>contextConfigLocation<span style="color:#8b008b;font-weight:bold">&lt;/param-name&gt;</span>
		<span style="color:#8b008b;font-weight:bold">&lt;param-value&gt;</span>classpath:applicationContext.xml<span style="color:#8b008b;font-weight:bold">&lt;/param-value&gt;</span>
	<span style="color:#8b008b;font-weight:bold">&lt;/context-param&gt;</span>

	<span style="color:#228b22">&lt;!-- Bootstraps the root web application context before servlet initialization --&gt;</span>
	<span style="color:#8b008b;font-weight:bold">&lt;listener&gt;</span>
		<span style="color:#8b008b;font-weight:bold">&lt;listener-class&gt;</span>org.springframework.web.context.ContextLoaderListener<span style="color:#8b008b;font-weight:bold">&lt;/listener-class&gt;</span>
	<span style="color:#8b008b;font-weight:bold">&lt;/listener&gt;</span>

	<span style="color:#228b22">&lt;!-- 2.配置springmvc的前端控制器，；按揭素有的请求  --&gt;</span>
	<span style="color:#228b22">&lt;!-- The front controller of this Spring Web application, responsible for handling all application requests --&gt;</span>
	<span style="color:#8b008b;font-weight:bold">&lt;servlet&gt;</span>
		<span style="color:#8b008b;font-weight:bold">&lt;servlet-name&gt;</span>dispatcherServlet<span style="color:#8b008b;font-weight:bold">&lt;/servlet-name&gt;</span>
		<span style="color:#8b008b;font-weight:bold">&lt;servlet-class&gt;</span>org.springframework.web.servlet.DispatcherServlet<span style="color:#8b008b;font-weight:bold">&lt;/servlet-class&gt;</span>
		<span style="color:#8b008b;font-weight:bold">&lt;init-param&gt;</span>
			<span style="color:#8b008b;font-weight:bold">&lt;param-name&gt;</span>contextConfigLocation<span style="color:#8b008b;font-weight:bold">&lt;/param-name&gt;</span>
			<span style="color:#8b008b;font-weight:bold">&lt;param-value&gt;</span>classpath:springmvc.xml<span style="color:#8b008b;font-weight:bold">&lt;/param-value&gt;</span>
		<span style="color:#8b008b;font-weight:bold">&lt;/init-param&gt;</span>
		<span style="color:#8b008b;font-weight:bold">&lt;load-on-startup&gt;</span>1<span style="color:#8b008b;font-weight:bold">&lt;/load-on-startup&gt;</span>
	<span style="color:#8b008b;font-weight:bold">&lt;/servlet&gt;</span>
	<span style="color:#228b22">&lt;!-- Map all requests to the DispatcherServlet for handling --&gt;</span>
	<span style="color:#8b008b;font-weight:bold">&lt;servlet-mapping&gt;</span>
		<span style="color:#8b008b;font-weight:bold">&lt;servlet-name&gt;</span>dispatcherServlet<span style="color:#8b008b;font-weight:bold">&lt;/servlet-name&gt;</span>
		<span style="color:#8b008b;font-weight:bold">&lt;url-pattern&gt;</span>/<span style="color:#8b008b;font-weight:bold">&lt;/url-pattern&gt;</span>
	<span style="color:#8b008b;font-weight:bold">&lt;/servlet-mapping&gt;</span>
	
	<span style="color:#228b22">&lt;!-- 3.字符编码过滤器 (当我们有多个过滤器时，字符编码过滤器一定是要放在最前面的)--&gt;</span>
	<span style="color:#8b008b;font-weight:bold">&lt;filter&gt;</span>
		<span style="color:#8b008b;font-weight:bold">&lt;filter-name&gt;</span>characterEncodingFilter<span style="color:#8b008b;font-weight:bold">&lt;/filter-name&gt;</span>
		<span style="color:#8b008b;font-weight:bold">&lt;filter-class&gt;</span>org.springframework.web.filter.CharacterEncodingFilter<span style="color:#8b008b;font-weight:bold">&lt;/filter-class&gt;</span>
		<span style="color:#8b008b;font-weight:bold">&lt;init-param&gt;</span>
			<span style="color:#8b008b;font-weight:bold">&lt;param-name&gt;</span>encoding<span style="color:#8b008b;font-weight:bold">&lt;/param-name&gt;</span>
			<span style="color:#8b008b;font-weight:bold">&lt;param-value&gt;</span>utf-8<span style="color:#8b008b;font-weight:bold">&lt;/param-value&gt;</span>
		<span style="color:#8b008b;font-weight:bold">&lt;/init-param&gt;</span>
		<span style="color:#8b008b;font-weight:bold">&lt;init-param&gt;</span>
			<span style="color:#8b008b;font-weight:bold">&lt;param-name&gt;</span>forceRequestEncoding<span style="color:#8b008b;font-weight:bold">&lt;/param-name&gt;</span>
			<span style="color:#8b008b;font-weight:bold">&lt;param-value&gt;</span>true<span style="color:#8b008b;font-weight:bold">&lt;/param-value&gt;</span>
		<span style="color:#8b008b;font-weight:bold">&lt;/init-param&gt;</span>
		<span style="color:#8b008b;font-weight:bold">&lt;init-param&gt;</span>
			<span style="color:#8b008b;font-weight:bold">&lt;param-name&gt;</span>forceResponseEncoding<span style="color:#8b008b;font-weight:bold">&lt;/param-name&gt;</span>
			<span style="color:#8b008b;font-weight:bold">&lt;param-value&gt;</span>true<span style="color:#8b008b;font-weight:bold">&lt;/param-value&gt;</span>
		<span style="color:#8b008b;font-weight:bold">&lt;/init-param&gt;</span>
	<span style="color:#8b008b;font-weight:bold">&lt;/filter&gt;</span>
	<span style="color:#8b008b;font-weight:bold">&lt;filter-mapping&gt;</span>
		<span style="color:#8b008b;font-weight:bold">&lt;filter-name&gt;</span>characterEncodingFilter<span style="color:#8b008b;font-weight:bold">&lt;/filter-name&gt;</span>
		<span style="color:#8b008b;font-weight:bold">&lt;url-pattern&gt;</span>/*<span style="color:#8b008b;font-weight:bold">&lt;/url-pattern&gt;</span>
	<span style="color:#8b008b;font-weight:bold">&lt;/filter-mapping&gt;</span>
	
	
	<span style="color:#228b22">&lt;!-- 4.使用Rest风格、将页面普通的post请i去转换成指定的delete或者put请求--&gt;</span>
	<span style="color:#8b008b;font-weight:bold">&lt;filter&gt;</span>
		<span style="color:#8b008b;font-weight:bold">&lt;filter-name&gt;</span>hiddenHttpMethodFilter<span style="color:#8b008b;font-weight:bold">&lt;/filter-name&gt;</span>
		<span style="color:#8b008b;font-weight:bold">&lt;filter-class&gt;</span>org.springframework.web.filter.HiddenHttpMethodFilter<span style="color:#8b008b;font-weight:bold">&lt;/filter-class&gt;</span>
	<span style="color:#8b008b;font-weight:bold">&lt;/filter&gt;</span>
	<span style="color:#8b008b;font-weight:bold">&lt;filter-mapping&gt;</span>
		<span style="color:#8b008b;font-weight:bold">&lt;filter-name&gt;</span>hiddenHttpMethodFilter<span style="color:#8b008b;font-weight:bold">&lt;/filter-name&gt;</span>
		<span style="color:#8b008b;font-weight:bold">&lt;url-pattern&gt;</span>/*<span style="color:#8b008b;font-weight:bold">&lt;/url-pattern&gt;</span>
	<span style="color:#8b008b;font-weight:bold">&lt;/filter-mapping&gt;</span>
<span style="color:#8b008b;font-weight:bold">&lt;/web-app&gt;</span>
</code></pre></div><p>applicationContext.xml</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml"><span style="color:#1e889b">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;</span>
<span style="color:#8b008b;font-weight:bold">&lt;beans</span> <span style="color:#658b00">xmlns=</span><span style="color:#cd5555">&#34;http://www.springframework.org/schema/beans&#34;</span>
	<span style="color:#658b00">xmlns:xsi=</span><span style="color:#cd5555">&#34;http://www.w3.org/2001/XMLSchema-instance&#34;</span>
	<span style="color:#658b00">xmlns:context=</span><span style="color:#cd5555">&#34;http://www.springframework.org/schema/context&#34;</span>
	<span style="color:#658b00">xmlns:p=</span><span style="color:#cd5555">&#34;http://www.springframework.org/schema/p&#34;</span>
	<span style="color:#658b00">xmlns:aop=</span><span style="color:#cd5555">&#34;http://www.springframework.org/schema/aop&#34;</span>
	<span style="color:#658b00">xmlns:tx=</span><span style="color:#cd5555">&#34;http://www.springframework.org/schema/tx&#34;</span>
	<span style="color:#658b00">xsi:schemaLocation=</span><span style="color:#cd5555">&#34;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
</span><span style="color:#cd5555">		http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-4.3.xsd
</span><span style="color:#cd5555">		http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-4.3.xsd
</span><span style="color:#cd5555">		http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-4.3.xsd&#34;</span><span style="color:#8b008b;font-weight:bold">&gt;</span>
	<span style="color:#228b22">&lt;!-- Spring的配置文件，这里主要负责配置和业务逻辑相关的事项--&gt;</span>
	<span style="color:#8b008b;font-weight:bold">&lt;context:component-scan</span> <span style="color:#658b00">base-package=</span><span style="color:#cd5555">&#34;com.atguigu&#34;</span><span style="color:#8b008b;font-weight:bold">&gt;</span>
		<span style="color:#8b008b;font-weight:bold">&lt;context:exclude-filter</span> <span style="color:#658b00">type=</span><span style="color:#cd5555">&#34;annotation&#34;</span> <span style="color:#658b00">expression=</span><span style="color:#cd5555">&#34;org.springframework.stereotype.Controller&#34;</span><span style="color:#8b008b;font-weight:bold">/&gt;</span>
	<span style="color:#8b008b;font-weight:bold">&lt;/context:component-scan&gt;</span>
	
	<span style="color:#228b22">&lt;!-- 引入外部的文件 --&gt;</span>
	<span style="color:#228b22">&lt;!-- &lt;context:property-placeholder location=&#34;classpath:dbconfig.properties&#34;/&gt; --&gt;</span>
	<span style="color:#228b22">&lt;!-- 数据源、事务控制 --&gt;</span>
	<span style="color:#8b008b;font-weight:bold">&lt;bean</span> <span style="color:#658b00">id=</span><span style="color:#cd5555">&#34;pooledDataSource&#34;</span> <span style="color:#658b00">class=</span><span style="color:#cd5555">&#34;com.mchange.v2.c3p0.ComboPooledDataSource&#34;</span><span style="color:#8b008b;font-weight:bold">&gt;</span>
		<span style="color:#8b008b;font-weight:bold">&lt;property</span> <span style="color:#658b00">name=</span><span style="color:#cd5555">&#34;jdbcUrl&#34;</span> <span style="color:#658b00">value=</span><span style="color:#cd5555">&#34;jdbc:mysql://127.0.0.1:3306/mybatis?useSSL=false&#34;</span><span style="color:#8b008b;font-weight:bold">&gt;&lt;/property&gt;</span>
		<span style="color:#8b008b;font-weight:bold">&lt;property</span> <span style="color:#658b00">name=</span><span style="color:#cd5555">&#34;driverClass&#34;</span> <span style="color:#658b00">value=</span><span style="color:#cd5555">&#34;com.mysql.cj.jdbc.Driver&#34;</span><span style="color:#8b008b;font-weight:bold">&gt;&lt;/property&gt;</span>
		<span style="color:#8b008b;font-weight:bold">&lt;property</span> <span style="color:#658b00">name=</span><span style="color:#cd5555">&#34;user&#34;</span> <span style="color:#658b00">value=</span><span style="color:#cd5555">&#34;root&#34;</span><span style="color:#8b008b;font-weight:bold">&gt;&lt;/property&gt;</span>
		<span style="color:#8b008b;font-weight:bold">&lt;property</span> <span style="color:#658b00">name=</span><span style="color:#cd5555">&#34;password&#34;</span> <span style="color:#658b00">value=</span><span style="color:#cd5555">&#34;13733433427&#34;</span><span style="color:#8b008b;font-weight:bold">&gt;&lt;/property&gt;</span>
	<span style="color:#8b008b;font-weight:bold">&lt;/bean&gt;</span>
	
	<span style="color:#228b22">&lt;!-- 配置和mybatis的整合 --&gt;</span>
	<span style="color:#8b008b;font-weight:bold">&lt;bean</span> <span style="color:#658b00">id=</span><span style="color:#cd5555">&#34;sqlSessionFactory&#34;</span> <span style="color:#658b00">class=</span><span style="color:#cd5555">&#34;org.mybatis.spring.SqlSessionFactoryBean&#34;</span><span style="color:#8b008b;font-weight:bold">&gt;</span>
		<span style="color:#228b22">&lt;!-- 指定mybatis全局配置文件的位置 --&gt;</span>
		<span style="color:#8b008b;font-weight:bold">&lt;property</span> <span style="color:#658b00">name=</span><span style="color:#cd5555">&#34;configLocation&#34;</span> <span style="color:#658b00">value=</span><span style="color:#cd5555">&#34;classpath:mybatis-config.xml&#34;</span><span style="color:#8b008b;font-weight:bold">&gt;&lt;/property&gt;</span>
		<span style="color:#228b22">&lt;!-- 数据源 --&gt;</span>
		<span style="color:#8b008b;font-weight:bold">&lt;property</span> <span style="color:#658b00">name=</span><span style="color:#cd5555">&#34;dataSource&#34;</span> <span style="color:#658b00">ref=</span><span style="color:#cd5555">&#34;pooledDataSource&#34;</span><span style="color:#8b008b;font-weight:bold">&gt;&lt;/property&gt;</span>
		<span style="color:#228b22">&lt;!--指定mybatis的Mapper文件 --&gt;</span>
		<span style="color:#8b008b;font-weight:bold">&lt;property</span> <span style="color:#658b00">name=</span><span style="color:#cd5555">&#34;mapperLocations&#34;</span> <span style="color:#658b00">value=</span><span style="color:#cd5555">&#34;classpath:mapper/*.xml&#34;</span><span style="color:#8b008b;font-weight:bold">&gt;&lt;/property&gt;</span>
	<span style="color:#8b008b;font-weight:bold">&lt;/bean&gt;</span>
	
	<span style="color:#228b22">&lt;!-- 配置扫描器，将mybatis接口的实现扫描到IOC容器中 --&gt;</span>
	<span style="color:#8b008b;font-weight:bold">&lt;bean</span> <span style="color:#658b00">class=</span><span style="color:#cd5555">&#34;org.mybatis.spring.mapper.MapperScannerConfigurer&#34;</span><span style="color:#8b008b;font-weight:bold">&gt;</span>
		<span style="color:#228b22">&lt;!-- 扫描所有的dao接口，加入到IOC容器中 --&gt;</span>
		<span style="color:#8b008b;font-weight:bold">&lt;property</span> <span style="color:#658b00">name=</span><span style="color:#cd5555">&#34;basePackage&#34;</span> <span style="color:#658b00">value=</span><span style="color:#cd5555">&#34;com.atguigu.crud.dao&#34;</span><span style="color:#8b008b;font-weight:bold">&gt;&lt;/property&gt;</span>
	
	<span style="color:#8b008b;font-weight:bold">&lt;/bean&gt;</span>
	
	<span style="color:#228b22">&lt;!-- 事务控制的配置 --&gt;</span>
	<span style="color:#8b008b;font-weight:bold">&lt;bean</span> <span style="color:#658b00">id=</span><span style="color:#cd5555">&#34;transactionManager&#34;</span> <span style="color:#658b00">class=</span><span style="color:#cd5555">&#34;org.springframework.jdbc.datasource.DataSourceTransactionManager&#34;</span><span style="color:#8b008b;font-weight:bold">&gt;</span>
		<span style="color:#8b008b;font-weight:bold">&lt;property</span> <span style="color:#658b00">name=</span><span style="color:#cd5555">&#34;dataSource&#34;</span> <span style="color:#658b00">ref=</span><span style="color:#cd5555">&#34;pooledDataSource&#34;</span><span style="color:#8b008b;font-weight:bold">&gt;&lt;/property&gt;</span>
	<span style="color:#8b008b;font-weight:bold">&lt;/bean&gt;</span>
	
	<span style="color:#228b22">&lt;!-- 开启基于注解的事务，使用xml配置形式的事务(主要的时都是使用配置式) --&gt;</span>
	<span style="color:#8b008b;font-weight:bold">&lt;aop:config&gt;</span>
		<span style="color:#228b22">&lt;!-- 切入点表达式 --&gt;</span>
		<span style="color:#8b008b;font-weight:bold">&lt;aop:pointcut</span> <span style="color:#658b00">expression=</span><span style="color:#cd5555">&#34;(* com.auguigu.crud.service..*(..))&#34;</span> <span style="color:#658b00">id=</span><span style="color:#cd5555">&#34;txPoint&#34;</span><span style="color:#8b008b;font-weight:bold">/&gt;</span>
		<span style="color:#228b22">&lt;!-- 配置事务增强 --&gt;</span>
		<span style="color:#8b008b;font-weight:bold">&lt;aop:advisor</span> <span style="color:#658b00">advice-ref=</span><span style="color:#cd5555">&#34;txAdvice&#34;</span> <span style="color:#658b00">pointcut-ref=</span><span style="color:#cd5555">&#34;txPoint&#34;</span> <span style="color:#8b008b;font-weight:bold">/&gt;</span>
	<span style="color:#8b008b;font-weight:bold">&lt;/aop:config&gt;</span>
	<span style="color:#228b22">&lt;!-- 配置事务增强 ,事务如何启动--&gt;</span>
	<span style="color:#8b008b;font-weight:bold">&lt;tx:advice</span> <span style="color:#658b00">id=</span><span style="color:#cd5555">&#34;txAdvice&#34;</span> <span style="color:#658b00">transaction-manager=</span><span style="color:#cd5555">&#34;transactionManager&#34;</span><span style="color:#8b008b;font-weight:bold">&gt;</span>
		<span style="color:#8b008b;font-weight:bold">&lt;tx:attributes&gt;</span>
		<span style="color:#228b22">&lt;!-- 所有的方法都是事务 --&gt;</span>
			<span style="color:#8b008b;font-weight:bold">&lt;tx:method</span> <span style="color:#658b00">name=</span><span style="color:#cd5555">&#34;*&#34;</span><span style="color:#8b008b;font-weight:bold">/&gt;</span>
			<span style="color:#8b008b;font-weight:bold">&lt;tx:method</span> <span style="color:#658b00">name=</span><span style="color:#cd5555">&#34;get*&#34;</span> <span style="color:#658b00">read-only=</span><span style="color:#cd5555">&#34;true&#34;</span> <span style="color:#8b008b;font-weight:bold">/&gt;</span>
		<span style="color:#8b008b;font-weight:bold">&lt;/tx:attributes&gt;</span>
	<span style="color:#8b008b;font-weight:bold">&lt;/tx:advice&gt;</span>
	
<span style="color:#8b008b;font-weight:bold">&lt;/beans&gt;</span>
</code></pre></div><p>mybatis-config.xml:</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml"><span style="color:#1e889b">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34; ?&gt;</span>
<span style="color:#1e889b">&lt;!DOCTYPE configuration
</span><span style="color:#1e889b">        PUBLIC &#34;-//mybatis.org//DTD Config 3.0//EN&#34;
</span><span style="color:#1e889b">        &#34;http://mybatis.org/dtd/mybatis-3-config.dtd&#34;&gt;</span>
  <span style="color:#8b008b;font-weight:bold">&lt;configuration&gt;</span>
	<span style="color:#8b008b;font-weight:bold">&lt;settings&gt;</span>
		<span style="color:#8b008b;font-weight:bold">&lt;setting</span> <span style="color:#658b00">name=</span><span style="color:#cd5555">&#34;mapUnderscoreToCamelCase&#34;</span> <span style="color:#658b00">value=</span><span style="color:#cd5555">&#34;true&#34;</span><span style="color:#8b008b;font-weight:bold">/&gt;</span>
	<span style="color:#8b008b;font-weight:bold">&lt;/settings&gt;</span>
	<span style="color:#8b008b;font-weight:bold">&lt;typeAliases&gt;</span>
		<span style="color:#8b008b;font-weight:bold">&lt;package</span> <span style="color:#658b00">name=</span><span style="color:#cd5555">&#34;com.atguigu.crud.bean&#34;</span> <span style="color:#8b008b;font-weight:bold">/&gt;</span>
	<span style="color:#8b008b;font-weight:bold">&lt;/typeAliases&gt;</span>
<span style="color:#8b008b;font-weight:bold">&lt;/configuration&gt;</span>
</code></pre></div><p>springmvc.xml:</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml"><span style="color:#1e889b">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;</span>
<span style="color:#8b008b;font-weight:bold">&lt;beans</span> <span style="color:#658b00">xmlns=</span><span style="color:#cd5555">&#34;http://www.springframework.org/schema/beans&#34;</span>
	<span style="color:#658b00">xmlns:xsi=</span><span style="color:#cd5555">&#34;http://www.w3.org/2001/XMLSchema-instance&#34;</span>
	<span style="color:#658b00">xmlns:context=</span><span style="color:#cd5555">&#34;http://www.springframework.org/schema/context&#34;</span>
	<span style="color:#658b00">xmlns:mvc=</span><span style="color:#cd5555">&#34;http://www.springframework.org/schema/mvc&#34;</span>
	<span style="color:#658b00">xsi:schemaLocation=</span><span style="color:#cd5555">&#34;http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-4.3.xsd
</span><span style="color:#cd5555">		http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
</span><span style="color:#cd5555">		http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-4.3.xsd&#34;</span><span style="color:#8b008b;font-weight:bold">&gt;</span>
	<span style="color:#228b22">&lt;!-- springmvc的配置文件 ，主要是包含跳转逻辑控制  --&gt;</span>
	
	
	<span style="color:#8b008b;font-weight:bold">&lt;context:component-scan</span> <span style="color:#658b00">base-package=</span><span style="color:#cd5555">&#34;com.atguigu.crud&#34;</span> <span style="color:#658b00">use-default-filters=</span><span style="color:#cd5555">&#34;false&#34;</span><span style="color:#8b008b;font-weight:bold">&gt;</span>
		<span style="color:#228b22">&lt;!--只扫描控制器--&gt;</span>
		<span style="color:#8b008b;font-weight:bold">&lt;context:include-filter</span> <span style="color:#658b00">type=</span><span style="color:#cd5555">&#34;annotation&#34;</span> <span style="color:#658b00">expression=</span><span style="color:#cd5555">&#34;org.springframework.stereotype.Controller&#34;</span><span style="color:#8b008b;font-weight:bold">/&gt;</span>
	<span style="color:#8b008b;font-weight:bold">&lt;/context:component-scan&gt;</span>
	
	
	<span style="color:#228b22">&lt;!-- 配置视图解析器 --&gt;</span>
	<span style="color:#8b008b;font-weight:bold">&lt;bean</span> <span style="color:#658b00">id=</span><span style="color:#cd5555">&#34;internalResourceView&#34;</span> <span style="color:#658b00">class=</span><span style="color:#cd5555">&#34;org.springframework.web.servlet.view.InternalResourceViewResolver&#34;</span><span style="color:#8b008b;font-weight:bold">&gt;</span>
		<span style="color:#8b008b;font-weight:bold">&lt;property</span> <span style="color:#658b00">name=</span><span style="color:#cd5555">&#34;prefix&#34;</span> <span style="color:#658b00">value=</span><span style="color:#cd5555">&#34;/WEB-INF/views/&#34;</span><span style="color:#8b008b;font-weight:bold">&gt;&lt;/property&gt;</span>
		<span style="color:#8b008b;font-weight:bold">&lt;property</span> <span style="color:#658b00">name=</span><span style="color:#cd5555">&#34;suffix&#34;</span> <span style="color:#658b00">value=</span><span style="color:#cd5555">&#34;.jsp&#34;</span><span style="color:#8b008b;font-weight:bold">&gt;&lt;/property&gt;</span>
	<span style="color:#8b008b;font-weight:bold">&lt;/bean&gt;</span>
	
	<span style="color:#228b22">&lt;!-- 能支持springmvc一些更高级的功能--&gt;</span>
	<span style="color:#8b008b;font-weight:bold">&lt;mvc:annotation-driven</span> <span style="color:#8b008b;font-weight:bold">/&gt;</span>
	<span style="color:#228b22">&lt;!-- 将springmvc不能处理的资源交给tomcat --&gt;</span>
	<span style="color:#8b008b;font-weight:bold">&lt;mvc:default-servlet-handler</span> <span style="color:#8b008b;font-weight:bold">/&gt;</span>
	
<span style="color:#8b008b;font-weight:bold">&lt;/beans&gt;</span>
</code></pre></div><p>mbg.xml</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml"><span style="color:#1e889b">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;</span>
<span style="color:#1e889b">&lt;!DOCTYPE generatorConfiguration
</span><span style="color:#1e889b">  PUBLIC &#34;-//mybatis.org//DTD MyBatis Generator Configuration 1.0//EN&#34;
</span><span style="color:#1e889b">  &#34;http://mybatis.org/dtd/mybatis-generator-config_1_0.dtd&#34;&gt;</span>
<span style="color:#8b008b;font-weight:bold">&lt;generatorConfiguration&gt;</span>
  <span style="color:#8b008b;font-weight:bold">&lt;context</span> <span style="color:#658b00">id=</span><span style="color:#cd5555">&#34;DB2Tables&#34;</span> <span style="color:#658b00">targetRuntime=</span><span style="color:#cd5555">&#34;MyBatis3&#34;</span><span style="color:#8b008b;font-weight:bold">&gt;</span>
  <span style="color:#228b22">&lt;!-- 阻止生成注释 --&gt;</span>
  <span style="color:#8b008b;font-weight:bold">&lt;commentGenerator&gt;</span>
  	<span style="color:#8b008b;font-weight:bold">&lt;property</span> <span style="color:#658b00">name=</span><span style="color:#cd5555">&#34;suppressAllComments&#34;</span> <span style="color:#658b00">value=</span><span style="color:#cd5555">&#34;true&#34;</span><span style="color:#8b008b;font-weight:bold">&gt;&lt;/property&gt;</span>
  <span style="color:#8b008b;font-weight:bold">&lt;/commentGenerator&gt;</span>
  	<span style="color:#228b22">&lt;!-- 配置数据库的连接信息  --&gt;</span>
    <span style="color:#8b008b;font-weight:bold">&lt;jdbcConnection</span> <span style="color:#658b00">driverClass=</span><span style="color:#cd5555">&#34;com.mysql.cj.jdbc.Driver&#34;</span>
        <span style="color:#658b00">connectionURL=</span><span style="color:#cd5555">&#34;jdbc:mysql://127.0.0.1:3306/mybatis?useSSL=false&#34;</span>
        <span style="color:#658b00">userId=</span><span style="color:#cd5555">&#34;root&#34;</span>
        <span style="color:#658b00">password=</span><span style="color:#cd5555">&#34;13733433427&#34;</span><span style="color:#8b008b;font-weight:bold">&gt;</span>
    <span style="color:#8b008b;font-weight:bold">&lt;/jdbcConnection&gt;</span>

    <span style="color:#8b008b;font-weight:bold">&lt;javaTypeResolver</span> <span style="color:#8b008b;font-weight:bold">&gt;</span>
      <span style="color:#8b008b;font-weight:bold">&lt;property</span> <span style="color:#658b00">name=</span><span style="color:#cd5555">&#34;forceBigDecimals&#34;</span> <span style="color:#658b00">value=</span><span style="color:#cd5555">&#34;false&#34;</span> <span style="color:#8b008b;font-weight:bold">/&gt;</span>
    <span style="color:#8b008b;font-weight:bold">&lt;/javaTypeResolver&gt;</span>

	<span style="color:#228b22">&lt;!-- 指定javaBean生成的位置 --&gt;</span>
    <span style="color:#8b008b;font-weight:bold">&lt;javaModelGenerator</span> <span style="color:#658b00">targetPackage=</span><span style="color:#cd5555">&#34;com.atguigu.crud.bean&#34;</span> <span style="color:#658b00">targetProject=</span><span style="color:#cd5555">&#34;.\src\main\java&#34;</span><span style="color:#8b008b;font-weight:bold">&gt;</span>
      <span style="color:#8b008b;font-weight:bold">&lt;property</span> <span style="color:#658b00">name=</span><span style="color:#cd5555">&#34;enableSubPackages&#34;</span> <span style="color:#658b00">value=</span><span style="color:#cd5555">&#34;true&#34;</span> <span style="color:#8b008b;font-weight:bold">/&gt;</span>
      <span style="color:#8b008b;font-weight:bold">&lt;property</span> <span style="color:#658b00">name=</span><span style="color:#cd5555">&#34;trimStrings&#34;</span> <span style="color:#658b00">value=</span><span style="color:#cd5555">&#34;true&#34;</span> <span style="color:#8b008b;font-weight:bold">/&gt;</span>
    <span style="color:#8b008b;font-weight:bold">&lt;/javaModelGenerator&gt;</span>

	<span style="color:#228b22">&lt;!-- 指定sql映射文件生成的位置 --&gt;</span>
    <span style="color:#8b008b;font-weight:bold">&lt;sqlMapGenerator</span> <span style="color:#658b00">targetPackage=</span><span style="color:#cd5555">&#34;mapper&#34;</span>  <span style="color:#658b00">targetProject=</span><span style="color:#cd5555">&#34;.\src\main\resources&#34;</span><span style="color:#8b008b;font-weight:bold">&gt;</span>
      <span style="color:#8b008b;font-weight:bold">&lt;property</span> <span style="color:#658b00">name=</span><span style="color:#cd5555">&#34;enableSubPackages&#34;</span> <span style="color:#658b00">value=</span><span style="color:#cd5555">&#34;true&#34;</span> <span style="color:#8b008b;font-weight:bold">/&gt;</span>
    <span style="color:#8b008b;font-weight:bold">&lt;/sqlMapGenerator&gt;</span>

	<span style="color:#228b22">&lt;!-- 指定dao的接口生成的位置 ，mapper接口--&gt;</span>
    <span style="color:#8b008b;font-weight:bold">&lt;javaClientGenerator</span> <span style="color:#658b00">type=</span><span style="color:#cd5555">&#34;XMLMAPPER&#34;</span> <span style="color:#658b00">targetPackage=</span><span style="color:#cd5555">&#34;com.atguigu.crud.dao&#34;</span>  <span style="color:#658b00">targetProject=</span><span style="color:#cd5555">&#34;.\src\main\java&#34;</span><span style="color:#8b008b;font-weight:bold">&gt;</span>
      <span style="color:#8b008b;font-weight:bold">&lt;property</span> <span style="color:#658b00">name=</span><span style="color:#cd5555">&#34;enableSubPackages&#34;</span> <span style="color:#658b00">value=</span><span style="color:#cd5555">&#34;true&#34;</span> <span style="color:#8b008b;font-weight:bold">/&gt;</span>
    <span style="color:#8b008b;font-weight:bold">&lt;/javaClientGenerator&gt;</span>

	<span style="color:#228b22">&lt;!-- 指定每个表的生成策略,其中每个table标签对应于一张表--&gt;</span>
	<span style="color:#228b22">&lt;!-- 连接上数据库上后对应于数据库中的users表 ，这张表对应的类--&gt;</span>
    <span style="color:#8b008b;font-weight:bold">&lt;table</span> <span style="color:#658b00">tableName=</span><span style="color:#cd5555">&#34;users&#34;</span> <span style="color:#658b00">domainObjectName=</span><span style="color:#cd5555">&#34;Employee&#34;</span><span style="color:#8b008b;font-weight:bold">&gt;&lt;/table&gt;</span>
  <span style="color:#8b008b;font-weight:bold">&lt;/context&gt;</span>
<span style="color:#8b008b;font-weight:bold">&lt;/generatorConfiguration&gt;</span>
</code></pre></div><p>MBGTest.java:</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#8b008b;font-weight:bold">package</span> <span style="color:#008b45;text-decoration:underline">com.atguigu.crud.test</span>;

<span style="color:#8b008b;font-weight:bold">import</span> <span style="color:#008b45;text-decoration:underline">java.io.File</span>;
<span style="color:#8b008b;font-weight:bold">import</span> <span style="color:#008b45;text-decoration:underline">java.io.IOException</span>;
<span style="color:#8b008b;font-weight:bold">import</span> <span style="color:#008b45;text-decoration:underline">java.util.ArrayList</span>;
<span style="color:#8b008b;font-weight:bold">import</span> <span style="color:#008b45;text-decoration:underline">java.util.List</span>;

<span style="color:#8b008b;font-weight:bold">import</span> <span style="color:#008b45;text-decoration:underline">org.mybatis.generator.api.MyBatisGenerator</span>;
<span style="color:#8b008b;font-weight:bold">import</span> <span style="color:#008b45;text-decoration:underline">org.mybatis.generator.config.Configuration</span>;
<span style="color:#8b008b;font-weight:bold">import</span> <span style="color:#008b45;text-decoration:underline">org.mybatis.generator.config.xml.ConfigurationParser</span>;
<span style="color:#8b008b;font-weight:bold">import</span> <span style="color:#008b45;text-decoration:underline">org.mybatis.generator.exception.XMLParserException</span>;
<span style="color:#8b008b;font-weight:bold">import</span> <span style="color:#008b45;text-decoration:underline">org.mybatis.generator.internal.DefaultShellCallback</span>;

<span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#8b008b;font-weight:bold">class</span> <span style="color:#008b45;font-weight:bold">MBGTest</span> {
	<span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#8b008b;font-weight:bold">static</span> <span style="color:#00688b;font-weight:bold">void</span> <span style="color:#008b45">main</span>(String[] args) <span style="color:#8b008b;font-weight:bold">throws</span> Exception {
		   List&lt;String&gt; warnings = <span style="color:#8b008b;font-weight:bold">new</span> ArrayList&lt;String&gt;();
		   <span style="color:#00688b;font-weight:bold">boolean</span> overwrite = <span style="color:#8b008b;font-weight:bold">true</span>;
		   File configFile = <span style="color:#8b008b;font-weight:bold">new</span> File(<span style="color:#cd5555">&#34;mbg.xml&#34;</span>);
		   ConfigurationParser cp = <span style="color:#8b008b;font-weight:bold">new</span> ConfigurationParser(warnings);
		   Configuration config = cp.<span style="color:#658b00">parseConfiguration</span>(configFile);
		   DefaultShellCallback callback = <span style="color:#8b008b;font-weight:bold">new</span> DefaultShellCallback(overwrite);
		   MyBatisGenerator myBatisGenerator = <span style="color:#8b008b;font-weight:bold">new</span> MyBatisGenerator(config, callback, warnings);
		   myBatisGenerator.<span style="color:#658b00">generate</span>(<span style="color:#8b008b;font-weight:bold">null</span>);
		   
		System.<span style="color:#658b00">out</span>.<span style="color:#658b00">println</span>(<span style="color:#cd5555">&#34;hello&#34;</span>);
	}
}
</code></pre></div><p>注意：其中static文件夹中是Bootstrap相关的文件
view：是跳转的页面</p>

</article></div>
    <div class="pad"></div>

    

    <div class="pad">

<div class="date">
    <time pubdate="0001-01-01">January 1, 0001</time>
    <span class="author">学习笔记</span>
</div>

<article>
    <h1><a href="https://example.com/posts/vue%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/">Vue的基本使用</a></h1>
    <div class="tags">
        
        
        <a href="/tags/%E5%89%8D%E7%AB%AF" class="pure-button">前端</a>
        
    </div>
    <h2 id="一node的安装">一、Node的安装</h2>
<h3 id="1环境准备">1.环境准备</h3>
<blockquote>
<p>安装<a href="https://nodejs.org/zh-cn/">NodeJs</a></p>
<p>配置环境变量</p>
<p>查看是否安装成功   node -v</p>
</blockquote>
<h3 id="2更换镜像源">2.更换镜像源</h3>
<blockquote>
<p>设置npm的镜像源   npm config set registry <a href="https://registry.npm.taobao.org">https://registry.npm.taobao.org</a></p>
<p>验证镜像源是否切换成功		npm config get registry</p>
</blockquote>
<h3 id="3配置npm下载的位置">3.配置npm下载的位置</h3>
<blockquote>
<p>npm config set cache &ldquo;D:\noderes\npm-cache&rdquo;</p>
<p>npm config set prefix &ldquo;D:\noderes\npm_global&rdquo;</p>
<p>查看		npm config ls</p>
</blockquote>
<h2 id="二安装脚手架">二、安装脚手架</h2>
<h3 id="1安装">1.安装</h3>
<blockquote>
<p>npm install -g vue-cli</p>
<p><code>卸载		</code></p>
<p>npm uninstall -g @vue-cli		//卸载3.x版本的脚手架</p>
<p>npm uninstall -g @vue-cli		//卸载2.x版本的脚手架</p>
</blockquote>
<h2 id="三创建第一个脚手架项目">三、创建第一个脚手架项目</h2>
<blockquote>
<p>vue init webpack my-project					//my-project为项目名称</p>
</blockquote>
<h2 id="四安装axios">四、安装axios</h2>
<h3 id="1安装-1">1.安装</h3>
<blockquote>
<p>npm install axios &ndash;save-dev</p>
</blockquote>
<h3 id="2在mainjs中引入">2.在main.js中引入</h3>
<blockquote>
<pre><code>import axios from 'axios'			//引入
Vue.prototype.$http = axios			//将axios改写为原型
</code></pre></blockquote>
<h3 id="3使用axios">3.使用axios</h3>
<blockquote>
<p>this.$http.get(&ldquo;url&rdquo;).then((res)=&gt;{})</p>
</blockquote>
<h2 id="五安装element-ui">五、安装Element-UI</h2>
<blockquote>
<p>npm install element-ui</p>
<p>import ElementUI from &lsquo;element-ui&rsquo;;</p>
<p>import &lsquo;element-ui/lib/theme-chalk/index.css&rsquo;;</p>
<p>Vue.use(ElementUI);</p>
</blockquote>
<h2 id="六项目的打包部署">六、项目的打包部署</h2>
<blockquote>
<p>vue run build</p>
</blockquote>
<h2 id="七vueelement-ui实现轮番图">七、Vue+Element-UI实现轮番图</h2>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-html" data-lang="html">&lt;<span style="color:#8b008b;font-weight:bold">template</span>&gt;
    &lt;<span style="color:#8b008b;font-weight:bold">el-row</span> <span style="color:#658b00">class</span>=<span style="color:#cd5555">&#34;warp&#34;</span>&gt;
      &lt;<span style="color:#8b008b;font-weight:bold">el-col</span> <span style="color:#658b00">:span</span>=<span style="color:#cd5555">&#34;12&#34;</span> <span style="color:#658b00">class</span>=<span style="color:#cd5555">&#34;warp-breadcrum&#34;</span>&gt;
        &lt;<span style="color:#8b008b;font-weight:bold">el-carousel</span> <span style="color:#658b00">:interval</span>=<span style="color:#cd5555">&#34;4000&#34;</span> <span style="color:#658b00">type</span>=<span style="color:#cd5555">&#34;card&#34;</span> <span style="color:#658b00">height</span>=<span style="color:#cd5555">&#34;400px&#34;</span>&gt;
          &lt;<span style="color:#8b008b;font-weight:bold">el-carousel-item</span> <span style="color:#658b00">v-for</span>=<span style="color:#cd5555">&#34;item in imagesbox&#34;</span> <span style="color:#658b00">:key</span>=<span style="color:#cd5555">&#34;item.id&#34;</span>&gt;
             &lt;<span style="color:#8b008b;font-weight:bold">img</span> <span style="color:#658b00">:src</span>=<span style="color:#cd5555">&#34;item.idView&#34;</span> <span style="color:#658b00">class</span>=<span style="color:#cd5555">&#34;image&#34;</span> <span style="color:#658b00">width</span>=<span style="color:#cd5555">&#34;100%&#34;</span> <span style="color:#658b00">height</span>=<span style="color:#cd5555">&#34;100%&#34;</span>&gt;
          &lt;/<span style="color:#8b008b;font-weight:bold">el-carousel-item</span>&gt;
        &lt;/<span style="color:#8b008b;font-weight:bold">el-carousel</span>&gt;
      &lt;/<span style="color:#8b008b;font-weight:bold">el-col</span>&gt;
    &lt;/<span style="color:#8b008b;font-weight:bold">el-row</span>&gt;
&lt;/<span style="color:#8b008b;font-weight:bold">template</span>&gt;
&lt;<span style="color:#8b008b;font-weight:bold">script</span>&gt;
  <span style="color:#8b008b;font-weight:bold">export</span> <span style="color:#8b008b;font-weight:bold">default</span>{
    data(){
      <span style="color:#8b008b;font-weight:bold">return</span> {
        imagesbox:[
          {id:<span style="color:#b452cd">0</span>,idView:require(<span style="color:#cd5555">&#34;./assets/1.jpg&#34;</span>)},     
          {id:<span style="color:#b452cd">1</span>,idView:require(<span style="color:#cd5555">&#34;./assets/2.jpg&#34;</span>)},
          {id:<span style="color:#b452cd">2</span>,idView:require(<span style="color:#cd5555">&#34;./assets/3.jpg&#34;</span>)}
          ]
      }
    },
    methods: {

    },
    mounted() {
    }
  }
&lt;/<span style="color:#8b008b;font-weight:bold">script</span>&gt;
&lt;<span style="color:#8b008b;font-weight:bold">style</span>&gt;
#<span style="color:#008b45;text-decoration:underline">app</span> {
  <span style="color:#8b008b;font-weight:bold">font-family</span>: <span style="color:#cd5555">&#39;Avenir&#39;</span>, Helvetica, Arial, <span style="color:#8b008b;font-weight:bold">sans-serif</span>;
  <span style="color:#8b008b;font-weight:bold">-webkit-</span>font-smoothing: antialiased;
  <span style="color:#8b008b;font-weight:bold">-moz-</span>osx-font-smoothing: grayscale;
  <span style="color:#8b008b;font-weight:bold">text-align</span>: <span style="color:#8b008b;font-weight:bold">center</span>;
  <span style="color:#8b008b;font-weight:bold">color</span>: <span style="color:#b452cd">#2c3e50</span>;

}
&lt;/<span style="color:#8b008b;font-weight:bold">style</span>&gt;



</code></pre></div>
</article></div>
    <div class="pad"></div>

    

    <div class="pad">

<div class="date">
    <time pubdate="0001-01-01">January 1, 0001</time>
    <span class="author">学习笔记</span>
</div>

<article>
    <h1><a href="https://example.com/posts/%E5%9C%A8%E7%BA%BF%E6%95%99%E8%82%B2/">在线教育</a></h1>
    <div class="tags">
        
        
        <a href="/tags/%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98" class="pure-button">项目实战</a>
        
        
        <a href="/tags/springboot" class="pure-button">SpringBoot</a>
        
        
        <a href="/tags/springcloud" class="pure-button">SpringCloud</a>
        
        
        <a href="/tags/vue" class="pure-button">Vue</a>
        
    </div>
    <h2 id="一创建父工程">一、创建父工程</h2>
<h3 id="1使用springboot初始化项目">1.使用SpringBoot初始化项目</h3>
<h3 id="2修改pom文件">2.修改pom文件</h3>
<pre><code class="language-pom" data-lang="pom">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;
    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;
    &lt;parent&gt;
        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;
        &lt;version&gt;2.2.7.RELEASE&lt;/version&gt;
        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;
    &lt;/parent&gt;
    &lt;groupId&gt;com.mntc&lt;/groupId&gt;
    &lt;artifactId&gt;guli-demo&lt;/artifactId&gt;
    &lt;packaging&gt;pom&lt;/packaging&gt;
    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;
    &lt;name&gt;guli-demo&lt;/name&gt;
    &lt;description&gt;这是父工程&lt;/description&gt;

    &lt;properties&gt;
        &lt;java.version&gt;1.8&lt;/java.version&gt;
        &lt;guli.version&gt;0.0.1-SNAPSHOT&lt;/guli.version&gt;
        &lt;mybatis-plus.version&gt;3.0.5&lt;/mybatis-plus.version&gt;
        &lt;velocity.version&gt;2.0&lt;/velocity.version&gt;
        &lt;swagger.version&gt;2.7.0&lt;/swagger.version&gt;
        &lt;aliyun.oss.version&gt;2.8.3&lt;/aliyun.oss.version&gt;
        &lt;jodatime.version&gt;2.10.1&lt;/jodatime.version&gt;
        &lt;poi.version&gt;3.17&lt;/poi.version&gt;
        &lt;commons-fileupload.version&gt;1.3.1&lt;/commons-fileupload.version&gt;
        &lt;commons-io.version&gt;2.6&lt;/commons-io.version&gt;
        &lt;httpclient.version&gt;4.5.1&lt;/httpclient.version&gt;
        &lt;jwt.version&gt;0.7.0&lt;/jwt.version&gt;
        &lt;aliyun-java-sdk-core.version&gt;4.3.3&lt;/aliyun-java-sdk-core.version&gt;
        &lt;aliyun-sdk-oss.version&gt;3.1.0&lt;/aliyun-sdk-oss.version&gt;
        &lt;aliyun-java-sdk-vod.version&gt;2.15.2&lt;/aliyun-java-sdk-vod.version&gt;
        &lt;aliyun-java-vod-upload.version&gt;1.4.11&lt;/aliyun-java-vod-upload.version&gt;
        &lt;aliyun-sdk-vod-upload.version&gt;1.4.11&lt;/aliyun-sdk-vod-upload.version&gt;
        &lt;fastjson.version&gt;1.2.28&lt;/fastjson.version&gt;
        &lt;gson.version&gt;2.8.2&lt;/gson.version&gt;
        &lt;json.version&gt;20170516&lt;/json.version&gt;
        &lt;commons-dbutils.version&gt;1.7&lt;/commons-dbutils.version&gt;
        &lt;canal.client.version&gt;1.1.0&lt;/canal.client.version&gt;
        &lt;docker.image.prefix&gt;zx&lt;/docker.image.prefix&gt;
        &lt;cloud-alibaba.version&gt;0.2.2.RELEASE&lt;/cloud-alibaba.version&gt;
    &lt;/properties&gt;

    &lt;dependencyManagement&gt;
        &lt;dependencies&gt;
            &lt;!--Spring Cloud--&gt;
            &lt;dependency&gt;
                &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;
                &lt;artifactId&gt;spring-cloud-dependencies&lt;/artifactId&gt;
                &lt;version&gt;Hoxton.RELEASE&lt;/version&gt;
                &lt;type&gt;pom&lt;/type&gt;
                &lt;scope&gt;import&lt;/scope&gt;
            &lt;/dependency&gt;

            &lt;dependency&gt;
                &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;
                &lt;artifactId&gt;spring-cloud-alibaba-dependencies&lt;/artifactId&gt;
                &lt;version&gt;${cloud-alibaba.version}&lt;/version&gt;
                &lt;type&gt;pom&lt;/type&gt;
                &lt;scope&gt;import&lt;/scope&gt;
            &lt;/dependency&gt;
            &lt;!--mybatis-plus 持久层--&gt;
            &lt;dependency&gt;
                &lt;groupId&gt;com.baomidou&lt;/groupId&gt;
                &lt;artifactId&gt;mybatis-plus-boot-starter&lt;/artifactId&gt;
                &lt;version&gt;${mybatis-plus.version}&lt;/version&gt;
            &lt;/dependency&gt;

            &lt;!-- velocity 模板引擎, Mybatis Plus 代码生成器需要 --&gt;
            &lt;dependency&gt;
                &lt;groupId&gt;org.apache.velocity&lt;/groupId&gt;
                &lt;artifactId&gt;velocity-engine-core&lt;/artifactId&gt;
                &lt;version&gt;${velocity.version}&lt;/version&gt;
            &lt;/dependency&gt;

            &lt;!--swagger--&gt;
            &lt;dependency&gt;
                &lt;groupId&gt;io.springfox&lt;/groupId&gt;
                &lt;artifactId&gt;springfox-swagger2&lt;/artifactId&gt;
                &lt;version&gt;${swagger.version}&lt;/version&gt;
            &lt;/dependency&gt;
            &lt;!--swagger ui--&gt;
            &lt;dependency&gt;
                &lt;groupId&gt;io.springfox&lt;/groupId&gt;
                &lt;artifactId&gt;springfox-swagger-ui&lt;/artifactId&gt;
                &lt;version&gt;${swagger.version}&lt;/version&gt;
            &lt;/dependency&gt;

            &lt;!--aliyunOSS--&gt;
            &lt;dependency&gt;
                &lt;groupId&gt;com.aliyun.oss&lt;/groupId&gt;
                &lt;artifactId&gt;aliyun-sdk-oss&lt;/artifactId&gt;
                &lt;version&gt;${aliyun.oss.version}&lt;/version&gt;
            &lt;/dependency&gt;

            &lt;!--日期时间工具--&gt;
            &lt;dependency&gt;
                &lt;groupId&gt;joda-time&lt;/groupId&gt;
                &lt;artifactId&gt;joda-time&lt;/artifactId&gt;
                &lt;version&gt;${jodatime.version}&lt;/version&gt;
            &lt;/dependency&gt;

            &lt;!--xls--&gt;
            &lt;dependency&gt;
                &lt;groupId&gt;org.apache.poi&lt;/groupId&gt;
                &lt;artifactId&gt;poi&lt;/artifactId&gt;
                &lt;version&gt;${poi.version}&lt;/version&gt;
            &lt;/dependency&gt;
            &lt;!--xlsx--&gt;
            &lt;dependency&gt;
                &lt;groupId&gt;org.apache.poi&lt;/groupId&gt;
                &lt;artifactId&gt;poi-ooxml&lt;/artifactId&gt;
                &lt;version&gt;${poi.version}&lt;/version&gt;
            &lt;/dependency&gt;

            &lt;!--文件上传--&gt;
            &lt;dependency&gt;
                &lt;groupId&gt;commons-fileupload&lt;/groupId&gt;
                &lt;artifactId&gt;commons-fileupload&lt;/artifactId&gt;
                &lt;version&gt;${commons-fileupload.version}&lt;/version&gt;
            &lt;/dependency&gt;

            &lt;!--commons-io--&gt;
            &lt;dependency&gt;
                &lt;groupId&gt;commons-io&lt;/groupId&gt;
                &lt;artifactId&gt;commons-io&lt;/artifactId&gt;
                &lt;version&gt;${commons-io.version}&lt;/version&gt;
            &lt;/dependency&gt;

            &lt;!--httpclient--&gt;
            &lt;dependency&gt;
                &lt;groupId&gt;org.apache.httpcomponents&lt;/groupId&gt;
                &lt;artifactId&gt;httpclient&lt;/artifactId&gt;
                &lt;version&gt;${httpclient.version}&lt;/version&gt;
            &lt;/dependency&gt;

            &lt;dependency&gt;
                &lt;groupId&gt;com.google.code.gson&lt;/groupId&gt;
                &lt;artifactId&gt;gson&lt;/artifactId&gt;
                &lt;version&gt;${gson.version}&lt;/version&gt;
            &lt;/dependency&gt;

            &lt;!-- JWT --&gt;
            &lt;dependency&gt;
                &lt;groupId&gt;io.jsonwebtoken&lt;/groupId&gt;
                &lt;artifactId&gt;jjwt&lt;/artifactId&gt;
                &lt;version&gt;${jwt.version}&lt;/version&gt;
            &lt;/dependency&gt;

            &lt;!--aliyun--&gt;
            &lt;dependency&gt;
                &lt;groupId&gt;com.aliyun&lt;/groupId&gt;
                &lt;artifactId&gt;aliyun-java-sdk-core&lt;/artifactId&gt;
                &lt;version&gt;${aliyun-java-sdk-core.version}&lt;/version&gt;
            &lt;/dependency&gt;
            &lt;dependency&gt;
                &lt;groupId&gt;com.aliyun.oss&lt;/groupId&gt;
                &lt;artifactId&gt;aliyun-sdk-oss&lt;/artifactId&gt;
                &lt;version&gt;${aliyun-sdk-oss.version}&lt;/version&gt;
            &lt;/dependency&gt;
            &lt;dependency&gt;
                &lt;groupId&gt;com.aliyun&lt;/groupId&gt;
                &lt;artifactId&gt;aliyun-java-sdk-vod&lt;/artifactId&gt;
                &lt;version&gt;${aliyun-java-sdk-vod.version}&lt;/version&gt;
            &lt;/dependency&gt;
            &lt;dependency&gt;
                &lt;groupId&gt;com.aliyun&lt;/groupId&gt;
                &lt;artifactId&gt;aliyun-java-vod-upload&lt;/artifactId&gt;
                &lt;version&gt;${aliyun-java-vod-upload.version}&lt;/version&gt;
            &lt;/dependency&gt;
            &lt;dependency&gt;
                &lt;groupId&gt;com.aliyun&lt;/groupId&gt;
                &lt;artifactId&gt;aliyun-sdk-vod-upload&lt;/artifactId&gt;
                &lt;version&gt;${aliyun-sdk-vod-upload.version}&lt;/version&gt;
            &lt;/dependency&gt;
            &lt;dependency&gt;
                &lt;groupId&gt;com.alibaba&lt;/groupId&gt;
                &lt;artifactId&gt;fastjson&lt;/artifactId&gt;
                &lt;version&gt;${fastjson.version}&lt;/version&gt;
            &lt;/dependency&gt;
            &lt;dependency&gt;
                &lt;groupId&gt;org.json&lt;/groupId&gt;
                &lt;artifactId&gt;json&lt;/artifactId&gt;
                &lt;version&gt;${json.version}&lt;/version&gt;
            &lt;/dependency&gt;

            &lt;dependency&gt;
                &lt;groupId&gt;commons-dbutils&lt;/groupId&gt;
                &lt;artifactId&gt;commons-dbutils&lt;/artifactId&gt;
                &lt;version&gt;${commons-dbutils.version}&lt;/version&gt;
            &lt;/dependency&gt;

            &lt;dependency&gt;
                &lt;groupId&gt;com.alibaba.otter&lt;/groupId&gt;
                &lt;artifactId&gt;canal.client&lt;/artifactId&gt;
                &lt;version&gt;${canal.client.version}&lt;/version&gt;
            &lt;/dependency&gt;
        &lt;/dependencies&gt;
    &lt;/dependencyManagement&gt;
    &lt;build&gt;
        &lt;plugins&gt;
            &lt;plugin&gt;
                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;
            &lt;/plugin&gt;
        &lt;/plugins&gt;
    &lt;/build&gt;

&lt;/project&gt;
</code></pre><h3 id="3删除src文件夹">3.删除<strong>src</strong>文件夹</h3>
<h2 id="二使用mybatis-plus逆向生成">二、使用Mybatis-plus逆向生成</h2>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#707a7c">@Test</span>
<span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#00688b;font-weight:bold">void</span> <span style="color:#008b45">run</span>() {

    <span style="color:#228b22">// 1、创建代码生成器
</span><span style="color:#228b22"></span>    AutoGenerator mpg = <span style="color:#8b008b;font-weight:bold">new</span> AutoGenerator();

    <span style="color:#228b22">// 2、全局配置
</span><span style="color:#228b22"></span>    GlobalConfig gc = <span style="color:#8b008b;font-weight:bold">new</span> GlobalConfig();
    String projectPath = System.<span style="color:#658b00">getProperty</span>(<span style="color:#cd5555">&#34;user.dir&#34;</span>);
    gc.<span style="color:#658b00">setOutputDir</span>(<span style="color:#cd5555">&#34;E:\\Users\\admin\\IdeaProjects\\guli-demo\\service-edu&#34;</span> + <span style="color:#cd5555">&#34;/src/main/java&#34;</span>);

    gc.<span style="color:#658b00">setAuthor</span>(<span style="color:#cd5555">&#34;testjava&#34;</span>);
    gc.<span style="color:#658b00">setOpen</span>(<span style="color:#8b008b;font-weight:bold">false</span>); <span style="color:#228b22">//生成后是否打开资源管理器
</span><span style="color:#228b22"></span>    gc.<span style="color:#658b00">setFileOverride</span>(<span style="color:#8b008b;font-weight:bold">false</span>); <span style="color:#228b22">//重新生成时文件是否覆盖
</span><span style="color:#228b22"></span>
    <span style="color:#228b22">//UserServie
</span><span style="color:#228b22"></span>    gc.<span style="color:#658b00">setServiceName</span>(<span style="color:#cd5555">&#34;%sService&#34;</span>);    <span style="color:#228b22">//去掉Service接口的首字母I
</span><span style="color:#228b22"></span>
    gc.<span style="color:#658b00">setIdType</span>(IdType.<span style="color:#658b00">AUTO</span>); <span style="color:#228b22">//主键策略
</span><span style="color:#228b22"></span>    gc.<span style="color:#658b00">setDateType</span>(DateType.<span style="color:#658b00">ONLY_DATE</span>);<span style="color:#228b22">//定义生成的实体类中日期类型
</span><span style="color:#228b22"></span>    <span style="color:#228b22">//gc.setSwagger2(true);//开启Swagger2模式
</span><span style="color:#228b22"></span>
    mpg.<span style="color:#658b00">setGlobalConfig</span>(gc);

    <span style="color:#228b22">// 3、数据源配置
</span><span style="color:#228b22"></span>    DataSourceConfig dsc = <span style="color:#8b008b;font-weight:bold">new</span> DataSourceConfig();
    dsc.<span style="color:#658b00">setUrl</span>(<span style="color:#cd5555">&#34;jdbc:mysql://localhost:3306/mybatis-plus?serverTimezone=GMT%2B8&#34;</span>);
    dsc.<span style="color:#658b00">setDriverName</span>(<span style="color:#cd5555">&#34;com.mysql.cj.jdbc.Driver&#34;</span>);
    dsc.<span style="color:#658b00">setUsername</span>(<span style="color:#cd5555">&#34;root&#34;</span>);
    dsc.<span style="color:#658b00">setPassword</span>(<span style="color:#cd5555">&#34;13733433427&#34;</span>);
    dsc.<span style="color:#658b00">setDbType</span>(DbType.<span style="color:#658b00">MYSQL</span>);
    mpg.<span style="color:#658b00">setDataSource</span>(dsc);

    <span style="color:#228b22">// 4、包配置
</span><span style="color:#228b22"></span>    PackageConfig pc = <span style="color:#8b008b;font-weight:bold">new</span> PackageConfig();
    pc.<span style="color:#658b00">setModuleName</span>(<span style="color:#cd5555">&#34;eduservice&#34;</span>); <span style="color:#228b22">//模块名
</span><span style="color:#228b22"></span>    <span style="color:#228b22">//包  com.atguigu.eduservice
</span><span style="color:#228b22"></span>    pc.<span style="color:#658b00">setParent</span>(<span style="color:#cd5555">&#34;com.mntc&#34;</span>);
    <span style="color:#228b22">//包  com.atguigu.eduservice.controller
</span><span style="color:#228b22"></span>    pc.<span style="color:#658b00">setController</span>(<span style="color:#cd5555">&#34;controller&#34;</span>);
    pc.<span style="color:#658b00">setEntity</span>(<span style="color:#cd5555">&#34;entity&#34;</span>);
    pc.<span style="color:#658b00">setService</span>(<span style="color:#cd5555">&#34;service&#34;</span>);
    pc.<span style="color:#658b00">setMapper</span>(<span style="color:#cd5555">&#34;mapper&#34;</span>);
    mpg.<span style="color:#658b00">setPackageInfo</span>(pc);

    <span style="color:#228b22">// 5、策略配置
</span><span style="color:#228b22"></span>    StrategyConfig strategy = <span style="color:#8b008b;font-weight:bold">new</span> StrategyConfig();

    strategy.<span style="color:#658b00">setInclude</span>(<span style="color:#cd5555">&#34;t_user&#34;</span>);
    strategy.<span style="color:#658b00">setTablePrefix</span>(<span style="color:#cd5555">&#34;t_&#34;</span>);
    strategy.<span style="color:#658b00">setNaming</span>(NamingStrategy.<span style="color:#658b00">underline_to_camel</span>);<span style="color:#228b22">//数据库表映射到实体的命名策略
</span><span style="color:#228b22"></span>    strategy.<span style="color:#658b00">setTablePrefix</span>(pc.<span style="color:#658b00">getModuleName</span>() + <span style="color:#cd5555">&#34;_&#34;</span>); <span style="color:#228b22">//生成实体时去掉表前缀
</span><span style="color:#228b22"></span>
    strategy.<span style="color:#658b00">setColumnNaming</span>(NamingStrategy.<span style="color:#658b00">underline_to_camel</span>);<span style="color:#228b22">//数据库表字段映射到实体的命名策略
</span><span style="color:#228b22"></span>    strategy.<span style="color:#658b00">setEntityLombokModel</span>(<span style="color:#8b008b;font-weight:bold">true</span>); <span style="color:#228b22">// lombok 模型 @Accessors(chain = true) setter链式操作
</span><span style="color:#228b22"></span>
    strategy.<span style="color:#658b00">setRestControllerStyle</span>(<span style="color:#8b008b;font-weight:bold">true</span>); <span style="color:#228b22">//restful api风格控制器
</span><span style="color:#228b22"></span>    strategy.<span style="color:#658b00">setControllerMappingHyphenStyle</span>(<span style="color:#8b008b;font-weight:bold">true</span>); <span style="color:#228b22">//url中驼峰转连字符
</span><span style="color:#228b22"></span>
    mpg.<span style="color:#658b00">setStrategy</span>(strategy);


    <span style="color:#228b22">// 6、执行
</span><span style="color:#228b22"></span>    mpg.<span style="color:#658b00">execute</span>();
}
</code></pre></div><h2 id="三swagger">三、swagger</h2>
<h3 id="1引入依赖">1.引入依赖</h3>
<pre><code>&lt;!-- https://mvnrepository.com/artifact/io.springfox/springfox-swagger2 --&gt;
&lt;dependency&gt;
    &lt;groupId&gt;io.springfox&lt;/groupId&gt;
    &lt;artifactId&gt;springfox-swagger2&lt;/artifactId&gt;
    &lt;version&gt;2.7.0&lt;/version&gt;
&lt;/dependency&gt;
&lt;!-- https://mvnrepository.com/artifact/io.springfox/springfox-swagger-ui --&gt;
&lt;dependency&gt;
    &lt;groupId&gt;io.springfox&lt;/groupId&gt;
    &lt;artifactId&gt;springfox-swagger-ui&lt;/artifactId&gt;
    &lt;version&gt;2.7.0&lt;/version&gt;
&lt;/dependency&gt;
</code></pre><h3 id="2引入相关的配置">2.引入相关的配置</h3>
<pre><code>@Configuration
@MapperScan(&quot;com.mntc.eduservice.mapper&quot;)
@EnableSwagger2
public class MyConfig {
    @Bean
    public Docket petApi() {
        return new Docket(DocumentationType.SWAGGER_2)
                .apiInfo(apiInfo())
                .select()
                .apis(RequestHandlerSelectors.basePackage(&quot;com.mntc.eduservice.controller&quot;)) //指定提供接口所在的基包
                .build();
    }
    /**
     * 该套 API 说明，包含作者、简介、版本、host、服务URL
     * @return
     */
    private ApiInfo apiInfo() {
        return new ApiInfoBuilder()
                .title(&quot;demo api 说明&quot;)
                .contact(new Contact(&quot;allen&quot;,&quot;null&quot;,&quot;name@example.com&quot;))
                .version(&quot;0.1&quot;)
                .termsOfServiceUrl(&quot;localhost:8089/eduService/&quot;)
                .description(&quot;demo api&quot;)
                .build();
    }

}
</code></pre><h3 id="3测试">3.测试</h3>
<blockquote>
<p>http://localhost:8089/swagger-ui.html</p>
</blockquote>
<h2 id="四项目中日志和日期格式化问题">四、项目中日志和日期格式化问题</h2>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#228b22">#返回json的全局时间格式</span><span style="color:#bbb">
</span><span style="color:#bbb"></span><span style="color:#8b008b;font-weight:bold">spring</span>:<span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#8b008b;font-weight:bold">jackson</span>:<span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#8b008b;font-weight:bold">date-format</span>:<span style="color:#bbb"> </span>yyyy-MM-dd<span style="color:#bbb"> </span>HH:mm:ss<span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#8b008b;font-weight:bold">time-zone</span>:<span style="color:#bbb"> </span>GMT<span style="color:#b452cd">+8</span><span style="color:#bbb">
</span><span style="color:#bbb"></span><span style="color:#228b22">#mybatis日志</span><span style="color:#bbb">
</span><span style="color:#bbb"></span><span style="color:#8b008b;font-weight:bold">mybatis-plus</span>:<span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#8b008b;font-weight:bold">configuration</span>:<span style="color:#bbb">
</span><span style="color:#bbb">        </span><span style="color:#8b008b;font-weight:bold">log-impl</span>:<span style="color:#bbb"> </span>org.apache.ibatis.logging.stdout.StdOutImpl<span style="color:#bbb">
</span></code></pre></div><h2 id="五配置分页查询">五、配置分页查询</h2>
<h3 id="1添加插件">1.添加插件</h3>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#228b22">//Spring boot方式
</span><span style="color:#228b22"></span><span style="color:#707a7c">@EnableTransactionManagement</span>
<span style="color:#707a7c">@Configuration</span>
<span style="color:#707a7c">@MapperScan</span>(<span style="color:#cd5555">&#34;com.baomidou.cloud.service.*.mapper*&#34;</span>)
<span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#8b008b;font-weight:bold">class</span> <span style="color:#008b45;font-weight:bold">MybatisPlusConfig</span> {

    <span style="color:#228b22">/**
</span><span style="color:#228b22">     * 配置分页查询插件
</span><span style="color:#228b22">     * @return
</span><span style="color:#228b22">     */</span>
    <span style="color:#707a7c">@Bean</span>
    <span style="color:#8b008b;font-weight:bold">public</span> PaginationInterceptor <span style="color:#008b45">paginationInterceptor</span>() {
        <span style="color:#8b008b;font-weight:bold">return</span>  <span style="color:#8b008b;font-weight:bold">new</span> PaginationInterceptor();
    }
}
</code></pre></div><h3 id="2实现分页查询">2.实现分页查询</h3>
<pre><code>/**
 * 分页查询
 * @param current
 * @param limit
 * @return
 */
@ApiOperation(value=&quot;分页查询&quot;)
@GetMapping(&quot;pageListTeacher/{current}/{limit}&quot;)
public CommonResult&lt;List&lt;User&gt;&gt; pageListTeacher(@PathVariable Integer current,@PathVariable Integer limit){
    limit=limit==null?1:limit;
    limit=limit==null?3:limit;
    IPage&lt;User&gt; page = userService.page(new Page&lt;User&gt;(current, limit), null);
    List&lt;User&gt; records = page.getRecords();
    if(records==null){
        return new CommonResult&lt;&gt;(false,&quot;分页查询失败&quot;);
    }
    return new CommonResult&lt;&gt;(true,&quot;分页查询成功&quot;,records);
}
</code></pre><h2 id="六多条件组合带分页查询">六、多条件组合带分页查询</h2>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#707a7c">@PostMapping</span>(<span style="color:#cd5555">&#34;pageUserCondition/{current}/{limit}&#34;</span>)
    <span style="color:#8b008b;font-weight:bold">public</span> CommonResult&lt;List&lt;User&gt;&gt; <span style="color:#008b45">pageUserCondition</span>(<span style="color:#707a7c">@PathVariable</span> Integer current, <span style="color:#707a7c">@PathVariable</span> Integer limit,<span style="color:#707a7c">@RequestBody</span>(required = <span style="color:#8b008b;font-weight:bold">false</span>) UserQuery userQuery){
        current = current==<span style="color:#8b008b;font-weight:bold">null</span>?1:current;
        limit = limit==<span style="color:#8b008b;font-weight:bold">null</span>?3:limit;

        QueryWrapper&lt;User&gt; wrapper = <span style="color:#8b008b;font-weight:bold">new</span> QueryWrapper();
        String name = userQuery.<span style="color:#658b00">getName</span>();
        Integer age = userQuery.<span style="color:#658b00">getAge</span>();
        String email = userQuery.<span style="color:#658b00">getEmail</span>();
       <span style="color:#8b008b;font-weight:bold">if</span>(!StringUtils.<span style="color:#658b00">isEmpty</span>(name)){
           wrapper.<span style="color:#658b00">like</span>(<span style="color:#cd5555">&#34;name&#34;</span>,name);
       }

        <span style="color:#8b008b;font-weight:bold">if</span>(!StringUtils.<span style="color:#658b00">isEmpty</span>(age)){
            wrapper.<span style="color:#658b00">eq</span>(<span style="color:#cd5555">&#34;age&#34;</span>,age);
        }

        <span style="color:#8b008b;font-weight:bold">if</span>(!StringUtils.<span style="color:#658b00">isEmpty</span>(email)){
            wrapper.<span style="color:#658b00">eq</span>(<span style="color:#cd5555">&#34;email&#34;</span>,email);
        }

        IPage&lt;User&gt; page = userService.<span style="color:#658b00">page</span>(<span style="color:#8b008b;font-weight:bold">new</span> Page&lt;User&gt;(current, limit), wrapper);
        List&lt;User&gt; records = page.<span style="color:#658b00">getRecords</span>();

        <span style="color:#8b008b;font-weight:bold">if</span>(records==<span style="color:#8b008b;font-weight:bold">null</span>){
            <span style="color:#8b008b;font-weight:bold">return</span> <span style="color:#8b008b;font-weight:bold">new</span> CommonResult&lt;&gt;(<span style="color:#8b008b;font-weight:bold">false</span>,<span style="color:#cd5555">&#34;分页查询失败&#34;</span>);
        }
        <span style="color:#8b008b;font-weight:bold">return</span> <span style="color:#8b008b;font-weight:bold">new</span> CommonResult&lt;&gt;(<span style="color:#8b008b;font-weight:bold">true</span>,<span style="color:#cd5555">&#34;分页查询成功&#34;</span>,records);
    }
</code></pre></div><h2 id="七数据的自动填充">七、数据的自动填充</h2>
<h3 id="1编写一个配置类">1.编写一个配置类</h3>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#8b008b;font-weight:bold">package</span> <span style="color:#008b45;text-decoration:underline">com.mntc.eduservice.handle</span>;

<span style="color:#8b008b;font-weight:bold">import</span> <span style="color:#008b45;text-decoration:underline">com.baomidou.mybatisplus.core.handlers.MetaObjectHandler</span>;
<span style="color:#8b008b;font-weight:bold">import</span> <span style="color:#008b45;text-decoration:underline">lombok.extern.slf4j.Slf4j</span>;
<span style="color:#8b008b;font-weight:bold">import</span> <span style="color:#008b45;text-decoration:underline">org.apache.ibatis.reflection.MetaObject</span>;
<span style="color:#8b008b;font-weight:bold">import</span> <span style="color:#008b45;text-decoration:underline">org.springframework.stereotype.Component</span>;

<span style="color:#8b008b;font-weight:bold">import</span> <span style="color:#008b45;text-decoration:underline">java.util.Date</span>;

<span style="color:#228b22">/**
</span><span style="color:#228b22"> * 自动填充
</span><span style="color:#228b22"> */</span>
<span style="color:#707a7c">@Slf4j</span>
<span style="color:#707a7c">@Component</span>
<span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#8b008b;font-weight:bold">class</span> <span style="color:#008b45;font-weight:bold">MyMetaObjectHandler</span> <span style="color:#8b008b;font-weight:bold">implements</span> MetaObjectHandler {
    <span style="color:#707a7c">@Override</span>
    <span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#00688b;font-weight:bold">void</span> <span style="color:#008b45">insertFill</span>(MetaObject metaObject) {
        <span style="color:#8b008b;font-weight:bold">this</span>.<span style="color:#658b00">setFieldValByName</span>(<span style="color:#cd5555">&#34;createTime&#34;</span>,<span style="color:#8b008b;font-weight:bold">new</span> Date(),metaObject);
        <span style="color:#8b008b;font-weight:bold">this</span>.<span style="color:#658b00">setFieldValByName</span>(<span style="color:#cd5555">&#34;updateTime&#34;</span>,<span style="color:#8b008b;font-weight:bold">new</span> Date(),metaObject);
    }
    <span style="color:#707a7c">@Override</span>
    <span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#00688b;font-weight:bold">void</span> <span style="color:#008b45">updateFill</span>(MetaObject metaObject) {
        <span style="color:#8b008b;font-weight:bold">this</span>.<span style="color:#658b00">setFieldValByName</span>(<span style="color:#cd5555">&#34;updateTime&#34;</span>,<span style="color:#8b008b;font-weight:bold">new</span> Date(),metaObject);
    }
}
</code></pre></div><h3 id="2在实体类上添加注解">2.在实体类上添加注解</h3>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#707a7c">@TableField</span>(fill = FieldFill.<span style="color:#658b00">INSERT</span>)
<span style="color:#8b008b;font-weight:bold">private</span> Date createTime;

<span style="color:#707a7c">@TableField</span>(fill = FieldFill.<span style="color:#658b00">INSERT_UPDATE</span>)
<span style="color:#8b008b;font-weight:bold">private</span> Date updateTime;
</code></pre></div><h2 id="八逻辑删除">八、逻辑删除</h2>
<p>1.全局配置文件<code>application.yml</code>中天界配置</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#8b008b;font-weight:bold">mybatis-plus</span>:<span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#8b008b;font-weight:bold">global-config</span>:<span style="color:#bbb">
</span><span style="color:#bbb">        </span><span style="color:#8b008b;font-weight:bold">db-config</span>:<span style="color:#bbb">
</span><span style="color:#bbb">            </span><span style="color:#8b008b;font-weight:bold">logic-delete-field</span>:<span style="color:#bbb"> </span>deleted<span style="color:#bbb">  </span><span style="color:#228b22">#全局逻辑删除字段值 3.3.0开始支持，详情看下面。</span><span style="color:#bbb">
</span><span style="color:#bbb">            </span><span style="color:#8b008b;font-weight:bold">logic-delete-value</span>:<span style="color:#bbb"> </span><span style="color:#b452cd">1</span><span style="color:#bbb"> </span><span style="color:#228b22"># 逻辑已删除值(默认为 1)</span><span style="color:#bbb">
</span><span style="color:#bbb">            </span><span style="color:#8b008b;font-weight:bold">logic-not-delete-value</span>:<span style="color:#bbb"> </span><span style="color:#b452cd">0</span><span style="color:#bbb"> </span><span style="color:#228b22"># 逻辑未删除值(默认为 0)</span><span style="color:#bbb">
</span></code></pre></div><p>2.添加插件(高版本中不需要)</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#228b22">/**
</span><span style="color:#228b22"> * 逻辑删除
</span><span style="color:#228b22"> */</span>
<span style="color:#707a7c">@Bean</span>
<span style="color:#8b008b;font-weight:bold">public</span> ISqlInjector <span style="color:#008b45">sqlInjector</span>(){
    <span style="color:#8b008b;font-weight:bold">return</span> <span style="color:#8b008b;font-weight:bold">new</span> LogicSqlInjector();
}
</code></pre></div><p>3.实体类上添加注解</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#707a7c">@TableLogic</span>
<span style="color:#8b008b;font-weight:bold">private</span> Integer deleted;
</code></pre></div><p><code>注意低版本中会存在Bug：无论删除是否成功，返回的都是true</code></p>
<h2 id="九统一结果返回">九、统一结果返回</h2>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#8b008b;font-weight:bold">package</span> <span style="color:#008b45;text-decoration:underline">com.mntc.eduservice.entity</span>;

<span style="color:#8b008b;font-weight:bold">import</span> <span style="color:#008b45;text-decoration:underline">lombok.AllArgsConstructor</span>;
<span style="color:#8b008b;font-weight:bold">import</span> <span style="color:#008b45;text-decoration:underline">lombok.Data</span>;
<span style="color:#8b008b;font-weight:bold">import</span> <span style="color:#008b45;text-decoration:underline">lombok.NoArgsConstructor</span>;
<span style="color:#8b008b;font-weight:bold">import</span> <span style="color:#008b45;text-decoration:underline">lombok.ToString</span>;

<span style="color:#707a7c">@Data</span>
<span style="color:#707a7c">@AllArgsConstructor</span>
<span style="color:#707a7c">@NoArgsConstructor</span>
<span style="color:#707a7c">@ToString</span>
<span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#8b008b;font-weight:bold">class</span> <span style="color:#008b45;font-weight:bold">CommonResult</span>&lt;T&gt; {
    <span style="color:#8b008b;font-weight:bold">private</span> <span style="color:#00688b;font-weight:bold">boolean</span> status;
    <span style="color:#8b008b;font-weight:bold">private</span> String message;
    <span style="color:#8b008b;font-weight:bold">private</span> T data;

    <span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#008b45">CommonResult</span>(<span style="color:#00688b;font-weight:bold">boolean</span> status, String message) {
        <span style="color:#8b008b;font-weight:bold">this</span>.<span style="color:#658b00">status</span> = status;
        <span style="color:#8b008b;font-weight:bold">this</span>.<span style="color:#658b00">message</span> = message;
    }
}
</code></pre></div><h2 id="十异常处理类">十、异常处理类</h2>
<h3 id="1全局异常处理">1.全局异常处理</h3>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#8b008b;font-weight:bold">package</span> <span style="color:#008b45;text-decoration:underline">com.mntc.eduservice.exceptionHandler</span>;

<span style="color:#8b008b;font-weight:bold">import</span> <span style="color:#008b45;text-decoration:underline">com.mntc.eduservice.entity.CommonResult</span>;
<span style="color:#8b008b;font-weight:bold">import</span> <span style="color:#008b45;text-decoration:underline">org.springframework.web.bind.annotation.ControllerAdvice</span>;
<span style="color:#8b008b;font-weight:bold">import</span> <span style="color:#008b45;text-decoration:underline">org.springframework.web.bind.annotation.ExceptionHandler</span>;
<span style="color:#8b008b;font-weight:bold">import</span> <span style="color:#008b45;text-decoration:underline">org.springframework.web.bind.annotation.ResponseBody</span>;

<span style="color:#707a7c">@ControllerAdvice</span>
<span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#8b008b;font-weight:bold">class</span> <span style="color:#008b45;font-weight:bold">GlobalExceptionHandler</span> {

    <span style="color:#228b22">/**
</span><span style="color:#228b22">     * 指定出现什么异常时会执行这个方法（Exception:表示会拦截所有的异常）
</span><span style="color:#228b22">     * @param e
</span><span style="color:#228b22">     * @return
</span><span style="color:#228b22">     */</span>
    <span style="color:#707a7c">@ExceptionHandler</span>(Exception.<span style="color:#658b00">class</span>)
    <span style="color:#707a7c">@ResponseBody</span>
    <span style="color:#8b008b;font-weight:bold">public</span> CommonResult&lt;Object&gt; <span style="color:#008b45">error</span>(Exception e){
        e.<span style="color:#658b00">printStackTrace</span>();
        <span style="color:#8b008b;font-weight:bold">return</span> <span style="color:#8b008b;font-weight:bold">new</span> CommonResult&lt;&gt;(<span style="color:#8b008b;font-weight:bold">false</span>,<span style="color:#cd5555">&#34;程序中出现异常&#34;</span>);
    }
}
</code></pre></div><h3 id="2特殊异常处理">2.特殊异常处理</h3>
<pre><code>/**
 * 指定出现什么异常时会执行这个方法（Exception:表示会拦截所有的异常）
 * @param e
 * @return
 */
@ExceptionHandler(ArithmeticException.class)
@ResponseBody
public CommonResult&lt;Object&gt; error1(Exception e){
    e.printStackTrace();
    return new CommonResult&lt;&gt;(false,&quot;程序中出现异常&quot;);
}
</code></pre><h3 id="3自定义异常处理">3.自定义异常处理</h3>
<p>编写自定义异常处理类</p>
<pre><code>package com.mntc.eduservice.exception;

import lombok.AllArgsConstructor;
import lombok.Data;
import lombok.NoArgsConstructor;
import lombok.ToString;

@Data
@AllArgsConstructor
@NoArgsConstructor
@ToString
public class UserException extends  RuntimeException{
    private Integer code;
    private String msg;

}
</code></pre><p>在程序中抛出异常</p>
<pre><code>/**
 * 查询所有
 * @return
 */
@ApiOperation(value=&quot;查询所有&quot;)
@GetMapping(&quot;getAll&quot;)
public CommonResult&lt;List&lt;User&gt;&gt; get(){

    List&lt;User&gt; users = userService.list(null);
    if(users==null){

        return new CommonResult&lt;&gt;(false,&quot;查询失败&quot;);
    }
    throw new UserException(404,&quot;自动逸异常&quot;);
    //return new CommonResult&lt;&gt;(true,&quot;查询成功&quot;,users);
}
</code></pre><p>拦截异常</p>
<pre><code>/**
 * 指定出现什么异常时会执行这个方法（Exception:表示会拦截所有的异常）
 * @param e
 * @return
 */
@ExceptionHandler(UserException.class)
@ResponseBody
public CommonResult&lt;Object&gt; error2(Exception e){
    e.printStackTrace();
    return new CommonResult&lt;&gt;(false,&quot;这是自定义异常&quot;);
}
</code></pre><h2 id="十一日志处理">十一、日志处理</h2>
<p>1.主配置文件中关于日志的配置</p>
<p>2.在resource中配置文件<code>logback-spring.xml</code></p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml"><span style="color:#1e889b">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;</span>
<span style="color:#8b008b;font-weight:bold">&lt;configuration</span>  <span style="color:#658b00">scan=</span><span style="color:#cd5555">&#34;true&#34;</span> <span style="color:#658b00">scanPeriod=</span><span style="color:#cd5555">&#34;10 seconds&#34;</span><span style="color:#8b008b;font-weight:bold">&gt;</span>
    <span style="color:#228b22">&lt;!-- 日志级别从低到高分为TRACE &lt; DEBUG &lt; INFO &lt; WARN &lt; ERROR &lt; FATAL，如果设置为WARN，则低于WARN的信息都不会输出 --&gt;</span>
    <span style="color:#228b22">&lt;!-- scan:当此属性设置为true时，配置文件如果发生改变，将会被重新加载，默认值为true --&gt;</span>
    <span style="color:#228b22">&lt;!-- scanPeriod:设置监测配置文件是否有修改的时间间隔，如果没有给出时间单位，默认单位是毫秒。当scan为true时，此属性生效。默认的时间间隔为1分钟。 --&gt;</span>
    <span style="color:#228b22">&lt;!-- debug:当此属性设置为true时，将打印出logback内部日志信息，实时查看logback运行状态。默认值为false。 --&gt;</span>

    <span style="color:#8b008b;font-weight:bold">&lt;contextName&gt;</span>logback<span style="color:#8b008b;font-weight:bold">&lt;/contextName&gt;</span>
    <span style="color:#228b22">&lt;!-- name的值是变量的名称，value的值时变量定义的值。通过定义的值会被插入到logger上下文中。定义变量后，可以使“${}”来使用变量。 --&gt;</span>
    <span style="color:#8b008b;font-weight:bold">&lt;property</span> <span style="color:#658b00">name=</span><span style="color:#cd5555">&#34;log.path&#34;</span> <span style="color:#658b00">value=</span><span style="color:#cd5555">&#34;D:/guli_1010/edu&#34;</span> <span style="color:#8b008b;font-weight:bold">/&gt;</span>

    <span style="color:#228b22">&lt;!-- 彩色日志 --&gt;</span>
    <span style="color:#228b22">&lt;!-- 配置格式变量：CONSOLE_LOG_PATTERN 彩色日志格式 --&gt;</span>
    <span style="color:#228b22">&lt;!-- magenta:洋红 --&gt;</span>
    <span style="color:#228b22">&lt;!-- boldMagenta:粗红--&gt;</span>
    <span style="color:#228b22">&lt;!-- cyan:青色 --&gt;</span>
    <span style="color:#228b22">&lt;!-- white:白色 --&gt;</span>
    <span style="color:#228b22">&lt;!-- magenta:洋红 --&gt;</span>
    <span style="color:#8b008b;font-weight:bold">&lt;property</span> <span style="color:#658b00">name=</span><span style="color:#cd5555">&#34;CONSOLE_LOG_PATTERN&#34;</span>
              <span style="color:#658b00">value=</span><span style="color:#cd5555">&#34;%yellow(%date{yyyy-MM-dd HH:mm:ss}) |%highlight(%-5level) |%blue(%thread) |%blue(%file:%line) |%green(%logger) |%cyan(%msg%n)&#34;</span><span style="color:#8b008b;font-weight:bold">/&gt;</span>


    <span style="color:#228b22">&lt;!--输出到控制台--&gt;</span>
    <span style="color:#8b008b;font-weight:bold">&lt;appender</span> <span style="color:#658b00">name=</span><span style="color:#cd5555">&#34;CONSOLE&#34;</span> <span style="color:#658b00">class=</span><span style="color:#cd5555">&#34;ch.qos.logback.core.ConsoleAppender&#34;</span><span style="color:#8b008b;font-weight:bold">&gt;</span>
        <span style="color:#228b22">&lt;!--此日志appender是为开发使用，只配置最底级别，控制台输出的日志级别是大于或等于此级别的日志信息--&gt;</span>
        <span style="color:#228b22">&lt;!-- 例如：如果此处配置了INFO级别，则后面其他位置即使配置了DEBUG级别的日志，也不会被输出 --&gt;</span>
        <span style="color:#8b008b;font-weight:bold">&lt;filter</span> <span style="color:#658b00">class=</span><span style="color:#cd5555">&#34;ch.qos.logback.classic.filter.ThresholdFilter&#34;</span><span style="color:#8b008b;font-weight:bold">&gt;</span>
            <span style="color:#8b008b;font-weight:bold">&lt;level&gt;</span>INFO<span style="color:#8b008b;font-weight:bold">&lt;/level&gt;</span>
        <span style="color:#8b008b;font-weight:bold">&lt;/filter&gt;</span>
        <span style="color:#8b008b;font-weight:bold">&lt;encoder&gt;</span>
            <span style="color:#8b008b;font-weight:bold">&lt;Pattern&gt;</span>${CONSOLE_LOG_PATTERN}<span style="color:#8b008b;font-weight:bold">&lt;/Pattern&gt;</span>
            <span style="color:#228b22">&lt;!-- 设置字符集 --&gt;</span>
            <span style="color:#8b008b;font-weight:bold">&lt;charset&gt;</span>UTF-8<span style="color:#8b008b;font-weight:bold">&lt;/charset&gt;</span>
        <span style="color:#8b008b;font-weight:bold">&lt;/encoder&gt;</span>
    <span style="color:#8b008b;font-weight:bold">&lt;/appender&gt;</span>


    <span style="color:#228b22">&lt;!--输出到文件--&gt;</span>

    <span style="color:#228b22">&lt;!-- 时间滚动输出 level为 INFO 日志 --&gt;</span>
    <span style="color:#8b008b;font-weight:bold">&lt;appender</span> <span style="color:#658b00">name=</span><span style="color:#cd5555">&#34;INFO_FILE&#34;</span> <span style="color:#658b00">class=</span><span style="color:#cd5555">&#34;ch.qos.logback.core.rolling.RollingFileAppender&#34;</span><span style="color:#8b008b;font-weight:bold">&gt;</span>
        <span style="color:#228b22">&lt;!-- 正在记录的日志文件的路径及文件名 --&gt;</span>
        <span style="color:#8b008b;font-weight:bold">&lt;file&gt;</span>${log.path}/log_info.log<span style="color:#8b008b;font-weight:bold">&lt;/file&gt;</span>
        <span style="color:#228b22">&lt;!--日志文件输出格式--&gt;</span>
        <span style="color:#8b008b;font-weight:bold">&lt;encoder&gt;</span>
            <span style="color:#8b008b;font-weight:bold">&lt;pattern&gt;</span>%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{50} - %msg%n<span style="color:#8b008b;font-weight:bold">&lt;/pattern&gt;</span>
            <span style="color:#8b008b;font-weight:bold">&lt;charset&gt;</span>UTF-8<span style="color:#8b008b;font-weight:bold">&lt;/charset&gt;</span>
        <span style="color:#8b008b;font-weight:bold">&lt;/encoder&gt;</span>
        <span style="color:#228b22">&lt;!-- 日志记录器的滚动策略，按日期，按大小记录 --&gt;</span>
        <span style="color:#8b008b;font-weight:bold">&lt;rollingPolicy</span> <span style="color:#658b00">class=</span><span style="color:#cd5555">&#34;ch.qos.logback.core.rolling.TimeBasedRollingPolicy&#34;</span><span style="color:#8b008b;font-weight:bold">&gt;</span>
            <span style="color:#228b22">&lt;!-- 每天日志归档路径以及格式 --&gt;</span>
            <span style="color:#8b008b;font-weight:bold">&lt;fileNamePattern&gt;</span>${log.path}/info/log-info-%d{yyyy-MM-dd}.%i.log<span style="color:#8b008b;font-weight:bold">&lt;/fileNamePattern&gt;</span>
            <span style="color:#8b008b;font-weight:bold">&lt;timeBasedFileNamingAndTriggeringPolicy</span> <span style="color:#658b00">class=</span><span style="color:#cd5555">&#34;ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP&#34;</span><span style="color:#8b008b;font-weight:bold">&gt;</span>
                <span style="color:#8b008b;font-weight:bold">&lt;maxFileSize&gt;</span>100MB<span style="color:#8b008b;font-weight:bold">&lt;/maxFileSize&gt;</span>
            <span style="color:#8b008b;font-weight:bold">&lt;/timeBasedFileNamingAndTriggeringPolicy&gt;</span>
            <span style="color:#228b22">&lt;!--日志文件保留天数--&gt;</span>
            <span style="color:#8b008b;font-weight:bold">&lt;maxHistory&gt;</span>15<span style="color:#8b008b;font-weight:bold">&lt;/maxHistory&gt;</span>
        <span style="color:#8b008b;font-weight:bold">&lt;/rollingPolicy&gt;</span>
        <span style="color:#228b22">&lt;!-- 此日志文件只记录info级别的 --&gt;</span>
        <span style="color:#8b008b;font-weight:bold">&lt;filter</span> <span style="color:#658b00">class=</span><span style="color:#cd5555">&#34;ch.qos.logback.classic.filter.LevelFilter&#34;</span><span style="color:#8b008b;font-weight:bold">&gt;</span>
            <span style="color:#8b008b;font-weight:bold">&lt;level&gt;</span>INFO<span style="color:#8b008b;font-weight:bold">&lt;/level&gt;</span>
            <span style="color:#8b008b;font-weight:bold">&lt;onMatch&gt;</span>ACCEPT<span style="color:#8b008b;font-weight:bold">&lt;/onMatch&gt;</span>
            <span style="color:#8b008b;font-weight:bold">&lt;onMismatch&gt;</span>DENY<span style="color:#8b008b;font-weight:bold">&lt;/onMismatch&gt;</span>
        <span style="color:#8b008b;font-weight:bold">&lt;/filter&gt;</span>
    <span style="color:#8b008b;font-weight:bold">&lt;/appender&gt;</span>

    <span style="color:#228b22">&lt;!-- 时间滚动输出 level为 WARN 日志 --&gt;</span>
    <span style="color:#8b008b;font-weight:bold">&lt;appender</span> <span style="color:#658b00">name=</span><span style="color:#cd5555">&#34;WARN_FILE&#34;</span> <span style="color:#658b00">class=</span><span style="color:#cd5555">&#34;ch.qos.logback.core.rolling.RollingFileAppender&#34;</span><span style="color:#8b008b;font-weight:bold">&gt;</span>
        <span style="color:#228b22">&lt;!-- 正在记录的日志文件的路径及文件名 --&gt;</span>
        <span style="color:#8b008b;font-weight:bold">&lt;file&gt;</span>${log.path}/log_warn.log<span style="color:#8b008b;font-weight:bold">&lt;/file&gt;</span>
        <span style="color:#228b22">&lt;!--日志文件输出格式--&gt;</span>
        <span style="color:#8b008b;font-weight:bold">&lt;encoder&gt;</span>
            <span style="color:#8b008b;font-weight:bold">&lt;pattern&gt;</span>%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{50} - %msg%n<span style="color:#8b008b;font-weight:bold">&lt;/pattern&gt;</span>
            <span style="color:#8b008b;font-weight:bold">&lt;charset&gt;</span>UTF-8<span style="color:#8b008b;font-weight:bold">&lt;/charset&gt;</span> <span style="color:#228b22">&lt;!-- 此处设置字符集 --&gt;</span>
        <span style="color:#8b008b;font-weight:bold">&lt;/encoder&gt;</span>
        <span style="color:#228b22">&lt;!-- 日志记录器的滚动策略，按日期，按大小记录 --&gt;</span>
        <span style="color:#8b008b;font-weight:bold">&lt;rollingPolicy</span> <span style="color:#658b00">class=</span><span style="color:#cd5555">&#34;ch.qos.logback.core.rolling.TimeBasedRollingPolicy&#34;</span><span style="color:#8b008b;font-weight:bold">&gt;</span>
            <span style="color:#8b008b;font-weight:bold">&lt;fileNamePattern&gt;</span>${log.path}/warn/log-warn-%d{yyyy-MM-dd}.%i.log<span style="color:#8b008b;font-weight:bold">&lt;/fileNamePattern&gt;</span>
            <span style="color:#8b008b;font-weight:bold">&lt;timeBasedFileNamingAndTriggeringPolicy</span> <span style="color:#658b00">class=</span><span style="color:#cd5555">&#34;ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP&#34;</span><span style="color:#8b008b;font-weight:bold">&gt;</span>
                <span style="color:#8b008b;font-weight:bold">&lt;maxFileSize&gt;</span>100MB<span style="color:#8b008b;font-weight:bold">&lt;/maxFileSize&gt;</span>
            <span style="color:#8b008b;font-weight:bold">&lt;/timeBasedFileNamingAndTriggeringPolicy&gt;</span>
            <span style="color:#228b22">&lt;!--日志文件保留天数--&gt;</span>
            <span style="color:#8b008b;font-weight:bold">&lt;maxHistory&gt;</span>15<span style="color:#8b008b;font-weight:bold">&lt;/maxHistory&gt;</span>
        <span style="color:#8b008b;font-weight:bold">&lt;/rollingPolicy&gt;</span>
        <span style="color:#228b22">&lt;!-- 此日志文件只记录warn级别的 --&gt;</span>
        <span style="color:#8b008b;font-weight:bold">&lt;filter</span> <span style="color:#658b00">class=</span><span style="color:#cd5555">&#34;ch.qos.logback.classic.filter.LevelFilter&#34;</span><span style="color:#8b008b;font-weight:bold">&gt;</span>
            <span style="color:#8b008b;font-weight:bold">&lt;level&gt;</span>warn<span style="color:#8b008b;font-weight:bold">&lt;/level&gt;</span>
            <span style="color:#8b008b;font-weight:bold">&lt;onMatch&gt;</span>ACCEPT<span style="color:#8b008b;font-weight:bold">&lt;/onMatch&gt;</span>
            <span style="color:#8b008b;font-weight:bold">&lt;onMismatch&gt;</span>DENY<span style="color:#8b008b;font-weight:bold">&lt;/onMismatch&gt;</span>
        <span style="color:#8b008b;font-weight:bold">&lt;/filter&gt;</span>
    <span style="color:#8b008b;font-weight:bold">&lt;/appender&gt;</span>


    <span style="color:#228b22">&lt;!-- 时间滚动输出 level为 ERROR 日志 --&gt;</span>
    <span style="color:#8b008b;font-weight:bold">&lt;appender</span> <span style="color:#658b00">name=</span><span style="color:#cd5555">&#34;ERROR_FILE&#34;</span> <span style="color:#658b00">class=</span><span style="color:#cd5555">&#34;ch.qos.logback.core.rolling.RollingFileAppender&#34;</span><span style="color:#8b008b;font-weight:bold">&gt;</span>
        <span style="color:#228b22">&lt;!-- 正在记录的日志文件的路径及文件名 --&gt;</span>
        <span style="color:#8b008b;font-weight:bold">&lt;file&gt;</span>${log.path}/log_error.log<span style="color:#8b008b;font-weight:bold">&lt;/file&gt;</span>
        <span style="color:#228b22">&lt;!--日志文件输出格式--&gt;</span>
        <span style="color:#8b008b;font-weight:bold">&lt;encoder&gt;</span>
            <span style="color:#8b008b;font-weight:bold">&lt;pattern&gt;</span>%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{50} - %msg%n<span style="color:#8b008b;font-weight:bold">&lt;/pattern&gt;</span>
            <span style="color:#8b008b;font-weight:bold">&lt;charset&gt;</span>UTF-8<span style="color:#8b008b;font-weight:bold">&lt;/charset&gt;</span> <span style="color:#228b22">&lt;!-- 此处设置字符集 --&gt;</span>
        <span style="color:#8b008b;font-weight:bold">&lt;/encoder&gt;</span>
        <span style="color:#228b22">&lt;!-- 日志记录器的滚动策略，按日期，按大小记录 --&gt;</span>
        <span style="color:#8b008b;font-weight:bold">&lt;rollingPolicy</span> <span style="color:#658b00">class=</span><span style="color:#cd5555">&#34;ch.qos.logback.core.rolling.TimeBasedRollingPolicy&#34;</span><span style="color:#8b008b;font-weight:bold">&gt;</span>
            <span style="color:#8b008b;font-weight:bold">&lt;fileNamePattern&gt;</span>${log.path}/error/log-error-%d{yyyy-MM-dd}.%i.log<span style="color:#8b008b;font-weight:bold">&lt;/fileNamePattern&gt;</span>
            <span style="color:#8b008b;font-weight:bold">&lt;timeBasedFileNamingAndTriggeringPolicy</span> <span style="color:#658b00">class=</span><span style="color:#cd5555">&#34;ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP&#34;</span><span style="color:#8b008b;font-weight:bold">&gt;</span>
                <span style="color:#8b008b;font-weight:bold">&lt;maxFileSize&gt;</span>100MB<span style="color:#8b008b;font-weight:bold">&lt;/maxFileSize&gt;</span>
            <span style="color:#8b008b;font-weight:bold">&lt;/timeBasedFileNamingAndTriggeringPolicy&gt;</span>
            <span style="color:#228b22">&lt;!--日志文件保留天数--&gt;</span>
            <span style="color:#8b008b;font-weight:bold">&lt;maxHistory&gt;</span>15<span style="color:#8b008b;font-weight:bold">&lt;/maxHistory&gt;</span>
        <span style="color:#8b008b;font-weight:bold">&lt;/rollingPolicy&gt;</span>
        <span style="color:#228b22">&lt;!-- 此日志文件只记录ERROR级别的 --&gt;</span>
        <span style="color:#8b008b;font-weight:bold">&lt;filter</span> <span style="color:#658b00">class=</span><span style="color:#cd5555">&#34;ch.qos.logback.classic.filter.LevelFilter&#34;</span><span style="color:#8b008b;font-weight:bold">&gt;</span>
            <span style="color:#8b008b;font-weight:bold">&lt;level&gt;</span>ERROR<span style="color:#8b008b;font-weight:bold">&lt;/level&gt;</span>
            <span style="color:#8b008b;font-weight:bold">&lt;onMatch&gt;</span>ACCEPT<span style="color:#8b008b;font-weight:bold">&lt;/onMatch&gt;</span>
            <span style="color:#8b008b;font-weight:bold">&lt;onMismatch&gt;</span>DENY<span style="color:#8b008b;font-weight:bold">&lt;/onMismatch&gt;</span>
        <span style="color:#8b008b;font-weight:bold">&lt;/filter&gt;</span>
    <span style="color:#8b008b;font-weight:bold">&lt;/appender&gt;</span>

    <span style="color:#228b22">&lt;!--
</span><span style="color:#228b22">        &lt;logger&gt;用来设置某一个包或者具体的某一个类的日志打印级别、以及指定&lt;appender&gt;。
</span><span style="color:#228b22">        &lt;logger&gt;仅有一个name属性，
</span><span style="color:#228b22">        一个可选的level和一个可选的addtivity属性。
</span><span style="color:#228b22">        name:用来指定受此logger约束的某一个包或者具体的某一个类。
</span><span style="color:#228b22">        level:用来设置打印级别，大小写无关：TRACE, DEBUG, INFO, WARN, ERROR, ALL 和 OFF，
</span><span style="color:#228b22">              如果未设置此属性，那么当前logger将会继承上级的级别。
</span><span style="color:#228b22">    --&gt;</span>
    <span style="color:#228b22">&lt;!--
</span><span style="color:#228b22">        使用mybatis的时候，sql语句是debug下才会打印，而这里我们只配置了info，所以想要查看sql语句的话，有以下两种操作：
</span><span style="color:#228b22">        第一种把&lt;root level=&#34;INFO&#34;&gt;改成&lt;root level=&#34;DEBUG&#34;&gt;这样就会打印sql，不过这样日志那边会出现很多其他消息
</span><span style="color:#228b22">        第二种就是单独给mapper下目录配置DEBUG模式，代码如下，这样配置sql语句会打印，其他还是正常DEBUG级别：
</span><span style="color:#228b22">     --&gt;</span>
    <span style="color:#228b22">&lt;!--开发环境:打印控制台--&gt;</span>
    <span style="color:#8b008b;font-weight:bold">&lt;springProfile</span> <span style="color:#658b00">name=</span><span style="color:#cd5555">&#34;dev&#34;</span><span style="color:#8b008b;font-weight:bold">&gt;</span>
        <span style="color:#228b22">&lt;!--可以输出项目中的debug日志，包括mybatis的sql日志--&gt;</span>
        <span style="color:#8b008b;font-weight:bold">&lt;logger</span> <span style="color:#658b00">name=</span><span style="color:#cd5555">&#34;com.guli&#34;</span> <span style="color:#658b00">level=</span><span style="color:#cd5555">&#34;INFO&#34;</span> <span style="color:#8b008b;font-weight:bold">/&gt;</span>

        <span style="color:#228b22">&lt;!--
</span><span style="color:#228b22">            root节点是必选节点，用来指定最基础的日志输出级别，只有一个level属性
</span><span style="color:#228b22">            level:用来设置打印级别，大小写无关：TRACE, DEBUG, INFO, WARN, ERROR, ALL 和 OFF，默认是DEBUG
</span><span style="color:#228b22">            可以包含零个或多个appender元素。
</span><span style="color:#228b22">        --&gt;</span>
        <span style="color:#8b008b;font-weight:bold">&lt;root</span> <span style="color:#658b00">level=</span><span style="color:#cd5555">&#34;INFO&#34;</span><span style="color:#8b008b;font-weight:bold">&gt;</span>
            <span style="color:#8b008b;font-weight:bold">&lt;appender-ref</span> <span style="color:#658b00">ref=</span><span style="color:#cd5555">&#34;CONSOLE&#34;</span> <span style="color:#8b008b;font-weight:bold">/&gt;</span>
            <span style="color:#8b008b;font-weight:bold">&lt;appender-ref</span> <span style="color:#658b00">ref=</span><span style="color:#cd5555">&#34;INFO_FILE&#34;</span> <span style="color:#8b008b;font-weight:bold">/&gt;</span>
            <span style="color:#8b008b;font-weight:bold">&lt;appender-ref</span> <span style="color:#658b00">ref=</span><span style="color:#cd5555">&#34;WARN_FILE&#34;</span> <span style="color:#8b008b;font-weight:bold">/&gt;</span>
            <span style="color:#8b008b;font-weight:bold">&lt;appender-ref</span> <span style="color:#658b00">ref=</span><span style="color:#cd5555">&#34;ERROR_FILE&#34;</span> <span style="color:#8b008b;font-weight:bold">/&gt;</span>
        <span style="color:#8b008b;font-weight:bold">&lt;/root&gt;</span>
    <span style="color:#8b008b;font-weight:bold">&lt;/springProfile&gt;</span>


    <span style="color:#228b22">&lt;!--生产环境:输出到文件--&gt;</span>
    <span style="color:#8b008b;font-weight:bold">&lt;springProfile</span> <span style="color:#658b00">name=</span><span style="color:#cd5555">&#34;pro&#34;</span><span style="color:#8b008b;font-weight:bold">&gt;</span>

        <span style="color:#8b008b;font-weight:bold">&lt;root</span> <span style="color:#658b00">level=</span><span style="color:#cd5555">&#34;INFO&#34;</span><span style="color:#8b008b;font-weight:bold">&gt;</span>
            <span style="color:#8b008b;font-weight:bold">&lt;appender-ref</span> <span style="color:#658b00">ref=</span><span style="color:#cd5555">&#34;CONSOLE&#34;</span> <span style="color:#8b008b;font-weight:bold">/&gt;</span>
            <span style="color:#8b008b;font-weight:bold">&lt;appender-ref</span> <span style="color:#658b00">ref=</span><span style="color:#cd5555">&#34;DEBUG_FILE&#34;</span> <span style="color:#8b008b;font-weight:bold">/&gt;</span>
            <span style="color:#8b008b;font-weight:bold">&lt;appender-ref</span> <span style="color:#658b00">ref=</span><span style="color:#cd5555">&#34;INFO_FILE&#34;</span> <span style="color:#8b008b;font-weight:bold">/&gt;</span>
            <span style="color:#8b008b;font-weight:bold">&lt;appender-ref</span> <span style="color:#658b00">ref=</span><span style="color:#cd5555">&#34;ERROR_FILE&#34;</span> <span style="color:#8b008b;font-weight:bold">/&gt;</span>
            <span style="color:#8b008b;font-weight:bold">&lt;appender-ref</span> <span style="color:#658b00">ref=</span><span style="color:#cd5555">&#34;WARN_FILE&#34;</span> <span style="color:#8b008b;font-weight:bold">/&gt;</span>
        <span style="color:#8b008b;font-weight:bold">&lt;/root&gt;</span>
    <span style="color:#8b008b;font-weight:bold">&lt;/springProfile&gt;</span>

<span style="color:#8b008b;font-weight:bold">&lt;/configuration&gt;</span>

</code></pre></div><h2 id="十二跨域问题">十二、跨域问题</h2>
<p>什么是跨域？
浏览器从一个域名的网页去请求另一个域名的资源时，域名、端口、协议任一不同，都是跨域
域名：
　主域名不同 <a href="http://www.baidu.com/index.html">http://www.baidu.com/index.html</a> &ndash;&gt;http://www.sina.com/test.js
　子域名不同 <a href="http://www.666.baidu.com/index.html">http://www.666.baidu.com/index.html</a> &ndash;&gt;http://www.555.baidu.com/test.js
　域名和域名ip <a href="http://www.baidu.com/index.html">http://www.baidu.com/index.html</a> &ndash;&gt;http://180.149.132.47/test.js
端口：
　http://www.baidu.com:8080/index.html–&gt; <a href="http://www.baidu.com">http://www.baidu.com</a>:8081/test.js
协议：
　http://www.baidu.com:8080/index.html–&gt; <a href="https://www.baidu.com">https://www.baidu.com</a>:8080/test.js
备注：
　1、端口和协议的不同，只能通过后台来解决
　2、localhost和127.0.0.1虽然都指向本机，但也属于跨域</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#8b008b;font-weight:bold">import</span> <span style="color:#008b45;text-decoration:underline">org.springframework.context.annotation.Configuration</span>;  
<span style="color:#8b008b;font-weight:bold">import</span> <span style="color:#008b45;text-decoration:underline">org.springframework.web.servlet.config.annotation.CorsRegistry</span>;  
<span style="color:#8b008b;font-weight:bold">import</span> <span style="color:#008b45;text-decoration:underline">org.springframework.web.servlet.config.annotation.WebMvcConfigurer</span>;  
<span style="color:#707a7c">@Configuration</span>  
<span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#8b008b;font-weight:bold">class</span> <span style="color:#008b45;font-weight:bold">CorsConfig</span> <span style="color:#8b008b;font-weight:bold">implements</span> WebMvcConfigurer {  

    <span style="color:#707a7c">@Override</span>  
    <span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#00688b;font-weight:bold">void</span> <span style="color:#008b45">addCorsMappings</span>(CorsRegistry registry) {  
        registry.<span style="color:#658b00">addMapping</span>(<span style="color:#cd5555">&#34;/**&#34;</span>)  
                .<span style="color:#658b00">allowedOrigins</span>(<span style="color:#cd5555">&#34;*&#34;</span>)  
                .<span style="color:#658b00">allowCredentials</span>(<span style="color:#8b008b;font-weight:bold">true</span>)  
                .<span style="color:#658b00">allowedMethods</span>(<span style="color:#cd5555">&#34;GET&#34;</span>, <span style="color:#cd5555">&#34;POST&#34;</span>, <span style="color:#cd5555">&#34;DELETE&#34;</span>, <span style="color:#cd5555">&#34;PUT&#34;</span>,<span style="color:#cd5555">&#34;PATCH&#34;</span>)  
                .<span style="color:#658b00">maxAge</span>(3600);  
    }  
}  

</code></pre></div><p>也可以通过注解的方式：</p>
<h2 id="十三easyexcel">十三、EasyExcel</h2>
<h3 id="1pom中引入xml相关依赖">1.pom中引入xml相关依赖</h3>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml"><span style="color:#8b008b;font-weight:bold">&lt;dependencies&gt;</span>
    <span style="color:#228b22">&lt;!-- https://mvnrepository.com/artifact/com.alibaba/easyexcel --&gt;</span>
    <span style="color:#8b008b;font-weight:bold">&lt;dependency&gt;</span>
        <span style="color:#8b008b;font-weight:bold">&lt;groupId&gt;</span>com.alibaba<span style="color:#8b008b;font-weight:bold">&lt;/groupId&gt;</span>
        <span style="color:#8b008b;font-weight:bold">&lt;artifactId&gt;</span>easyexcel<span style="color:#8b008b;font-weight:bold">&lt;/artifactId&gt;</span>
        <span style="color:#8b008b;font-weight:bold">&lt;version&gt;</span>2.1.1<span style="color:#8b008b;font-weight:bold">&lt;/version&gt;</span>
    <span style="color:#8b008b;font-weight:bold">&lt;/dependency&gt;</span>
    <span style="color:#228b22">&lt;!--xls--&gt;</span>
    <span style="color:#8b008b;font-weight:bold">&lt;dependency&gt;</span>
        <span style="color:#8b008b;font-weight:bold">&lt;groupId&gt;</span>org.apache.poi<span style="color:#8b008b;font-weight:bold">&lt;/groupId&gt;</span>
        <span style="color:#8b008b;font-weight:bold">&lt;artifactId&gt;</span>poi<span style="color:#8b008b;font-weight:bold">&lt;/artifactId&gt;</span>
    <span style="color:#8b008b;font-weight:bold">&lt;/dependency&gt;</span>

    <span style="color:#8b008b;font-weight:bold">&lt;dependency&gt;</span>
        <span style="color:#8b008b;font-weight:bold">&lt;groupId&gt;</span>org.apache.poi<span style="color:#8b008b;font-weight:bold">&lt;/groupId&gt;</span>
        <span style="color:#8b008b;font-weight:bold">&lt;artifactId&gt;</span>poi-ooxml<span style="color:#8b008b;font-weight:bold">&lt;/artifactId&gt;</span>
    <span style="color:#8b008b;font-weight:bold">&lt;/dependency&gt;</span>
<span style="color:#8b008b;font-weight:bold">&lt;/dependencies&gt;</span>
</code></pre></div><h3 id="2创建实体类">2.创建实体类</h3>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#228b22">//设置表头和添加的数据字段
</span><span style="color:#228b22"></span><span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#8b008b;font-weight:bold">class</span> <span style="color:#008b45;font-weight:bold">DemoData</span> {
    <span style="color:#228b22">//设置表头名称
</span><span style="color:#228b22"></span>    <span style="color:#707a7c">@ExcelProperty</span>(<span style="color:#cd5555">&#34;学生编号&#34;</span>)
    <span style="color:#8b008b;font-weight:bold">private</span> <span style="color:#00688b;font-weight:bold">int</span> sno;
    
	<span style="color:#228b22">//设置表头名称
</span><span style="color:#228b22"></span>    <span style="color:#707a7c">@ExcelProperty</span>(<span style="color:#cd5555">&#34;学生姓名&#34;</span>)
    <span style="color:#8b008b;font-weight:bold">private</span> String sname;

    <span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#00688b;font-weight:bold">int</span> <span style="color:#008b45">getSno</span>() {
        <span style="color:#8b008b;font-weight:bold">return</span> sno;
    }

    <span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#00688b;font-weight:bold">void</span> <span style="color:#008b45">setSno</span>(<span style="color:#00688b;font-weight:bold">int</span> sno) {
        <span style="color:#8b008b;font-weight:bold">this</span>.<span style="color:#658b00">sno</span> = sno;
    }

    <span style="color:#8b008b;font-weight:bold">public</span> String <span style="color:#008b45">getSname</span>() {
        <span style="color:#8b008b;font-weight:bold">return</span> sname;
    }

    <span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#00688b;font-weight:bold">void</span> <span style="color:#008b45">setSname</span>(String sname) {
        <span style="color:#8b008b;font-weight:bold">this</span>.<span style="color:#658b00">sname</span> = sname;
    }

    <span style="color:#707a7c">@Override</span>
    <span style="color:#8b008b;font-weight:bold">public</span> String <span style="color:#008b45">toString</span>() {
        <span style="color:#8b008b;font-weight:bold">return</span> <span style="color:#cd5555">&#34;DemoData{&#34;</span> +
                <span style="color:#cd5555">&#34;sno=&#34;</span> + sno +
                <span style="color:#cd5555">&#34;, sname=&#39;&#34;</span> + sname + <span style="color:#cd5555">&#39;\&#39;&#39;</span> +
                <span style="color:#cd5555">&#39;}&#39;</span>;
    }
}
</code></pre></div><h3 id="3实现写操作">3.实现写操作</h3>
<p><code>创建方法循环设置要添加到Excel的数据</code></p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#228b22">//循环设置要添加的数据，最终封装到list集合中
</span><span style="color:#228b22"></span><span style="color:#8b008b;font-weight:bold">private</span> <span style="color:#8b008b;font-weight:bold">static</span> List&lt;DemoData&gt; <span style="color:#008b45">data</span>() {
    List&lt;DemoData&gt; list = <span style="color:#8b008b;font-weight:bold">new</span> ArrayList&lt;DemoData&gt;();
    <span style="color:#8b008b;font-weight:bold">for</span> (<span style="color:#00688b;font-weight:bold">int</span> i = 0; i &lt; 10; i++) {
        DemoData data = <span style="color:#8b008b;font-weight:bold">new</span> DemoData();
        data.<span style="color:#658b00">setSno</span>(i);
        data.<span style="color:#658b00">setSname</span>(<span style="color:#cd5555">&#34;张三&#34;</span>+i);
        list.<span style="color:#658b00">add</span>(data);
    }
    <span style="color:#8b008b;font-weight:bold">return</span> list;
}
</code></pre></div><p><code>实现最终的添加操作（写法一）</code></p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#8b008b;font-weight:bold">static</span> <span style="color:#00688b;font-weight:bold">void</span> <span style="color:#008b45">main</span>(String[] args) <span style="color:#8b008b;font-weight:bold">throws</span> Exception {
    <span style="color:#228b22">// 写法1
</span><span style="color:#228b22"></span>    String fileName = <span style="color:#cd5555">&#34;F:\\11.xlsx&#34;</span>;
    <span style="color:#228b22">// 这里 需要指定写用哪个class去写，然后写到第一个sheet，名字为模板 然后文件流会自动关闭
</span><span style="color:#228b22"></span>    <span style="color:#228b22">// 如果这里想使用03 则 传入excelType参数即可
</span><span style="color:#228b22"></span>    EasyExcel.<span style="color:#658b00">write</span>(fileName, DemoData.<span style="color:#658b00">class</span>).<span style="color:#658b00">sheet</span>(<span style="color:#cd5555">&#34;写入方法一&#34;</span>).<span style="color:#658b00">doWrite</span>(data());
}
</code></pre></div><p><code>实现最终的添加操作（写法二）</code></p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#8b008b;font-weight:bold">static</span> <span style="color:#00688b;font-weight:bold">void</span> <span style="color:#008b45">main</span>(String[] args) <span style="color:#8b008b;font-weight:bold">throws</span> Exception {
    <span style="color:#228b22">// 写法2，方法二需要手动关闭流
</span><span style="color:#228b22"></span>    String fileName = <span style="color:#cd5555">&#34;F:\\112.xlsx&#34;</span>;
    <span style="color:#228b22">// 这里 需要指定写用哪个class去写
</span><span style="color:#228b22"></span>    ExcelWriter excelWriter = EasyExcel.<span style="color:#658b00">write</span>(fileName, DemoData.<span style="color:#658b00">class</span>).<span style="color:#658b00">build</span>();
    WriteSheet writeSheet = EasyExcel.<span style="color:#658b00">writerSheet</span>(<span style="color:#cd5555">&#34;写入方法二&#34;</span>).<span style="color:#658b00">build</span>();
    excelWriter.<span style="color:#658b00">write</span>(data(), writeSheet);
    <span style="color:#228b22">/// 千万别忘记finish 会帮忙关闭流
</span><span style="color:#228b22"></span>    excelWriter.<span style="color:#658b00">finish</span>();
}
</code></pre></div><h3 id="4实现读操作">4.实现读操作</h3>
<p><code>创建实体类</code></p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#8b008b;font-weight:bold">class</span> <span style="color:#008b45;font-weight:bold">ReadData</span> {
    <span style="color:#228b22">//设置列对应的属性
</span><span style="color:#228b22"></span>    <span style="color:#707a7c">@ExcelProperty</span>(index = 0)
    <span style="color:#8b008b;font-weight:bold">private</span> <span style="color:#00688b;font-weight:bold">int</span> sid;
    
    <span style="color:#228b22">//设置列对应的属性
</span><span style="color:#228b22"></span>    <span style="color:#707a7c">@ExcelProperty</span>(index = 1)
    <span style="color:#8b008b;font-weight:bold">private</span> String sname;

    <span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#00688b;font-weight:bold">int</span> <span style="color:#008b45">getSid</span>() {
        <span style="color:#8b008b;font-weight:bold">return</span> sid;
    }
    <span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#00688b;font-weight:bold">void</span> <span style="color:#008b45">setSid</span>(<span style="color:#00688b;font-weight:bold">int</span> sid) {
        <span style="color:#8b008b;font-weight:bold">this</span>.<span style="color:#658b00">sid</span> = sid;
    }
    <span style="color:#8b008b;font-weight:bold">public</span> String <span style="color:#008b45">getSname</span>() {
        <span style="color:#8b008b;font-weight:bold">return</span> sname;
    }
    <span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#00688b;font-weight:bold">void</span> <span style="color:#008b45">setSname</span>(String sname) {
        <span style="color:#8b008b;font-weight:bold">this</span>.<span style="color:#658b00">sname</span> = sname;
    }
    <span style="color:#707a7c">@Override</span>
    <span style="color:#8b008b;font-weight:bold">public</span> String <span style="color:#008b45">toString</span>() {
        <span style="color:#8b008b;font-weight:bold">return</span> <span style="color:#cd5555">&#34;ReadData{&#34;</span> +
                <span style="color:#cd5555">&#34;sid=&#34;</span> + sid +
                <span style="color:#cd5555">&#34;, sname=&#39;&#34;</span> + sname + <span style="color:#cd5555">&#39;\&#39;&#39;</span> +
                <span style="color:#cd5555">&#39;}&#39;</span>;
    }
}
</code></pre></div><p><code>创建读取操作的监听器</code></p>
<pre><code>//创建读取excel监听器
public class ExcelListener extends AnalysisEventListener&lt;ReadData&gt; {
    //创建list集合封装最终的数据
    List&lt;ReadData&gt; list = new ArrayList&lt;ReadData&gt;();

    //一行一行去读取excle内容
    @Override
    public void invoke(ReadData user, AnalysisContext analysisContext) {
       System.out.println(&quot;***&quot;+user);
        list.add(user);
    }

    //读取excel表头信息
    @Override
    public void invokeHeadMap(Map&lt;Integer, String&gt; headMap, AnalysisContext context) {
        System.out.println(&quot;表头信息：&quot;+headMap);
    }

    //读取完成后执行
    @Override
    public void doAfterAllAnalysed(AnalysisContext analysisContext) {
    }
}
</code></pre>
<p><code>调用实现最终的读取</code></p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#8b008b;font-weight:bold">static</span> <span style="color:#00688b;font-weight:bold">void</span> <span style="color:#008b45">main</span>(String[] args) <span style="color:#8b008b;font-weight:bold">throws</span> Exception {

        <span style="color:#228b22">// 写法1：
</span><span style="color:#228b22"></span>        String fileName = <span style="color:#cd5555">&#34;F:\\01.xlsx&#34;</span>;
        <span style="color:#228b22">// 这里 需要指定读用哪个class去读，然后读取第一个sheet 文件流会自动关闭
</span><span style="color:#228b22"></span>        EasyExcel.<span style="color:#658b00">read</span>(fileName, ReadData.<span style="color:#658b00">class</span>, <span style="color:#8b008b;font-weight:bold">new</span> ExcelListener()).<span style="color:#658b00">sheet</span>().<span style="color:#658b00">doRead</span>();

        <span style="color:#228b22">// 写法2：
</span><span style="color:#228b22"></span>        InputStream in = <span style="color:#8b008b;font-weight:bold">new</span> BufferedInputStream(<span style="color:#8b008b;font-weight:bold">new</span> FileInputStream(<span style="color:#cd5555">&#34;F:\\01.xlsx&#34;</span>));
        ExcelReader excelReader = EasyExcel.<span style="color:#658b00">read</span>(in, ReadData.<span style="color:#658b00">class</span>, <span style="color:#8b008b;font-weight:bold">new</span> ExcelListener()).<span style="color:#658b00">build</span>();
        ReadSheet readSheet = EasyExcel.<span style="color:#658b00">readSheet</span>(0).<span style="color:#658b00">build</span>();
        excelReader.<span style="color:#658b00">read</span>(readSheet);
        <span style="color:#228b22">// 这里千万别忘记关闭，读的时候会创建临时文件，到时磁盘会崩的
</span><span style="color:#228b22"></span>        excelReader.<span style="color:#658b00">finish</span>();
}
</code></pre></div>
</article></div>
    <div class="pad"></div>

    

    <div class="pagination">
        
        <a class="pure-button pagination-item older" href="/page/3/">Older</a>
        

        
        <a class="pure-button pagination-item newer" href="/">Newer</a>
        
    </div>
</div>


                
<div id="sidebar" class="pure-u-1 pure-u-md-1-4 pure-u-sm-1">
    <div class="pad">
        <a name="about"></a>
        <h3>关于我</h3>
        <div style="text-align: center;">
            <img src="/img/author.jpg" alt="吴继文" class="pure-img" />
            <p><em>Handsome</em></p>
        </div>

        <h3>最近文章</h3>
        <div class="pure-menu pure-menu-open">
            <ul class="pure-menu-list">
                
                <li class="pure-menu-item">
                    <a href="https://example.com/posts/mybatis-plus/" class="pure-menu-link">Mybatis-Plus<br>
                        <small>MyBatis-Plus 的增强工具，在 MyBatis 的基础上只做增强不做改变，为简化开发、提高效率而生。</small>
                    </a>
                </li>
                
                <li class="pure-menu-item">
                    <a href="https://example.com/posts/mongodb/" class="pure-menu-link">DBmong数据库<br>
                        <small>NoSQL 是一项全新的数据库革命性运动，早期就有人提出，发展至2009年趋势越发高涨。NoSQL的拥护者们提倡运用非关系型的数据存储，相对于铺天盖地的关系型数据库运用，这一概念无疑是一种全新的思维的注入。</small>
                    </a>
                </li>
                
                <li class="pure-menu-item">
                    <a href="https://example.com/posts/docker/" class="pure-menu-link">Docker容器技术<br>
                        <small>这一种常用的容器技术，能简化项目的部署</small>
                    </a>
                </li>
                
                <li class="pure-menu-item">
                    <a href="https://example.com/posts/go%E8%AF%AD%E8%A8%80/" class="pure-menu-link">Go语言技术知识<br>
                        <small>主要介绍GO语言的基本语法</small>
                    </a>
                </li>
                
                <li class="pure-menu-item">
                    <a href="https://example.com/posts/hexo&#43;github%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E6%A1%86%E6%9E%B6/" class="pure-menu-link">hexo&#43;github搭建个人博客<br>
                        <small>介绍了个人博客搭建的完整步骤</small>
                    </a>
                </li>
                
                <li class="pure-menu-item">
                    <a href="https://example.com/posts/idea%E7%9A%84%E5%B8%B8%E7%94%A8%E5%BF%AB%E6%8D%B7%E9%94%AE/" class="pure-menu-link">IDEA的基本使用<br>
                        <small>主要介绍了IDEA的基本以用和一些常用的快捷键</small>
                    </a>
                </li>
                
                <li class="pure-menu-item">
                    <a href="https://example.com/posts/java%E8%BF%9E%E6%8E%A5%E6%95%B0%E6%8D%AE%E5%BA%93/" class="pure-menu-link">Java原生代码连接数据库<br>
                        <small>介绍了在不使用框架的基础上连接MySQL</small>
                    </a>
                </li>
                
                <li class="pure-menu-item">
                    <a href="https://example.com/posts/%E5%9F%BA%E4%BA%8Ejava%E7%9A%84%E5%A4%9A%E7%BA%BF%E7%A8%8B/" class="pure-menu-link">Java多线程基础知识<br>
                        <small>一种提高程序运行效率的技术</small>
                    </a>
                </li>
                
                <li class="pure-menu-item">
                    <a href="https://example.com/posts/java%E5%AE%9E%E7%8E%B0%E4%B8%B2%E5%8F%A3%E9%80%9A%E4%BF%A1/" class="pure-menu-link">Java实现串口通信<br>
                        <small>Java实现窗口通信</small>
                    </a>
                </li>
                
                <li class="pure-menu-item">
                    <a href="https://example.com/posts/java%E7%9A%84%E5%9F%BA%E6%9C%AC%E7%9F%A5%E8%AF%86/" class="pure-menu-link">Java的基础知识<br>
                        <small>介绍了Java的基础知识</small>
                    </a>
                </li>
                
            </ul>
        </div>

        <h3>分类</h3>
        <div style="text-align:center" class="tags">
            
            
            <a href="/tags/%e6%a1%86%e6%9e%b6" class="pure-button"> 框架
                <small>(6)</small></a>
            
            
            
            <a href="/tags/%e7%bc%96%e7%a8%8b" class="pure-button"> 编程
                <small>(5)</small></a>
            
            
            
            <a href="/tags/%e5%85%b6%e5%ae%83" class="pure-button"> 其它
                <small>(2)</small></a>
            
            
            
            <a href="/tags/%e6%95%b0%e6%8d%ae%e5%ba%93" class="pure-button"> 数据库
                <small>(2)</small></a>
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
        </div>
    </div> 
</div> 

                
            </div>
<div class="pure-g">
	<footer class="pure-u-1 pure-u-md-1 pure-u-sm-1">
		<p>This page and its contents are copyright &copy; 2020,
			<a href="">吴继文</a>.</p>
		<p><a href="https://github.com/pravin/hugo-theme-prav">Theme Prav</a> by <a href="https://cto.me.uk">Pravin
				Paratey</a></p>
	</footer>

	<script defer src="https://use.fontawesome.com/releases/v5.0.9/js/all.js"
		integrity="sha384-8iPTk2s/jMVj81dnzb/iFR2sdA7u06vHJyyLlAd4snFpCl/SnyUjRrbdJsw1pGIl"
		crossorigin="anonymous"></script>
</div>
</div></body>
</html>
